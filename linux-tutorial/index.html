<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Linux教程 | 小辉的折腾天地</title>

  <!-- 引入 CSS 样式 -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/header.css">
  <link rel="stylesheet" href="/assets/css/footer.css">
  <link rel="stylesheet" href="/assets/css/post.css">
  <link rel="stylesheet" href="/assets/css/friends.css">
  <link rel="stylesheet" href="/assets/css/blog.css">
  <link rel="stylesheet" href="/assets/css/index.css">

  <!-- 代码高亮样式 -->
  <link rel="stylesheet" href="/assets/css/code-highlight.css">

  <!-- 国内Font Awesome镜像 -->
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/7.0.0/css/all.min.css">

  <!-- === 图片点击放大功能 === -->
  <script src="https://cdn.bootcdn.net/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js"></script>

  <!-- 网站图标 -->
  
  <link rel="icon" 
        href="https://cdn.tungchiahui.cn/tungwebsite/assets/images/favicon.webp">

  <!-- Vercount 网站访问统计 -->
  <script defer src="https://events.vercount.one/js"></script>

</head>

  <body>
    <header class="site-header">

  <!-- 内容层 -->
  <div class="header-content">
    <h1><a href="/">小辉的折腾天地</a></h1>
    <nav>
      <ul>
        <li><a href="/">首页</a></li>
        <li><a href="/blog/">博客</a></li>
        <li><a href="/cv/">简历</a></li>
        <li><a href="/friends/">友链</a></li>
        <li><a href="/about/">关于</a></li>
      </ul>
    </nav>
  </div>
</header>

    <main>
      <article class="post-main">
  <h2>Linux教程</h2>
  <p>
    <small>
      发布于 2024-03-30 | 作者: Tung Chia-hui | 阅读次数：<span id="vercount_value_page_pv">Loading</span> 次
    </small>
  </p>
  <div class="post-content">
    <ul id="markdown-toc">
  <li><a href="#发行版推荐" id="markdown-toc-发行版推荐">发行版推荐</a></li>
  <li><a href="#linux装机教程" id="markdown-toc-linux装机教程">Linux装机教程</a>    <ul>
      <li><a href="#实体机双系统最推荐" id="markdown-toc-实体机双系统最推荐">实体机（双系统，最推荐）</a>        <ul>
          <li><a href="#环境准备" id="markdown-toc-环境准备">环境准备</a></li>
          <li><a href="#关闭安全启动secure-boot" id="markdown-toc-关闭安全启动secure-boot">关闭安全启动Secure Boot</a>            <ul>
              <li><a href="#联想拯救者" id="markdown-toc-联想拯救者">联想拯救者</a></li>
              <li><a href="#戴尔游匣intel版" id="markdown-toc-戴尔游匣intel版">戴尔游匣Intel版</a></li>
              <li><a href="#惠普暗影精灵" id="markdown-toc-惠普暗影精灵">惠普暗影精灵</a></li>
              <li><a href="#华硕天选" id="markdown-toc-华硕天选">华硕天选</a></li>
            </ul>
          </li>
          <li><a href="#开启核显" id="markdown-toc-开启核显">开启核显</a>            <ul>
              <li><a href="#联想拯救者-1" id="markdown-toc-联想拯救者-1">联想拯救者</a></li>
              <li><a href="#戴尔游匣intel版-1" id="markdown-toc-戴尔游匣intel版-1">戴尔游匣Intel版</a></li>
              <li><a href="#戴尔游匣amd版" id="markdown-toc-戴尔游匣amd版">戴尔游匣AMD版</a></li>
              <li><a href="#惠普暗影精灵-1" id="markdown-toc-惠普暗影精灵-1">惠普暗影精灵</a></li>
              <li><a href="#华硕天选-1" id="markdown-toc-华硕天选-1">华硕天选</a></li>
            </ul>
          </li>
          <li><a href="#安装adk" id="markdown-toc-安装adk">安装ADK</a></li>
          <li><a href="#下载diskgenius" id="markdown-toc-下载diskgenius">下载DiskGenius</a></li>
          <li><a href="#下载傲梅分区助手" id="markdown-toc-下载傲梅分区助手">下载傲梅分区助手</a></li>
          <li><a href="#下载ventoy" id="markdown-toc-下载ventoy">下载Ventoy</a></li>
          <li><a href="#下载镜像" id="markdown-toc-下载镜像">下载镜像</a>            <ul>
              <li><a href="#x86_64amd64" id="markdown-toc-x86_64amd64">X86_64(amd64)</a></li>
            </ul>
          </li>
          <li><a href="#硬盘分区安装方案" id="markdown-toc-硬盘分区安装方案">硬盘分区安装方案</a></li>
          <li><a href="#创建安装介质" id="markdown-toc-创建安装介质">创建安装介质</a>            <ul>
              <li><a href="#方法一u盘法" id="markdown-toc-方法一u盘法">方法一：U盘法</a>                <ul>
                  <li><a href="#创建ventoy-u盘" id="markdown-toc-创建ventoy-u盘">创建Ventoy U盘</a></li>
                  <li><a href="#安装微pe并下载winpe的镜像" id="markdown-toc-安装微pe并下载winpe的镜像">安装微PE并下载WinPE的镜像</a></li>
                  <li><a href="#复制linux镜像iso" id="markdown-toc-复制linux镜像iso">复制Linux镜像iso</a></li>
                  <li><a href="#设置启动项ventoy" id="markdown-toc-设置启动项ventoy">设置启动项Ventoy</a></li>
                  <li><a href="#在ventoy里启动linux安装介质镜像" id="markdown-toc-在ventoy里启动linux安装介质镜像">在Ventoy里启动Linux安装介质镜像</a></li>
                </ul>
              </li>
              <li><a href="#方法二本地法" id="markdown-toc-方法二本地法">方法二：本地法</a>                <ul>
                  <li><a href="#本地法创建" id="markdown-toc-本地法创建">本地法创建</a></li>
                  <li><a href="#删除本地安装介质安装完后再删" id="markdown-toc-删除本地安装介质安装完后再删">删除本地安装介质(安装完后再删）</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a href="#linux安装空间的预留" id="markdown-toc-linux安装空间的预留">Linux安装空间的预留</a>            <ul>
              <li><a href="#硬盘分区安装方案的场景" id="markdown-toc-硬盘分区安装方案的场景">硬盘分区安装方案的场景①</a></li>
              <li><a href="#硬盘分区安装方案的场景-1" id="markdown-toc-硬盘分区安装方案的场景-1">硬盘分区安装方案的场景②</a></li>
              <li><a href="#硬盘分区安装方案的场景3️⃣" id="markdown-toc-硬盘分区安装方案的场景3️⃣">硬盘分区安装方案的场景3️⃣</a></li>
            </ul>
          </li>
          <li><a href="#安装linux" id="markdown-toc-安装linux">安装Linux</a>            <ul>
              <li><a href="#grub设置" id="markdown-toc-grub设置">grub设置</a></li>
              <li><a href="#基础安装选项" id="markdown-toc-基础安装选项">基础安装选项</a></li>
              <li><a href="#分区设置重要" id="markdown-toc-分区设置重要">分区设置（重要！！！）</a>                <ul>
                  <li><a href="#与windows使用同一个efi分区" id="markdown-toc-与windows使用同一个efi分区">与Windows使用同一个EFI分区</a>                    <ul>
                      <li><a href="#初步设置" id="markdown-toc-初步设置">初步设置</a></li>
                      <li><a href="#swap分区建立" id="markdown-toc-swap分区建立">swap分区建立</a></li>
                      <li><a href="#根目录分区建立" id="markdown-toc-根目录分区建立">根目录/分区建立</a></li>
                      <li><a href="#取消挂载其他无关分区" id="markdown-toc-取消挂载其他无关分区">取消挂载其他无关分区</a></li>
                      <li><a href="#设置uefi引导位置" id="markdown-toc-设置uefi引导位置">设置UEFI引导位置</a></li>
                    </ul>
                  </li>
                  <li><a href="#独立的efi分区不推荐" id="markdown-toc-独立的efi分区不推荐">独立的EFI分区（不推荐）</a>                    <ul>
                      <li><a href="#初步设置-1" id="markdown-toc-初步设置-1">初步设置</a></li>
                      <li><a href="#efi分区建立比前面的那种方法多一个efi分区" id="markdown-toc-efi分区建立比前面的那种方法多一个efi分区">EFI分区建立（比前面的那种方法多一个EFI分区）</a></li>
                      <li><a href="#swap分区建立-1" id="markdown-toc-swap分区建立-1">swap分区建立</a></li>
                      <li><a href="#根目录分区建立-1" id="markdown-toc-根目录分区建立-1">根目录/分区建立</a></li>
                      <li><a href="#取消挂载其他无关分区-1" id="markdown-toc-取消挂载其他无关分区-1">取消挂载其他无关分区</a></li>
                      <li><a href="#设置uefi引导位置-1" id="markdown-toc-设置uefi引导位置-1">设置UEFI引导位置</a></li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><a href="#最后设置" id="markdown-toc-最后设置">最后设置</a></li>
            </ul>
          </li>
          <li><a href="#双系统切换" id="markdown-toc-双系统切换">双系统切换</a></li>
          <li><a href="#彻底删除linux" id="markdown-toc-彻底删除linux">彻底删除Linux</a>            <ul>
              <li><a href="#分区格式化" id="markdown-toc-分区格式化">分区格式化</a></li>
              <li><a href="#引导删除" id="markdown-toc-引导删除">引导删除</a>                <ul>
                  <li><a href="#和windows共用efi" id="markdown-toc-和windows共用efi">和Windows共用EFI</a></li>
                  <li><a href="#独立的efi" id="markdown-toc-独立的efi">独立的EFI</a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#普通虚拟机不推荐" id="markdown-toc-普通虚拟机不推荐">普通虚拟机（不推荐）</a></li>
      <li><a href="#windows-subsystem-for-linux-2windows的linux子系统2勉强的法子" id="markdown-toc-windows-subsystem-for-linux-2windows的linux子系统2勉强的法子">Windows Subsystem For Linux 2(Windows的Linux子系统2)（勉强的法子）</a>        <ul>
          <li><a href="#简介与优缺点" id="markdown-toc-简介与优缺点">简介与优缺点</a></li>
          <li><a href="#安装教程" id="markdown-toc-安装教程">安装教程</a>            <ul>
              <li><a href="#启动wsl2子系统和虚拟平台" id="markdown-toc-启动wsl2子系统和虚拟平台">启动WSL2子系统和虚拟平台</a></li>
              <li><a href="#将wsl2设置为默认版本" id="markdown-toc-将wsl2设置为默认版本">将WSL2设置为默认版本</a></li>
              <li><a href="#安装linux发行版" id="markdown-toc-安装linux发行版">安装Linux发行版</a></li>
              <li><a href="#查看系统状态" id="markdown-toc-查看系统状态">查看系统状态</a></li>
              <li><a href="#设置用户名与密码" id="markdown-toc-设置用户名与密码">设置用户名与密码</a></li>
              <li><a href="#卸载发行版" id="markdown-toc-卸载发行版">卸载发行版</a></li>
            </ul>
          </li>
          <li><a href="#配置各种环境" id="markdown-toc-配置各种环境">配置各种环境</a>            <ul>
              <li><a href="#换源" id="markdown-toc-换源">换源</a></li>
              <li><a href="#英伟达显卡" id="markdown-toc-英伟达显卡">英伟达显卡</a>                <ul>
                  <li><a href="#显卡驱动" id="markdown-toc-显卡驱动">显卡驱动</a></li>
                  <li><a href="#cuda" id="markdown-toc-cuda">CUDA</a></li>
                  <li><a href="#cudnn" id="markdown-toc-cudnn">cuDNN</a></li>
                </ul>
              </li>
              <li><a href="#配置网络" id="markdown-toc-配置网络">配置网络</a></li>
              <li><a href="#usb直通" id="markdown-toc-usb直通">USB直通</a></li>
              <li><a href="#vscode远程开发" id="markdown-toc-vscode远程开发">VScode远程开发</a></li>
              <li><a href="#linux终端使用windows软件" id="markdown-toc-linux终端使用windows软件">Linux终端使用Windows软件</a></li>
              <li><a href="#opengl有问题" id="markdown-toc-opengl有问题">OpenGL有问题</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#安装必备配置" id="markdown-toc-安装必备配置">安装必备配置</a>    <ul>
      <li><a href="#软件包换源以debian系的发行版为例" id="markdown-toc-软件包换源以debian系的发行版为例">  软件包换源（以Debian系的发行版为例）</a>        <ul>
          <li><a href="#ubuntu2204及debian10及以下版本" id="markdown-toc-ubuntu2204及debian10及以下版本">  Ubuntu22.04(及Debian10)及以下版本</a></li>
          <li><a href="#ubuntu2404及debian12及以上版本" id="markdown-toc-ubuntu2404及debian12及以上版本">  Ubuntu24.04(及Debian12)及以上版本</a></li>
          <li><a href="#fedora41dnf5及之后" id="markdown-toc-fedora41dnf5及之后">Fedora41(DNF5)及之后</a></li>
        </ul>
      </li>
      <li><a href="#卸载恶心的snapubuntu的衍生版" id="markdown-toc-卸载恶心的snapubuntu的衍生版">卸载恶心的snap(Ubuntu的衍生版)</a>        <ul>
          <li><a href="#安装非firefox浏览器" id="markdown-toc-安装非firefox浏览器">安装非firefox浏览器</a></li>
          <li><a href="#查看snap包应用数量" id="markdown-toc-查看snap包应用数量">查看snap包应用数量</a></li>
          <li><a href="#移除snap应用" id="markdown-toc-移除snap应用">移除snap应用</a></li>
          <li><a href="#移除snap" id="markdown-toc-移除snap">移除snap</a></li>
          <li><a href="#禁止系统自动安装snap" id="markdown-toc-禁止系统自动安装snap">禁止系统自动安装snap</a></li>
          <li><a href="#测试是否成功" id="markdown-toc-测试是否成功">测试是否成功</a></li>
          <li><a href="#重新安装firefox浏览器没大有必要" id="markdown-toc-重新安装firefox浏览器没大有必要">重新安装FireFox浏览器（没大有必要）</a></li>
          <li><a href="#跨ubuntu大版本更新" id="markdown-toc-跨ubuntu大版本更新">跨Ubuntu大版本更新</a></li>
        </ul>
      </li>
      <li><a href="#切换系统语言到中文" id="markdown-toc-切换系统语言到中文">切换系统语言到中文</a></li>
      <li><a href="#中文输入法" id="markdown-toc-中文输入法">中文输入法</a>        <ul>
          <li><a href="#搜狗不建议ubuntu2204-及-以下" id="markdown-toc-搜狗不建议ubuntu2204-及-以下">搜狗(不建议）(Ubuntu22.04 <strong>及</strong> 以下)</a></li>
          <li><a href="#fcitx5ubuntu2204-及-以上debian12及以上fedora" id="markdown-toc-fcitx5ubuntu2204-及-以上debian12及以上fedora">Fcitx5(Ubuntu22.04 <strong>及</strong> 以上、Debian12及以上、Fedora)</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#ubuntu" id="markdown-toc-ubuntu">Ubuntu</a></li>
  <li><a href="#直接在线执行工具箱优化" id="markdown-toc-直接在线执行工具箱优化">直接在线执行工具箱优化</a></li>
  <li><a href="#fedora" id="markdown-toc-fedora">Fedora</a></li>
  <li><a href="#直接在线执行工具箱优化-1" id="markdown-toc-直接在线执行工具箱优化-1">直接在线执行工具箱优化</a>    <ul>
      <li><a href="#pip3源替换" id="markdown-toc-pip3源替换">pip3源替换</a></li>
      <li><a href="#rpmfusion安装并换源" id="markdown-toc-rpmfusion安装并换源">RPMFusion安装并换源</a></li>
      <li><a href="#时间不同步" id="markdown-toc-时间不同步">时间不同步</a></li>
      <li><a href="#显卡驱动安装" id="markdown-toc-显卡驱动安装">显卡驱动安装</a>        <ul>
          <li><a href="#卸载显卡驱动卸载干净" id="markdown-toc-卸载显卡驱动卸载干净">卸载显卡驱动(卸载干净)</a></li>
          <li><a href="#常见问题遇到问题再翻上来看这里" id="markdown-toc-常见问题遇到问题再翻上来看这里">常见问题（遇到问题再翻上来看这里）</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#重启" id="markdown-toc-重启">重启</a>    <ul>
      <li><a href="#安装方式推荐" id="markdown-toc-安装方式推荐">安装方式推荐</a></li>
      <li><a href="#apt安装方式一适合debianubuntu等" id="markdown-toc-apt安装方式一适合debianubuntu等">APT安装（方式一：适合Debian,Ubuntu等）</a>        <ul>
          <li><a href="#安装显卡驱动" id="markdown-toc-安装显卡驱动">安装显卡驱动</a>            <ul>
              <li><a href="#ubuntu-1" id="markdown-toc-ubuntu-1">Ubuntu</a></li>
              <li><a href="#debian" id="markdown-toc-debian">Debian</a></li>
            </ul>
          </li>
          <li><a href="#安装cuda" id="markdown-toc-安装cuda">安装CUDA</a></li>
          <li><a href="#安装cudnn" id="markdown-toc-安装cudnn">安装cuDNN</a></li>
        </ul>
      </li>
      <li><a href="#dnf安装方式二适合fedorarocky等" id="markdown-toc-dnf安装方式二适合fedorarocky等">DNF安装（方式二：适合Fedora,Rocky等）</a>        <ul>
          <li><a href="#安装显卡驱动-1" id="markdown-toc-安装显卡驱动-1">安装显卡驱动</a>            <ul>
              <li><a href="#fedora-1" id="markdown-toc-fedora-1">Fedora</a></li>
            </ul>
          </li>
          <li><a href="#安装cuda-1" id="markdown-toc-安装cuda-1">安装CUDA</a></li>
          <li><a href="#安装cudnn-1" id="markdown-toc-安装cudnn-1">安装cuDNN</a></li>
        </ul>
      </li>
      <li><a href="#通用方式方式三脚本或压缩包方式" id="markdown-toc-通用方式方式三脚本或压缩包方式">通用方式（方式三：脚本或压缩包方式）</a>        <ul>
          <li><a href="#安装显卡驱动-2" id="markdown-toc-安装显卡驱动-2">安装显卡驱动</a></li>
          <li><a href="#安装cuda-2" id="markdown-toc-安装cuda-2">安装CUDA</a></li>
          <li><a href="#安装cudnn基本废弃请往下看apt和dnf安装cudnn的方式" id="markdown-toc-安装cudnn基本废弃请往下看apt和dnf安装cudnn的方式">安装cuDNN<strong>（基本废弃，请往下看apt和dnf安装CuDNN的方式）</strong></a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#命令教程长期积累" id="markdown-toc-命令教程长期积累">命令教程(长期积累)</a>    <ul>
      <li><a href="#大多数命令" id="markdown-toc-大多数命令">大多数命令</a></li>
      <li><a href="#包管理工具命令" id="markdown-toc-包管理工具命令">包管理工具命令</a></li>
      <li><a href="#kde-dolphin-以root打开" id="markdown-toc-kde-dolphin-以root打开">KDE Dolphin 以root打开</a></li>
    </ul>
  </li>
  <li><a href="#各种环境配置" id="markdown-toc-各种环境配置">各种环境配置</a></li>
  <li><a href="#其他可选配置" id="markdown-toc-其他可选配置">其他可选配置</a>    <ul>
      <li><a href="#kde的wayland和x11互相切换" id="markdown-toc-kde的wayland和x11互相切换">KDE的Wayland和X11互相切换</a></li>
      <li><a href="#修改dns" id="markdown-toc-修改dns">修改DNS</a></li>
      <li><a href="#截图快捷键" id="markdown-toc-截图快捷键">截图快捷键</a></li>
      <li><a href="#搜索工具" id="markdown-toc-搜索工具">搜索工具</a></li>
      <li><a href="#关闭selinux" id="markdown-toc-关闭selinux">关闭SELinux</a></li>
      <li><a href="#uefi启动界面refind" id="markdown-toc-uefi启动界面refind">UEFI启动界面rEFInd</a>        <ul>
          <li><a href="#安装refind" id="markdown-toc-安装refind">安装rEFInd</a></li>
          <li><a href="#确认refind是否安装成功" id="markdown-toc-确认refind是否安装成功">确认refind是否安装成功</a></li>
          <li><a href="#配置-refindconf" id="markdown-toc-配置-refindconf">配置 refind.conf</a></li>
          <li><a href="#美化" id="markdown-toc-美化">美化</a></li>
        </ul>
      </li>
      <li><a href="#kde主题" id="markdown-toc-kde主题">KDE主题</a></li>
      <li><a href="#自启应用与脚本" id="markdown-toc-自启应用与脚本">自启应用与脚本</a></li>
      <li><a href="#从bash切换到zsh" id="markdown-toc-从bash切换到zsh">从Bash切换到Zsh</a>        <ul>
          <li><a href="#什么是shell" id="markdown-toc-什么是shell">什么是shell？</a></li>
          <li><a href="#zsh有什么优势" id="markdown-toc-zsh有什么优势">zsh有什么优势？</a></li>
          <li><a href="#zsh安装与配置" id="markdown-toc-zsh安装与配置">zsh安装与配置</a></li>
          <li><a href="#oh-my-zsh" id="markdown-toc-oh-my-zsh">oh my zsh!</a></li>
          <li><a href="#配置oh-my-zsh" id="markdown-toc-配置oh-my-zsh">配置oh my zsh</a></li>
          <li><a href="#定制独一无二的zsh" id="markdown-toc-定制独一无二的zsh">定制独一无二的zsh</a></li>
          <li><a href="#切换默认shell" id="markdown-toc-切换默认shell">切换默认shell</a></li>
          <li><a href="#添加插件教程" id="markdown-toc-添加插件教程">添加插件教程</a>            <ul>
              <li><a href="#powerlevel10k" id="markdown-toc-powerlevel10k">powerlevel10k</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#flatpak软件管理工具" id="markdown-toc-flatpak软件管理工具">Flatpak软件管理工具</a>        <ul>
          <li><a href="#flatpak安装" id="markdown-toc-flatpak安装">flatpak安装</a></li>
          <li><a href="#字体问题解决" id="markdown-toc-字体问题解决">字体问题解决</a></li>
          <li><a href="#安装软件" id="markdown-toc-安装软件">安装软件</a></li>
          <li><a href="#运行软件" id="markdown-toc-运行软件">运行软件</a></li>
        </ul>
      </li>
      <li><a href="#appimage" id="markdown-toc-appimage">Appimage</a></li>
      <li><a href="#修改hostname" id="markdown-toc-修改hostname">修改HOSTNAME</a></li>
      <li><a href="#删掉应用配置" id="markdown-toc-删掉应用配置">删掉应用配置</a></li>
    </ul>
  </li>
  <li><a href="#qemu-kvm虚拟机" id="markdown-toc-qemu-kvm虚拟机">QEMU-KVM虚拟机</a>    <ul>
      <li><a href="#安装必备软件" id="markdown-toc-安装必备软件">安装必备软件</a></li>
      <li><a href="#打开kvm硬件加速" id="markdown-toc-打开kvm硬件加速">打开KVM硬件加速</a></li>
      <li><a href="#创建虚拟硬盘文件" id="markdown-toc-创建虚拟硬盘文件">创建虚拟硬盘文件</a></li>
      <li><a href="#准备-ovmfuefi-固件文件" id="markdown-toc-准备-ovmfuefi-固件文件">准备 OVMF（UEFI 固件）文件</a></li>
      <li><a href="#启动虚拟机" id="markdown-toc-启动虚拟机">启动虚拟机</a></li>
      <li><a href="#安装系统" id="markdown-toc-安装系统">安装系统</a></li>
      <li><a href="#其他操作" id="markdown-toc-其他操作">其他操作</a>        <ul>
          <li><a href="#显卡直通谨慎不懂不要乱搞" id="markdown-toc-显卡直通谨慎不懂不要乱搞">显卡直通(谨慎,不懂不要乱搞)</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#拓展功能" id="markdown-toc-拓展功能">拓展功能</a>    <ul>
      <li><a href="#wine" id="markdown-toc-wine">Wine</a></li>
      <li><a href="#android" id="markdown-toc-android">Android</a>        <ul>
          <li><a href="#i卡a卡" id="markdown-toc-i卡a卡">I卡、A卡</a></li>
          <li><a href="#n卡so-nvidia-fxxk-u" id="markdown-toc-n卡so-nvidia-fxxk-u">N卡(So Nvidia Fxxk U!)</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#其他操作-1" id="markdown-toc-其他操作-1">其他操作</a>    <ul>
      <li><a href="#工控机如何连wifi" id="markdown-toc-工控机如何连wifi">工控机如何连wifi</a></li>
      <li><a href="#ssh远程开发" id="markdown-toc-ssh远程开发">SSH远程开发</a>        <ul>
          <li><a href="#环境准备-1" id="markdown-toc-环境准备-1">环境准备</a></li>
          <li><a href="#环境搭建" id="markdown-toc-环境搭建">环境搭建</a></li>
        </ul>
      </li>
      <li><a href="#usb端口设置" id="markdown-toc-usb端口设置">USB端口设置</a>        <ul>
          <li><a href="#根据usb设备绑定端口多个不同设备" id="markdown-toc-根据usb设备绑定端口多个不同设备">根据USB设备绑定端口(多个不同设备)</a></li>
          <li><a href="#根据主机硬件绑定端口多个相同设备" id="markdown-toc-根据主机硬件绑定端口多个相同设备">根据主机硬件绑定端口（多个相同设备)</a></li>
          <li><a href="#根据其他属性绑定端口" id="markdown-toc-根据其他属性绑定端口">根据其他属性绑定端口</a></li>
          <li><a href="#其他注意事项" id="markdown-toc-其他注意事项">其他注意事项</a></li>
        </ul>
      </li>
      <li><a href="#linux分区gui工具" id="markdown-toc-linux分区gui工具">Linux分区Gui工具</a></li>
    </ul>
  </li>
</ul>

<p>暂时无法在飞书文档外展示此内容</p>

<h1 id="发行版推荐">发行版推荐</h1>

<p>根据需求选发行版。</p>

<p>要跑ROS1就装Ubuntu20.04(推荐)</p>

<p>要跑ROS2就装Ubuntu22.04(推荐)或者24.04</p>

<p>想折腾个人推荐Fedora，可以用docker跑ROS1和ROS2(不推荐初学者)</p>

<p>本教程将涵盖Debian系和红帽系两大派系的配置。</p>

<p>Debian系本教程大部分都用Ubuntu当例子。</p>

<p>红帽系本教程大部分都用Fedora当例子。</p>

<h1 id="linux装机教程">Linux装机教程</h1>

<h2 id="实体机双系统最推荐">实体机（双系统，最推荐）</h2>

<h3 id="环境准备">环境准备</h3>

<ol>
  <li>
    <p>至少留出160GB的硬盘空间（可以和Windows是同一块硬盘，也可以是单独的一块硬盘）</p>
  </li>
  <li>
    <p>一个里面没存东西的大于8GB的U盘（也可以没有）</p>
  </li>
  <li>
    <p>一个聪慧的大脑</p>
  </li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image1.webp" alt="" /></p>

<h3 id="关闭安全启动secure-boot">关闭安全启动Secure Boot</h3>

<p>如果下面没有，可以自行B站搜自己品牌的电脑如何关闭安全启动</p>

<h4 id="联想拯救者">联想拯救者</h4>

<h4 id="戴尔游匣intel版">戴尔游匣Intel版</h4>

<p>关机，然后在点开机的一瞬间，一直点摁F12（反复狂摁），直到进入一个白色的BIOS界面。</p>

<p>进入<code class="language-plaintext highlighter-rouge">BIOS SETUP</code>，找到<code class="language-plaintext highlighter-rouge">Boot Configuration</code>，然后往下滑，找到<code class="language-plaintext highlighter-rouge">Enable Secure Boot</code>这个选项，给他关闭就行了。</p>

<p>然后再点下面的<code class="language-plaintext highlighter-rouge">Apply Changes</code>按钮，再点右下角<code class="language-plaintext highlighter-rouge">EXIT</code>按钮重启即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image2.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image3.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image4.webp" alt="" /></p>

<h4 id="惠普暗影精灵">惠普暗影精灵</h4>

<h4 id="华硕天选">华硕天选</h4>

<p>开机狂按F2进入BIOS模式,右下角找到高级模式打开</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image5.webp" alt="" /></p>

<p>关闭安全模式</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image6.webp" alt="" /></p>

<h3 id="开启核显">开启核显</h3>

<p>安装Linux的时候建议开着核显防止Linux图形显示出现问题。</p>

<p>可以通过打开任务管理器来看自己是否开着核显。（轻薄本不用管，轻薄本肯定开着核显的）</p>

<p>①像你如果是Intel的CPU，那么这里GPU0或者GPU1会显示intel xxxxxx。这样是正确的。</p>

<p>②如果你是AMD的CPU，那么这里GPU0或者GPU1会显示amd xxxxxx。这样是正确的。</p>

<p>③如果你发现，你的GPU0是NVIDIA开头的，而且没有GPU1，那么说明你关闭了核显，请按照下面的操作来关闭独显直连开启核显。（如果你是AMD独显，无所谓，开不开独显直连都一样，就不用管了，但是大部分人都不可能是AMD的独显，所以基本排除这一项了）</p>

<p>对于很多游戏本，支持独显直连，所以可能已经默认关闭了核显，只允许了独显运行，所以此时你需要关闭独显直连，开启核显（独显直连对于打游戏提升很大）</p>

<p>如果你确定你确实已经开启了独显直连，请看下方不同电脑品牌的解决方案。</p>

<p>如果下方没有，可以自行去B站搜自己品牌电脑如何切换到混合输出模式。</p>

<h4 id="联想拯救者-1">联想拯救者</h4>

<p>进入联想电脑管家或者Lenovo Ventage，把图形输出模式切换为混合输出即可，</p>

<p>然后重启查看任务管理器确认是否核显已经被打开了。</p>

<h4 id="戴尔游匣intel版-1">戴尔游匣Intel版</h4>

<p>关机，然后在点开机的一瞬间，一直点摁F12（反复狂摁），直到进入一个白色的BIOS界面。</p>

<p>进入BIOS设置，找到<code class="language-plaintext highlighter-rouge">Display</code>，然后往下滑，找到<code class="language-plaintext highlighter-rouge">Enable Hybird Graphic</code>这个选项这个选项，给他打开就行了。然后点<code class="language-plaintext highlighter-rouge">Apply Changes</code>，再退出<code class="language-plaintext highlighter-rouge">EXIT</code>。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image7.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image8.webp" alt="" /></p>

<p>再重启后，打开任务管理器确认核显是否已经被打开了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image9.webp" alt="" /></p>

<h4 id="戴尔游匣amd版">戴尔游匣AMD版</h4>

<h4 id="惠普暗影精灵-1">惠普暗影精灵</h4>

<h4 id="华硕天选-1">华硕天选</h4>

<p>进入BIOS的高级设置模式</p>

<p>高级-显示模式-Dynamic</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image10.webp" alt="" /></p>

<p>保存退出</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image11.webp" alt="" /></p>

<h3 id="安装adk">安装ADK</h3>

<p>https://learn.microsoft.com/zh-cn/windows-hardware/get-started/adk-install</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image12.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image13.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image14.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image15.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image16.webp" alt="" /></p>

<p>下载之前可以关掉梯子，这样可能走的是国内的网，可能会加速下载。（如果你的节点够快，可能走外网下载更快）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image17.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image18.webp" alt="" /></p>

<p>同样下载下面这个</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image19.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image20.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image21.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image22.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image23.webp" alt="" /></p>

<p>这样就安装结束了，可以重新打开傲梅。</p>

<h3 id="下载diskgenius">下载DiskGenius</h3>

<p>在Windows系统上打开百度搜索DiskGenius并下载。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image24.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image25.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image26.webp" alt="" /></p>

<p>找一个纯英文目录创建一个DiskGenius文件夹，建议在任意一个磁盘分区里的Program Files文件夹下新建DiskGenius文件夹。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image27.webp" alt="" /></p>

<p>将刚才压缩包里的所有文件解压到这个DiskGenius文件夹中。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image28.webp" alt="" /></p>

<p>右键拖住它，拖到桌面再放手。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image29.webp" alt="" /></p>

<p>点在这里创建快捷方式。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image30.webp" alt="" /></p>

<p>打开这个快捷方式</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image31.webp" alt="" /></p>

<p>这样就安装成功了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image32.webp" alt="" /></p>

<h3 id="下载傲梅分区助手">下载傲梅分区助手</h3>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image33.webp" alt="" /></p>

<p>https://www.disktool.cn/</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image34.webp" alt="" /></p>

<p>下载完解压到一个地方（可以是桌面），双击打开。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image35.webp" alt="" /></p>

<p>如果想安装到C盘，直接点立即安装即可。</p>

<p>如果想安装到D盘，则将默认路径前面的C改成D就行了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image36.webp" alt="" /></p>

<p>随后安装完毕就可以打开软件了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image37.webp" alt="" /></p>

<p>把那个安装包.exe删掉就行了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image38.webp" alt="" /></p>

<h3 id="下载ventoy">下载Ventoy</h3>

<p>https://www.ventoy.net/cn/</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image39.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image40.webp" alt="" /></p>

<p>如果进不去下面的界面，请你确保你的网络环境（使用能够绕过GFW的东西，懂得都懂）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image41.webp" alt="" /></p>

<p>找一个纯英文目录创建一个Ventoy文件夹，建议在任意一个磁盘分区里的Program Files文件夹下新建Ventoy文件夹。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image42.webp" alt="" /></p>

<p>把刚才下载的压缩包里的东西解压到这里。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image43.webp" alt="" /></p>

<p>右键拖住它，拖到桌面再放手。再点击创建快捷方式。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image44.webp" alt="" /></p>

<p>双击快捷方式打开。这样就是安装完毕了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image45.webp" alt="" /></p>

<h3 id="下载镜像">下载镜像</h3>

<p>百度搜索 bfsu mirror</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image46.webp" alt="" /></p>

<h4 id="x86_64amd64">X86_64(amd64)</h4>

<ol>
  <li>Ubuntu KDE 22.04（Kubuntu）更推荐</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image47.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image48.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image49.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image50.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image51.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image52.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image53.webp" alt="" /></p>

<ol>
  <li>Ubuntu Gnome 22.04</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image54.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image55.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image56.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image57.webp" alt="" /></p>

<ol>
  <li>Fedora KDE</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image58.webp" alt="" /></p>

<p>依次点击下方的文件夹，那个42是版本号，选最新版即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image59.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image60.webp" alt="" /></p>

<h3 id="硬盘分区安装方案">硬盘分区安装方案</h3>

<p>重点看红字。其他内容你不需要管。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">场景分类</th>
      <th style="text-align: left">场景</th>
      <th style="text-align: left">硬盘分配情况</th>
      <th style="text-align: left">EFI 分区来源</th>
      <th style="text-align: left">Linux 分区方案</th>
      <th style="text-align: left">注意事项</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">同硬盘分区</td>
      <td style="text-align: left">① 同一块硬盘，Win 已安装在硬盘前面</td>
      <td style="text-align: left">硬盘1：前半部分是Win的C盘，D盘等，在末尾新建分区给 Linux</td>
      <td style="text-align: left">复用 Windows 已有 EFI 分区（通常 100–300MB，FAT32，/boot/efi 挂载）</td>
      <td style="text-align: left">新建 /（ext4）+ swap（可选）</td>
      <td style="text-align: left">安装 Linux 引导时要选现有 EFI 分区，避免覆盖 Windows 引导文件。</td>
    </tr>
    <tr>
      <td style="text-align: left">异硬盘混合分区</td>
      <td style="text-align: left">② 两块硬盘，第二块硬盘末尾装 Linux，前面存放 Windows 数据，比如E盘</td>
      <td style="text-align: left">硬盘1：Windows 系统+EFI；硬盘2：前面是Win的数据区，末尾分给 Linux</td>
      <td style="text-align: left">复用 硬盘1 的 EFI 分区</td>
      <td style="text-align: left">硬盘2 新建 / + swap</td>
      <td style="text-align: left">引导还是写入硬盘1 的 EFI；安装时要特别小心不要把 EFI 装到硬盘2。</td>
    </tr>
    <tr>
      <td style="text-align: left">异硬盘独立分区</td>
      <td style="text-align: left">③ 两块硬盘，第二块硬盘全空</td>
      <td style="text-align: left">硬盘1：Windows 系统+EFI；硬盘2：完全给 Linux</td>
      <td style="text-align: left">复用 硬盘1 的 EFI 分区（推荐）或者在硬盘2 新建一个 EFI 分区（双 EFI 并存适合老鸟）</td>
      <td style="text-align: left">硬盘2 新建 / + swap</td>
      <td style="text-align: left">如果新建 EFI，需在 BIOS/UEFI 中手动调整启动顺序；更灵活，但稍复杂。</td>
    </tr>
  </tbody>
</table>

<p>你需要确认你属于哪种情况，下方教程我将以场景一为例子，其他情况也类似。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre>───────────────────────────────────────────────────
场景1：同硬盘分区（单硬盘）  
磁盘布局：  
<span class="o">[</span>EFI<span class="o">(</span>共享<span class="o">)]</span> <span class="o">[</span>Win C:] <span class="o">[</span>空闲区域] <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        │      │               │             │  
        └──────┴───────────────┴─────────────┘  
        ↑ 所有系统共用此EFI分区（挂载至/boot/efi）
───────────────────────────────────────────────────
场景2：异硬盘混合分区（双硬盘）  
硬盘1: <span class="o">[</span>EFI<span class="o">(</span>共享<span class="o">)]</span> <span class="o">[</span>Win C:] <span class="o">[</span>D: Win存储区]  
        │  
硬盘2: <span class="o">[</span>E: Win存储区 <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        ↑  
        └─ Linux安装时挂载硬盘1的EFI至/boot/efi
───────────────────────────────────────────────────
场景3：异硬盘独立分区（双硬盘）  
硬盘1: <span class="o">[</span>EFI_Win] <span class="o">[</span>Win C:]  
        │  
硬盘2: <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        │          │  
        └──────────┘  
        ↑ 非独立EFI分区（Linux安装时挂载硬盘1的EFI至/boot/efi）
───────────────────────────────────────────────────
场景3：异硬盘独立分区（双硬盘）  
硬盘1: <span class="o">[</span>EFI_Win] <span class="o">[</span>Win C:]  
        │  
硬盘2: <span class="o">[</span>EFI_Linux] <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        │          │  
        └──────────┘  
        ↑ 独立EFI分区（需手动配置UEFI启动顺序，适合老鸟）
───────────────────────────────────────────────────
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="创建安装介质">创建安装介质</h3>

<h4 id="方法一u盘法">方法一：U盘法</h4>

<p><strong>（如果没有U盘请看本地法）</strong></p>

<p>待肝，几乎和本地法差不太多。</p>

<h5 id="创建ventoy-u盘">创建Ventoy U盘</h5>

<p>把一个大于8GB的U盘插入电脑，然后打开ventoy，选择好U盘，点击安装即可。（注意，此过程可能会格式化U盘，请把数据先备份，等安装完Ventoy后再把数据移动回来即可。）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image61.webp" alt="" /></p>

<h5 id="安装微pe并下载winpe的镜像">安装微PE并下载WinPE的镜像</h5>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image62.webp" alt="" /></p>

<p>https://www.wepe.com.cn/</p>

<p>点击下载2.3版本</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image63.webp" alt="" /></p>

<p>有钱可以捐赠，没钱可以先不捐赠，假装自己捐赠了也行点击已捐赠。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image64.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image65.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image66.webp" alt="" /></p>

<p>下载完把下载的exe复制到你想存放软件的盘（比如C盘）里的Program Files下，新建一个WePE文件夹存放。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image67.webp" alt="" /></p>

<p>双击打开exe文件</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image68.webp" alt="" /></p>

<p>选择输出位置</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image69.webp" alt="" /></p>

<p>选择桌面并保存</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image70.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image71.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image72.webp" alt="" /></p>

<p>然后去桌面，把刚才生成的镜像复制到U盘里，不要放在U盘的某个文件夹，直接放在U盘里就行。</p>

<p>比如我的U盘是H盘。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image73.webp" alt="" /></p>

<h5 id="复制linux镜像iso">复制Linux镜像iso</h5>

<p>再把你上面下载好的Linux安装镜像也复制到U盘里。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image74.webp" alt="" /></p>

<h5 id="设置启动项ventoy">设置启动项Ventoy</h5>

<p>把U盘插在电脑上，重启电脑，然后打开DiskGenius.</p>

<p>点击导航栏上的<code class="language-plaintext highlighter-rouge">工具</code>选项，然后再点<code class="language-plaintext highlighter-rouge">设置UEFI BIOS启动项</code>。</p>

<p>找到U盘，比如我的U盘是爱国者aigo的，所以应该选aigo。</p>

<p>然后点下次从该启动项启动，重启就可以了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image75.webp" alt="" /></p>

<p>进入这个界面说明成功了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image76.webp" alt="" /></p>

<h5 id="在ventoy里启动linux安装介质镜像">在Ventoy里启动Linux安装介质镜像</h5>

<p>找到你想装的linux的镜像，比如kubuntu22.04,回车进入</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image77.webp" alt="" /></p>

<p>再点回车即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image78.webp" alt="" /></p>

<p>进入下面这个界面就说明成功了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image79.webp" alt="" /></p>

<h4 id="方法二本地法">方法二：本地法</h4>

<h5 id="本地法创建">本地法创建</h5>

<p>本方法是在本地开创一个存放安装介质（安装文件）的分区，为该分区设置上引导，从而安装Linux系统。</p>

<p><strong>这里分的区不是放置Linux的分区。放置的是安装Linux的文件。（类似安装包）</strong></p>

<ol>
  <li>查看自己想要放安装介质（也就是安装文件，大概8GB，建议在C盘）还剩多少空间。比如我是还有231GB.</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image80.webp" alt="" /></p>

<ol>
  <li>然后打开傲梅分区助手，选中你想要放置8GB安装介质的磁盘分区（比如我选的是C盘），然后点击右边的调整/移动分区。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image81.webp" alt="" /></p>

<ol>
  <li>点击分区大小右边的按钮</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image82.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image83.webp" alt="" /></p>

<ol>
  <li>计算<code class="language-plaintext highlighter-rouge">分区后的未分配空间</code></li>
</ol>

<p>①如果你不打算在这个磁盘分区（比如我这里是C盘）里安装Linux（也就是<code class="language-plaintext highlighter-rouge">硬盘分区安装方案的场景</code>②和3️⃣），</p>

<p>那么只需要在下图中的<code class="language-plaintext highlighter-rouge">分区大小</code>中减掉8GB，让<code class="language-plaintext highlighter-rouge">分区后的未分配空间</code>变为8GB即可。</p>

<p>（如果你打算在这个磁盘的分区安装Linux，也就是<code class="language-plaintext highlighter-rouge">硬盘分区安装方案的场景①</code>，那么往下看，用②的法）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image84.webp" alt="" /></p>

<p>②如果你打算在这个磁盘分区中安装Linux，那么需要计算一下到底要压缩多少空间。</p>

<p><code class="language-plaintext highlighter-rouge">分区后的未分配的空间=8GB+打算给Linux的空间大小。</code></p>

<p>比如我剩余的磁盘分区空间为231GB，打算给Linux分配100GB（这里我只是举例子，实际上给Linux的空间不要这么小，至少160GB吧），那么我需要的<code class="language-plaintext highlighter-rouge">分区后的未分配的空间</code>=8GB+100GB=108GB。那么就需要在<code class="language-plaintext highlighter-rouge">分区大小</code>上减去108GB，让<code class="language-plaintext highlighter-rouge">分区后的未分配的空间</code>=108GB.</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image85.webp" alt="" /></p>

<ol>
  <li>然后点击确定进行分区，接着在主界面左上角点提交。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image86.webp" alt="" /></p>

<ol>
  <li>接着点执行。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image87.webp" alt="" /></p>

<ol>
  <li>
    <p>因为我修改的是C盘，所以需要进入WinPE里进行操作， <strong>如果你不是在C盘操作的，可能不用做这一步</strong> 。（如果你不能选择Windows PE这个按钮，请去上方教程看看ADK是否安装成功了？）</p>

    <p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image88.webp" alt="" /></p>
  </li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image89.webp" alt="" /></p>

<p>等待创建PE结束</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image90.webp" alt="" /></p>

<p>他会自动进入PE进行分区操作。</p>

<p>勾上自动修复分区中的错误和勾上完成操作后自动关机，等待进度条结束即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image91.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image92.webp" alt="" /></p>

<ol>
  <li>然后开机就可以看到我压缩的磁盘分区变小了，我的是C盘，如下图。可以看到C盘后面多了一块未分配的空间。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image93.webp" alt="" /></p>

<ol>
  <li>点击这块未分配的空间，然后点击分区</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image94.webp" alt="" /></p>

<ol>
  <li>给他分一个FAT32格式的8GB大小的磁盘分区。（记住盘符是多少，比如我的是D盘）</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image95.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image96.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image97.webp" alt="" /></p>

<ol>
  <li>然后找到你下载的Linux安装介质.iso，双击打开。（或者右键点<code class="language-plaintext highlighter-rouge">装载mount</code>）</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image98.webp" alt="" /></p>

<ol>
  <li>然后去此电脑里找到这个被加载的镜像，点进去。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image99.webp" alt="" /></p>

<ol>
  <li>再打开FAT32格式的这个磁盘分区。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image100.webp" alt="" /></p>

<ol>
  <li>将镜像里的所有内容全部复制到FAT32的磁盘分区中。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image101.webp" alt="" /></p>

<ol>
  <li>右键镜像<code class="language-plaintext highlighter-rouge">弹出Eject</code>虚拟镜像。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image102.webp" alt="" /></p>

<ol>
  <li>然后打开DiskGenius，点击导航栏上的<code class="language-plaintext highlighter-rouge">工具</code>选项，然后再点<code class="language-plaintext highlighter-rouge">设置UEFI BIOS启动项</code>。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image103.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image104.webp" alt="" /></p>

<ol>
  <li>点击添加启动项，文件路径选择刚才Fat32分区（比如我的是D盘）。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image105.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image106.webp" alt="" /></p>

<ol>
  <li>依次找到/EFI/boot/bootx64.efi</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image107.webp" alt="" /></p>

<ol>
  <li>可以命名为Linux Install，点击保存，并选择下一次重启以这个引导当首选项。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image108.webp" alt="" /></p>

<ol>
  <li>重启，可以看到下方已经进入了Linux安装界面。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image109.webp" alt="" /></p>

<p>重启后是这个样子，说明进入安装界面了。（对于硬盘分区安装方案的场景①的此时已经可以开始安装了，对于还没给Linux预留安装空间的请按电源按键关机并重启回Windows）</p>

<p>如果你安装失败了，你还想进这个安装界面，则在DiskGenius里像上面那样在BIOS UEFI设置里选中引导，勾上<code class="language-plaintext highlighter-rouge">下一次从该项启动</code>，然后重启即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image110.webp" alt="" /></p>

<h5 id="删除本地安装介质安装完后再删">删除本地安装介质(安装完后再删）</h5>

<p>当你使用本地法安装Linux的话，你完成Linux的安装需要删除掉开辟的这8GB的FAT32的空间。</p>

<p>打开傲梅分区助手。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image111.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image112.webp" alt="" /></p>

<p>然后再找到C盘，点调整分区。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image113.webp" alt="" /></p>

<p>然后把剩下的空闲空间全部还给C盘。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image114.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image115.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image116.webp" alt="" /></p>

<h3 id="linux安装空间的预留">Linux安装空间的预留</h3>

<h4 id="硬盘分区安装方案的场景">硬盘分区安装方案的场景①</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>───────────────────────────────────────────────────
场景1：同硬盘分区（单硬盘）  
磁盘布局：  
<span class="o">[</span>EFI<span class="o">(</span>共享<span class="o">)]</span> <span class="o">[</span>Win C:] <span class="o">[</span>空闲区域] <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        │      │               │             │  
        └──────┴───────────────┴─────────────┘  
        ↑ 所有系统共用此EFI分区（挂载至/boot/efi）
───────────────────────────────────────────────────
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果你是本地法+场景一，则已经创建过这个地方了，（如下图）跳过本节。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image117.webp" alt="" /></p>

<p>但如果你是U盘法，则接着往下看。</p>

<p>场景一是和Windows装在一个硬盘里。</p>

<ol>
  <li>打开傲梅分区助手。找到你想安装Linux的Windows的硬盘。点移动分区。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image118.webp" alt="" /></p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">分区后的未分配空间</code>就是你要安装Linux的空间。设置分区大小，或者拖动下面的图形按钮都可以更改分区大小。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image119.webp" alt="" /></p>

<ol>
  <li>然后点击确定进行分区，接着在主界面左上角点提交。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image120.webp" alt="" /></p>

<ol>
  <li>接着点执行。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image121.webp" alt="" /></p>

<ol>
  <li>因为我修改的是C盘，所以需要进入WinPE里进行操作， <strong>如果你不是在C盘操作的，可能不用做这一步</strong> 。（如果你不能选择Windows PE这个按钮，请去上方教程看看ADK是否安装成功了？）</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image122.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image123.webp" alt="" /></p>

<p>等待创建PE结束</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image124.webp" alt="" /></p>

<p>他会自动进入PE进行分区操作。</p>

<p>勾上自动修复分区中的错误和勾上完成操作后自动关机，等待进度条结束即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image125.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image126.webp" alt="" /></p>

<ol>
  <li>然后开机就可以看到我压缩的磁盘分区变小了，我的是C盘，如下图。可以看到C盘后面多了一块未分配的空间。</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image127.webp" alt="" /></p>

<h4 id="硬盘分区安装方案的场景-1">硬盘分区安装方案的场景②</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>───────────────────────────────────────────────────
场景2：异硬盘混合分区（双硬盘）  
硬盘1: <span class="o">[</span>EFI<span class="o">(</span>共享<span class="o">)]</span> <span class="o">[</span>Win C:] <span class="o">[</span>D: Win存储区]  
        │  
硬盘2: <span class="o">[</span>E: Win存储区 <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        ↑  
        └─ Linux安装时挂载硬盘1的EFI至/boot/efi
───────────────────────────────────────────────────
</pre></td></tr></tbody></table></code></pre></div></div>

<p>像场景一一样，把你第二个硬盘里的后半部分像场景一一样给压缩取消掉挂载就行。</p>

<h4 id="硬盘分区安装方案的场景3️⃣">硬盘分区安装方案的场景3️⃣</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>───────────────────────────────────────────────────
场景3：异硬盘独立分区（双硬盘）  
硬盘1: <span class="o">[</span>EFI_Win] <span class="o">[</span>Win C:]  
        │  
硬盘2: <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        │          │  
        └──────────┘  
        ↑ 非独立EFI分区（Linux安装时挂载硬盘1的EFI至/boot/efi）
───────────────────────────────────────────────────
场景3：异硬盘独立分区（双硬盘）  
硬盘1: <span class="o">[</span>EFI_Win] <span class="o">[</span>Win C:]  
        │  
硬盘2: <span class="o">[</span>EFI_Linux] <span class="o">[</span>Linux Swap] <span class="o">[</span>Linux /]  
        │          │  
        └──────────┘  
        ↑ 独立EFI分区（需手动配置UEFI启动顺序，适合老鸟）
───────────────────────────────────────────────────
</pre></td></tr></tbody></table></code></pre></div></div>

<p>直接把整个第二个硬盘所有分区全部删除，格式化即可。</p>

<h3 id="安装linux">安装Linux</h3>

<p>以Kubuntu 22.04（Ubuntu KDE 22.04）为例子，其他发行版差不多其实也。</p>

<h4 id="grub设置">grub设置</h4>

<p>在下面这个界面按E。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image128.webp" alt="" /></p>

<p>在这一行后面加上 <code class="language-plaintext highlighter-rouge">noauto toram</code></p>

<p>这个<code class="language-plaintext highlighter-rouge">noauto</code>是必须要写的。那个<code class="language-plaintext highlighter-rouge">toram</code>如果你电脑内存大于等于16GB（小于8GB谨慎，可能会崩溃），则可以填，这样安装速度会提升200+%，甚至300+%，甚至无上限。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image129.webp" alt="" /></p>

<p>然后按crtl+X启动系统。</p>

<h4 id="基础安装选项">基础安装选项</h4>

<p>这里语言一定选择English比较好。（这样/home分区底下所有文件夹都是英文，不会出现中文。）</p>

<p>然后选Install Kubuntu.</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image130.webp" alt="" /></p>

<p>点continue</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image131.webp" alt="" /></p>

<p>连接网络，先点connect to this network,然后找到wifi名，输入上密码，点右边的connect,出现connected后，点continue.</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image132.webp" alt="" /></p>

<p>这里和我选的一样即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image133.webp" alt="" /></p>

<h4 id="分区设置重要">分区设置（重要！！！）</h4>

<h5 id="与windows使用同一个efi分区">与Windows使用同一个EFI分区</h5>

<h6 id="初步设置">初步设置</h6>

<p>这里选Manual,咱们手动分区。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image134.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image135.webp" alt="" /></p>

<p>找到咱们之前预留给Linux的那块磁盘区域，比如我的是预留了100GB的那块区域，大概Size是107452MB，一定别找错磁盘区域了。如果你这里不是<code class="language-plaintext highlighter-rouge">free space</code>，那么左键选中，点<code class="language-plaintext highlighter-rouge">delete</code>.</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image136.webp" alt="" /></p>

<h6 id="swap分区建立">swap分区建立</h6>

<p>选中这块区域，双击或者点击Add按钮。</p>

<p>use as选<code class="language-plaintext highlighter-rouge">swap area.</code></p>

<p>给swap区域分区，这个Size请填写你的<code class="language-plaintext highlighter-rouge">内存大小（运存大小）+2GB</code><em><code class="language-plaintext highlighter-rouge">（单位MB）</code></em>，比如我电脑内存为32GB，那么32+2=34GB，再用<code class="language-plaintext highlighter-rouge">34*1024=34816MB，</code>所以填<code class="language-plaintext highlighter-rouge">34816</code>.</p>

<p>tips（可以不看）：为何要这么做是为了开启Linux的休眠功能，如果你的swap分区大小设置有误，Linux休眠功能可能会出问题。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image137.webp" alt="" /></p>

<h6 id="根目录分区建立">根目录/分区建立</h6>

<p>再选中剩余的这块区域，双击或者点击Add按钮。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image138.webp" alt="" /></p>

<p>use as选 ext4</p>

<p>然后挂载点选<code class="language-plaintext highlighter-rouge">/</code>（也就是根目录）</p>

<p>Size使用默认的就行（默认就是把剩下的最大容量全给<code class="language-plaintext highlighter-rouge">根目录</code>）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image139.webp" alt="" /></p>

<h6 id="取消挂载其他无关分区">取消挂载其他无关分区</h6>

<p>如下图，swap和/已经被创建成功了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image140.webp" alt="" /></p>

<p>把上图除了<strong>efi和刚才创建的那俩分区</strong> 的其他分区全部点change更改为do not use the partition.</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image141.webp" alt="" /></p>

<h6 id="设置uefi引导位置">设置UEFI引导位置</h6>

<p>把最下方那个<code class="language-plaintext highlighter-rouge">bootloader</code>设置为<code class="language-plaintext highlighter-rouge">efi</code>分区的磁盘号。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image142.webp" alt="" /></p>

<p>点击右下角Install Now，看看是不是下面只显示修改了swap和ext4俩分区，如果有其他的，说明有无关分区没被取消挂载。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image143.webp" alt="" /></p>

<h5 id="独立的efi分区不推荐">独立的EFI分区（不推荐）</h5>

<p>这种适用于你有一个空的硬盘（不是空的磁盘分区，是一整个硬盘全是空的），然后整个硬盘全分给Linux。（当然这种情况也适用于上面那个和Windows共用一个EFI分区的方法）</p>

<p>适合老鸟。</p>

<p>优点是崩了直接格掉整个硬盘，很干净。</p>

<h6 id="初步设置-1">初步设置</h6>

<p>这里选Manual,咱们手动分区。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image144.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image145.webp" alt="" /></p>

<p>找到咱们预留的空硬盘。（整个硬盘全空，我单独找了个空的128GB的硬盘来写教程，如下图的nvme0n1）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image146.webp" alt="" /></p>

<h6 id="efi分区建立比前面的那种方法多一个efi分区">EFI分区建立（比前面的那种方法多一个EFI分区）</h6>

<p>双击你的硬盘底下的free space,</p>

<p>然后size设置为1024,use as设置为EFI分区。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image147.webp" alt="" /></p>

<h6 id="swap分区建立-1">swap分区建立</h6>

<p>紧接着再点free space。</p>

<p>选中这块区域，双击或者点击Add按钮。</p>

<p>use as选<code class="language-plaintext highlighter-rouge">swap area.</code></p>

<p>给swap区域分区，这个Size请填写你的<code class="language-plaintext highlighter-rouge">内存大小（运存大小）+2GB</code><em><code class="language-plaintext highlighter-rouge">（单位MB）</code></em>，比如我电脑内存为32GB，那么32+2=34GB，再用<code class="language-plaintext highlighter-rouge">34*1024=34816MB，</code>所以填<code class="language-plaintext highlighter-rouge">34816</code>.</p>

<p>tips（可以不看）：为何要这么做是为了开启Linux的休眠功能，如果你的swap分区大小设置有误，Linux休眠功能可能会出问题。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image148.webp" alt="" /></p>

<h6 id="根目录分区建立-1">根目录/分区建立</h6>

<p>再选中剩余的这块区域，双击或者点击Add按钮。</p>

<p>use as选 ext4</p>

<p>然后挂载点选<code class="language-plaintext highlighter-rouge">/</code>（也就是根目录）</p>

<p>Size使用默认的就行（默认就是把剩下的最大容量全给<code class="language-plaintext highlighter-rouge">根目录</code>）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image149.webp" alt="" /></p>

<h6 id="取消挂载其他无关分区-1">取消挂载其他无关分区</h6>

<p>把上图除了刚才创建的<strong>efi，swap,根目录/</strong> 的其他分区全部点change更改为do not use the partition.</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image150.webp" alt="" /></p>

<h6 id="设置uefi引导位置-1">设置UEFI引导位置</h6>

<p>把最下方那个<code class="language-plaintext highlighter-rouge">bootloader</code>设置为<code class="language-plaintext highlighter-rouge">efi</code>分区的磁盘号。比如我这里是nvme0n1p1。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image151.webp" alt="" /></p>

<p>点击右下角Install Now，看看是不是下面只显示修改了efi,swap和ext4仨分区，如果有其他的，说明有无关分区没被取消挂载。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image152.webp" alt="" /></p>

<h4 id="最后设置">最后设置</h4>

<p>时区选个东八区的就行。默认应该是中国上海🇨🇳时间，也可以选中国香港🇭🇰，中国台湾🇨🇳时间都可以。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image153.webp" alt="" /></p>

<p>用户名设置为英文开头的就行，我这里是tungchiahui</p>

<p>密码选个简单点的，纯数字的，因为以后要经常输入，所以尽可能简单点。</p>

<p>电脑名字随便起，英文开头就行。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image154.webp" alt="" /></p>

<p>等着就行了，与网速，电脑性能都有关。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image155.webp" alt="" /></p>

<p>重启。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image156.webp" alt="" /></p>

<p>如果你是U盘法，请拔掉U盘（大部分情况不拔也行，只要你的开机首选项不是U盘），然后点回车重启</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image157.webp" alt="" /></p>

<p>开机啦！</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image158.webp" alt="" /></p>

<h3 id="双系统切换">双系统切换</h3>

<p>在点了开机键进入了grub（黑色的界面）</p>

<p>上面显示Ubuntu选项就是进Linux。</p>

<p>上面显示Windows选项就是进Windows。</p>

<h3 id="彻底删除linux">彻底删除Linux</h3>

<h4 id="分区格式化">分区格式化</h4>

<p>打开diskgenius，找到给Linux分的盘。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image159.webp" alt="" /></p>

<p>挨个选中，点删除分区。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image160.webp" alt="" /></p>

<p>点保存更改。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image161.webp" alt="" /></p>

<h4 id="引导删除">引导删除</h4>

<h5 id="和windows共用efi">和Windows共用EFI</h5>

<p>打开DiskGenius双击Windows的ESP分区。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image162.webp" alt="" /></p>

<p>进入EFI文件夹，找到ubuntu文件夹，右键<code class="language-plaintext highlighter-rouge">强制删除</code></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image163.webp" alt="" /></p>

<p>然后后面不管给你啥警告，一直点删除，和确定删除等字眼。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image164.webp" alt="" /></p>

<p>这样引导就删除完毕了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image165.webp" alt="" /></p>

<h5 id="独立的efi">独立的EFI</h5>

<p>则直接格式化掉整个硬盘即可。</p>

<p>找到自己第二个盘。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image166.webp" alt="" /></p>

<p>右键选中整个硬盘，点<code class="language-plaintext highlighter-rouge">删除所有分区</code>。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image167.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image168.webp" alt="" /></p>

<h2 id="普通虚拟机不推荐">普通虚拟机（不推荐）</h2>

<p>(不用教，自己百度解决)</p>

<h2 id="windows-subsystem-for-linux-2windows的linux子系统2勉强的法子">Windows Subsystem For Linux 2(Windows的Linux子系统2)（勉强的法子）</h2>

<h3 id="简介与优缺点">简介与优缺点</h3>

<ol>
  <li>什么情况下推荐？</li>
</ol>

<p>无多余硬盘，没法实体装Linux。此时最优选择就是WSL2。而非VMware等虚拟机。</p>

<ol>
  <li>
    <p>优缺点：</p>

    <ol>
      <li>
        <p>优点：</p>

        <ol>
          <li>
            <p>WSL2是最好的Linux发行版;(bushi)</p>
          </li>
          <li>
            <p>性能损耗极低。且比在Windows上跑深度性能 <strong>强非常非常多;</strong> （如下图，时间的数值越低证明性能越高）</p>
          </li>
          <li>
            <p>非常方便调用USB设备，可以USB直通;</p>
          </li>
          <li>
            <p>非常方便使用英伟达显卡的CUDA与cuDNN;</p>
          </li>
          <li>
            <p>非常方便Win与WSL2互相传文件等协同操作;</p>
          </li>
          <li>
            <p>WSL2中甚至可以在Linux的终端中使用Windows软件;</p>
          </li>
          <li>
            <p>非常方便使用Windows的VScode远程开发;</p>
          </li>
        </ol>
      </li>
      <li>
        <p>缺点：</p>

        <ol>
          <li>无法调用本机摄像头，或说调用本机摄像头会巨麻烦。（虽无法调用本机摄像头，但是可以使用USB的摄像头）</li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image169.webp" alt="" /></p>

<h3 id="安装教程">安装教程</h3>

<h4 id="启动wsl2子系统和虚拟平台">启动WSL2子系统和虚拟平台</h4>

<ol>
  <li>方法一(图形界面)</li>
</ol>

<p>用Win+R输入<code class="language-plaintext highlighter-rouge">appwiz.cpl</code>：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image170.webp" alt="" /></p>

<p>点击OK进入 <strong>程序和功能/Programs and Features</strong> 界面，点击 <strong>启用或关闭Windows功能/Turn Windows features on or off</strong> ：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image171.webp" alt="" /></p>

<p>选择 <strong>适用于Linux的Windows子系统/Windows Subsystem for Linux</strong> 和 <strong>虚拟机平台/Virtual Machine Platform</strong> 功能：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image172.webp" alt="" /></p>

<ol>
  <li>方法二(命令行)</li>
</ol>

<pre><code class="language-PowerShell">
# 开启 Linux 子系统
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart

# 开启虚拟机平台
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre>

<h4 id="将wsl2设置为默认版本">将WSL2设置为默认版本</h4>

<p>用管理员权限打开powershell</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image173.webp" alt="" /></p>

<p>升级WSL并设置默认版本为WSL2</p>

<pre><code class="language-PowerShell">
# 更新 wsl
wsl --update

# 将 wsl 版本设置为 wsl2
wsl --set-default-version 2
</code></pre>

<h4 id="安装linux发行版">安装Linux发行版</h4>

<ol>
  <li>方式一(商店下载,推荐，网速快，不用翻)</li>
</ol>

<p>直接打开Microsoft Store搜索对应的发行版下载即可(比如Ubuntu 22.04 LTS)</p>

<p>要是跑ROS1建议20.04LTS.</p>

<p>ROS2的话更建议用22.04LTS，对于初学者来说，教程多才是最好的，ROS2 Humble和ROS2 Jazzy在gazebo上区别还是很大的，先学教程多的，以后可以慢慢再转Jazzy。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image174.webp" alt="" /></p>

<ol>
  <li>方式二(命令行安装)</li>
</ol>

<pre><code class="language-PowerShell">
# 列出可安装的 Linux 版本
#（需要科学手段）
wsl --list --online
</code></pre>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image175.webp" alt="" /></p>

<p>选择对应发行版并安装</p>

<pre><code class="language-PowerShell">
# Ubuntu安装完毕后(可以重启)
wsl --install -d Ubuntu-22.04
</code></pre>

<h4 id="查看系统状态">查看系统状态</h4>

<pre><code class="language-PowerShell">
# 查看 wsl
wsl -l

# 查看 wsl 运行版本或模式
wsl -l -v

# 设置发行版为使用 wsl 2 （如果版本为 2 则不需要）
wsl --set-version &lt;distro&gt; 2

# 选择要注销的版本 （如果想卸载再用此命令）
wsl --unregister &lt;distro&gt;
</code></pre>

<p>输出Version为2即正常</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image176.webp" alt="" /></p>

<h4 id="设置用户名与密码">设置用户名与密码</h4>

<p>直接在Powershell里输入wsl命令进入子系统</p>

<pre><code class="language-PowerShell">
# 进入子系统
wsl
</code></pre>

<p>输入用户名(随便设置，建议字母+数字，或者纯字母)</p>

<p>输入密码(建议低于6位的数字，并且在输入密码时，终端上不会显示输入的字符，但是已经正常输入了)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image177.webp" alt="" /></p>

<h4 id="卸载发行版">卸载发行版</h4>

<p>如果出现问题，就卸载wsl2出问题的发行版</p>

<p>第一步在powershell里输入下列命令查询发行版信息。</p>

<p>```Plain Text
wsl -l -v</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
第二步在微软应用商店将Ubuntu卸载。(该步一般可以省略)

第三步要敲下方命令进行注销:

```Plain Text
wsl --unregister 发行版名称
</pre></td></tr></tbody></table></code></pre></div></div>

<p>第四步可以从安装发行版这步重新装。</p>

<h3 id="配置各种环境">配置各种环境</h3>

<h4 id="换源">换源</h4>

<p>(同实体机LINUX，往下找教程)</p>

<h4 id="英伟达显卡">英伟达显卡</h4>

<h5 id="显卡驱动">显卡驱动</h5>

<p>不用安装，只要你的Windows安装了驱动，你的WSL2就已经安装好驱动了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image178.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image179.webp" alt="" /></p>

<h5 id="cuda">CUDA</h5>

<p>https://developer.nvidia.com/cuda/wsl</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image180.webp" alt="" /><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image181.webp" alt="" /></p>

<p>在下方的网站，选择合适的版本。</p>

<p>https://developer.nvidia.com/cuda-toolkit-archive</p>

<p><strong>(同实体机LINUX，往下找教程，唯一与实体机不同的地方如下图)</strong></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image182.webp" alt="" /></p>

<p>挨行敲一遍</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image183.webp" alt="" /></p>

<p>敲完后，输入<code class="language-plaintext highlighter-rouge">nvcc -V</code>检测是否安装成功，如果出现下图，证明没配置环境。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image184.webp" alt="" /></p>

<p>（请详看下方教程的<strong>安装</strong><strong>CUDA</strong><strong>的配置环境来看</strong>如何配置环境）</p>

<h5 id="cudnn">cuDNN</h5>

<p>(同实体机LINUX，往下找教程)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image185.webp" alt="" /></p>

<h4 id="配置网络">配置网络</h4>

<p>WSL2默认是NAT模式，也就是拿Windows当网关，WSL2是Windows的下级设备，这样的话，WSL2和Windows并不处于同一网段，WSL2只能和Windows以及Windows的上游设备进行通信，无法与和Windows同局域网的同网段设备进行通信。想要和同网段的ROS、ROS2设备进行通信，只能要么端口转发，要么设置DDS，都是非常麻烦的。</p>

<p>WSL2还提供了好几种模式，有一个模式叫Mirrored模式 <strong>（Windows 10 22H2及以上才能开启）</strong> ，相当于Docker的<code class="language-plaintext highlighter-rouge">--network host</code>，这种方式是让WSL2和Windows使用相同的IP，这样的话，不论是WSL2还是Windows都可以访问同网段的局域网设备了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image186.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image187.webp" alt="" /></p>

<p>重启WSL2</p>

<pre><code class="language-PowerShell">wsl --shutdown
wsl
</code></pre>

<h4 id="usb直通">USB直通</h4>

<p>https://learn.microsoft.com/zh-cn/windows/wsl/connect-usb</p>

<p>直通的USB设备只供WSL2使用，应该Windows是没法使用的，如果想使用，请解绑（关闭直通）。</p>

<p>首先现在电脑上安装usbipd，下面是github链接，进去点releases。</p>

<p>https://github.com/dorssel/usbipd-win</p>

<p>点击x64.msi下载并安装。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image188.webp" alt="" /></p>

<p>安装完后，然后开启你的WSL2</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image189.webp" alt="" /></p>

<p>右键开始菜单，选择终端（以管理员身份运行）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image190.webp" alt="" /></p>

<p>列出设备</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">usbipd</span> <span class="n">list</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下图这个busid为2-1的就是我的目标。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image191.webp" alt="" /></p>

<p>绑定并链接设备，这个2-1要换成你对应的busid</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">usbipd</span> <span class="n">bind</span> <span class="o">--</span><span class="n">busid</span> <span class="mi">2</span><span class="o">-</span><span class="mi">1</span> <span class="o">--</span><span class="n">force</span>
<span class="n">usbipd</span> <span class="n">attach</span> <span class="o">--</span><span class="n">wsl</span> <span class="o">--</span><span class="n">busid</span> <span class="mi">2</span><span class="o">-</span><span class="mi">1</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image192.webp" alt="" /></p>

<p>然后在wsl中的终端里查看设备。</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">lsusb</span>

<span class="n">ls</span> <span class="o">/</span><span class="n">dev</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image193.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image194.webp" alt="" /></p>

<p>如果你中途插拔了USB，WSL2找不到了的话，请解绑设备。</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">usbipd</span> <span class="n">unbind</span> <span class="o">--</span><span class="n">busid</span> <span class="mi">2</span><span class="o">-</span><span class="mi">1</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后再像上方那样重新绑定即可。</p>

<h4 id="vscode远程开发">VScode远程开发</h4>

<p>(一定要把工程放在Linux中开发，别放在Win磁盘中，否则I/O效率会很低)</p>

<p>安装该插件(WSL2有自己的远程开发插件，无需使用SSH）。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image195.webp" alt="" /></p>

<p>连接WSL2</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image196.webp" alt="" /></p>

<p>远程开发成功。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image197.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image198.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image199.webp" alt="" /></p>

<h4 id="linux终端使用windows软件">Linux终端使用Windows软件</h4>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image200.webp" alt="" /></p>

<h4 id="opengl有问题">OpenGL有问题</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt upgrade
<span class="nb">sudo </span>apt <span class="nb">install </span>mesa-utils

<span class="c">#然后重启wsl2即可</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="安装必备配置">安装必备配置</h1>

<h2 id="软件包换源以debian系的发行版为例">  软件包换源（以Debian系的发行版为例）</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="rouge-code"><pre>  打开下方网站（注意，该Ubuntu仓库版本是X86、amd64的仓库，ARM的仓库并非该网站（99.9%的人的电脑是X86的，很多工控机是ARM的，但工控机也有X86的，请看[Vinci机器人队单片机教程](https://sdutvincirobot.feishu.cn/docx/PRAodvrWvoXTrVxP1EDcMKM7nXb)中讲的了解一下，或者自行百度。）

  下方这几个镜像源选一个即可。

https://mirrors.bfsu.edu.cn/help/ubuntu/

https://mirrors.cloud.tencent.com/help/ubuntu.html

https://developer.aliyun.com/mirror/ubuntu

https://mirrors.sustech.edu.cn/help/ubuntu.html#introduction

https://mirrors.ustc.edu.cn/help/ubuntu.html

https://help.mirrors.cernet.edu.cn/ubuntu/

  可以测速，选择出速度最快的源。

```bash
curl https://mirrors.cernet.edu.cn/oh-my-mirrorz.py | python3
```

  在北方（山东）测速如下：

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image201.webp)

  在南方（广东）测速如下：

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image202.webp)

  在南北都比较快的是`北京外国语大学BFSU`和`南方科技大学SUSTech`，不想测速可以无脑选，也可以测速选择最好的源。
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ubuntu2204及debian10及以下版本">  Ubuntu22.04(及Debian10)及以下版本</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="rouge-code"><pre>  输入以下命令

```bash
sudo apt update
sudo apt install vim
sudo vim /etc/apt/sources.list
```

  在以下界面，用键盘按`ggdG`（注意区分大小写）

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image203.webp)

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image204.webp)

  选择好Ubuntu版本后，

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image205.webp)

  粘贴进去

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image206.webp)

  按一下ESC，然后英文冒号，输入 `:wq!`然后回车

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image207.webp)

  输入以下命令

```bash
sudo apt update
```

  下方出现对应学校源网站则成功

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image208.webp)

  至此换源结束
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ubuntu2404及debian12及以上版本">  Ubuntu24.04(及Debian12)及以上版本</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>```bash
sudo apt update
sudo apt install vim
sudo rm -rf /etc/apt/sources.list
sudo rm -rf /etc/apt/sources.list.d/**

sudo vim /etc/apt/sources.list.d/ubuntu.sources
```
</pre></td></tr></tbody></table></code></pre></div></div>

<p>选择好Ubuntu版本后，复制下方的内容。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image209.webp" alt="" /></p>

<p>粘贴进去</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image210.webp" alt="" /></p>

<p>按一下ESC，然后英文冒号，输入 <code class="language-plaintext highlighter-rouge">:wq!</code>然后回车</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image211.webp" alt="" /></p>

<p>输入以下命令</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这里被替换成对应学校则成功</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image212.webp" alt="" /></p>

<h3 id="fedora41dnf5及之后">Fedora41(DNF5)及之后</h3>

<p>https://mirrors.bfsu.edu.cn/help/fedora/</p>

<p>https://help.mirrors.cernet.edu.cn/fedora/</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s|^metalink=|#metalink=|g'</span> <span class="se">\</span>
    <span class="nt">-e</span> <span class="s1">'s|^#baseurl=http://download.example/pub/fedora/linux|baseurl=https://mirrors.bfsu.edu.cn/fedora|g'</span> <span class="se">\</span>
    <span class="nt">-i</span>.bak <span class="se">\</span>
    /etc/yum.repos.d/fedora.repo <span class="se">\</span>
    /etc/yum.repos.d/fedora-updates.repo
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="卸载恶心的snapubuntu的衍生版">卸载恶心的snap(Ubuntu的衍生版)</h2>

<p><strong>⚠️官方默认原版Ubuntu</strong> <strong>Gnome</strong><strong>不要卸载snap,会g.原版Ubuntu只能继续让snap恶心你，没办法。(现在貌似非原版ubuntu也不允许卸载了，恶心坏了）</strong></p>

<p>所以我一直都推荐Ubuntu KDE（也就是Kubuntu）。</p>

<h3 id="安装非firefox浏览器">安装非firefox浏览器</h3>

<p>卸载snap前，请先安装一个浏览器（以Google Chrome为例）(这里是因为Ubuntu默认安装的是snap版本的FireFox)</p>

<p>以下是Google上海服务器的Chrome官网（无需挂梯）</p>

<p>https://www.google.cn/chrome/index.html</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image213.webp" alt="" /></p>

<p>咱们这里是Ubuntu所以是Debian系的系统，所以选deb扩展名的程序包。（也就是红色框框）</p>

<p>红帽系则需要安装的是rpm扩展名程序包。（也就是蓝色框框）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image214.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#某些发行版中，可能Downloads是中文下载，所以就需要  cd ~/下载</span>
<span class="nb">cd</span> ~/Downloads
<span class="c">#下方chrome安装包名不一定是这个，根据名字来看</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> ./google-chrome-stable_current_amd64.deb
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image215.webp" alt="" /></p>

<h3 id="查看snap包应用数量">查看snap包应用数量</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>
<span class="c"># 老版</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>neofetch
neofetch

<span class="c"># 新版</span>
<span class="nb">sudo </span>add-apt-repository ppa:zhangsongcui3371/fastfetch
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>fastfetch
fastfetch

<span class="c"># windows 想看系统信息的话</span>
winget <span class="nb">install </span>fastfetch
<span class="c">#重启 powershell</span>
fastfetch
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这里显示，一共有3162个debian的程序，7个snap程序</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image216.webp" alt="" /></p>

<h3 id="移除snap应用">移除snap应用</h3>

<p>系统在启动时，会自动启动Snap相关服务，我们先禁用掉这些服务</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl disable snapd.service
<span class="nb">sudo </span>systemctl disable snapd.socket
<span class="nb">sudo </span>systemctl disable snapd.seeded.service
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后查看snap应用列表</p>

<p>根据你安装的选择不同（最小安装或普通安装），有<a href="https://so.csdn.net/so/search?q=%E4%B8%8D%E5%90%8C%E7%9A%84&amp;spm=1001.2101.3001.7020">不同的</a>Snap软件会被预装到系统，在删除Snap服务之前，我们需要移除Snap安装的这些</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="c"># 查询当前系统上snap安装了哪些app</span>
snap list
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image217.webp" alt="" /></p>

<p>卸载掉图中所有应用，按照<strong>先删除应用软件，再删除非应用软件</strong>的顺序进行删除</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c">#移除snap-store，如果是Kubuntu，则没有这个东西，测不需要卸载</span>
<span class="nb">sudo </span>snap remove snap-store
<span class="c">#移除firefox浏览器 gnome-42-2204 gtk-common-themes(可以一次性移除多个)</span>
<span class="nb">sudo </span>snap remove firefox gnome-42-2204 gtk-common-themes
<span class="c">#移除其它...</span>

<span class="c">#移除core22,bare以及snapd（下面这些需要最后再移除，否则会报错）</span>
<span class="nb">sudo </span>snap remove core22
<span class="nb">sudo </span>snap remove bare
<span class="nb">sudo </span>snap remove snapd
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image218.webp" alt="" /></p>

<p>输入以下命令查看是否还有snap包</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>snap list

<span class="c"># 老版</span>
neofetch

<span class="c"># 新版</span>
fastfetch
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image219.webp" alt="" /></p>

<h3 id="移除snap">移除snap</h3>

<p>在删除掉<a href="https://so.csdn.net/so/search?q=Snap%E5%AE%89%E8%A3%85&amp;spm=1001.2101.3001.7020">Snap安装</a>的软件后，下一步就是把Snap本身也删除掉，这里需要使用Apt来实现（谨慎卸载，可视化页面容易崩）</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre> <span class="c">#使用apt移除掉snap</span>
<span class="nb">sudo </span>apt autoremove <span class="nt">--purge</span> snapd
<span class="c">#移除snapd的一些目录</span>
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /var/cache/snapd
<span class="nb">sudo rm</span> <span class="nt">-rf</span> ~/snap
</pre></td></tr></tbody></table></code></pre></div></div>

<p>至此，其实snap已经被删除掉了。但是这个并不足够，如果你使用apt安装一些软件 <code class="language-plaintext highlighter-rouge">sudo apt install firefox</code>时，会自动下载并重新安装snap服务。因为Ubuntu源中的一些软件已经是snap版本，而非deb版本，下载snap版本时，会自动检查并在必要时重新安装snap服务。这也是Canonical为了推广自己的Snap Store而做的一些额外的努力吧。(这一点最被很多人不喜欢)</p>

<h3 id="禁止系统自动安装snap">禁止系统自动安装snap</h3>

<p>我们可以利用APT可配置禁用安装哪些依赖的特性，来实现禁止重新自动安装Snap服务</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/apt/preferences.d/nosnap.pref
</pre></td></tr></tbody></table></code></pre></div></div>

<p>按insert进入编辑模式，然后复制以下内容，最后按ESC，切换为英文输入法模式，然后敲 <code class="language-plaintext highlighter-rouge">:wq</code> 回车</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>Package: snapd
Pin: release <span class="nv">a</span><span class="o">=</span><span class="k">*</span>
Pin-Priority: <span class="nt">-10</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image220.webp" alt="" /></p>

<h3 id="测试是否成功">测试是否成功</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>firefox
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这里提示snapd无法被安装，就证明成功了</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image221.webp" alt="" /></p>

<h3 id="重新安装firefox浏览器没大有必要">重新安装FireFox浏览器（没大有必要）</h3>

<p>我个人其实更偏好Google Chrome浏览器，浏览器是从Chrome官网下载deb进行安装的。所以我有浏览器了，就没必要安装火狐浏览器了，</p>

<p>但如果你确实喜欢Firefox，在删除掉Snap后，其实没法再通过Snap或Apt来安装Firefox了，而Firefox官网提供的下载，又没有deb包，没有桌面快捷方式，不是非常方便。</p>

<p>所以，你可以考虑使用Mozilla提供的源来安装debian版本的Firefox</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
<span class="c"># 添加Mozilla提供的源</span>
<span class="nb">sudo </span>add-apt-repository ppa:mozillateam/ppa

<span class="c"># 安装Firefox</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>firefox
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="跨ubuntu大版本更新">跨Ubuntu大版本更新</h3>

<p>跨Ubuntu大版本更新，是指从Ubuntu22.04LTS更新到Ubuntu24.04LTS这种大版本更新。</p>

<p>跨Ubuntu大版本更新时，建议恢复snap，等更新完毕后再删掉snap，以防止Canonical公司从中作妖。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c">#删掉禁止安装snap的配置文件</span>
<span class="nb">sudo rm</span> <span class="nt">-rf</span> /etc/apt/preferences.d/nosnap.pref
<span class="nb">sudo </span>apt update

<span class="nb">sudo </span>apt dist-update
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="切换系统语言到中文">切换系统语言到中文</h2>

<p>（实在不喜欢英文的可以切换，以KDE6为例子，其他类似）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image222.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image223.webp" alt="" /></p>

<h2 id="中文输入法">中文输入法</h2>

<h3 id="搜狗不建议ubuntu2204-及-以下">搜狗(不建议）(Ubuntu22.04 <strong>及</strong> 以下)</h3>

<p>官网下载搜狗输入法</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image224.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image225.webp" alt="" /></p>

<p>打开终端输入如下</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> ~/Downloads/
<span class="nb">sudo </span>apt <span class="nb">install</span> ./sogoupinyin_4.2.1.145_amd64.deb
</pre></td></tr></tbody></table></code></pre></div></div>

<p>打开Fcitx</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image226.webp" alt="" /><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image227.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image228.webp" alt="" /></p>

<p>添加搜狗输入法</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image229.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image230.webp" alt="" /></p>

<p>将搜狗输入法设置为唯一输入法</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image231.webp" alt="" /></p>

<h3 id="fcitx5ubuntu2204-及-以上debian12及以上fedora">Fcitx5(Ubuntu22.04 <strong>及</strong> 以上、Debian12及以上、Fedora)</h3>

<ol>
  <li>卸载旧输入法</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
<span class="c"># Ubuntu或者Debian</span>
<span class="nb">sudo </span>apt purge fcitx<span class="k">*</span> ibus<span class="k">*</span>

<span class="c"># Fedora</span>

<span class="c"># 应该不用干任何事，fedora41基本都移除了</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>安装Fcitx5</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>
<span class="c"># Ubuntu22.04及以上、Debian12及以上</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>fcitx5 fcitx5-chinese-addons

<span class="c"># Ubuntu20.04</span>
<span class="nb">sudo </span>add-apt-repository ppa:zhsj/fcitx5
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>fcitx5 fcitx5-chinese-addons

<span class="c"># Fedora</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>fcitx5 fcitx5-chinese-addons fcitx5-autostart
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>
    <p>Reboot System重启系统</p>
  </li>
  <li>
    <p>启动Fcitx5</p>
  </li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image232.webp" alt="" /></p>

<ol>
  <li>修改一些设置</li>
</ol>

<p>将Pinyin和Keyboard - English US加入到左边。(如果找不到，不要勾选右边的仅显示当前语言）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image233.webp" alt="" /></p>

<p>添加快捷键以便于更好切换中英文</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image234.webp" alt="" /></p>

<ol>
  <li>如果你是KDE6+Wayland,则还需要下面这个步骤（Kubuntu26.04及以上，Debian13及以上，Rocky10及以上，Fedora等）</li>
</ol>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image235.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image236.webp" alt="" /></p>

<ol>
  <li>重启</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>shutdown <span class="nt">-r</span> now
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>使用Fcitx5工具箱优化Fcitx5(进入Github自己看说明书安装)</li>
</ol>

<p>https://github.com/debuggerx01/fcitx5_customizer</p>

<p>```Plain Text</p>

<h1 id="ubuntu">Ubuntu</h1>

<h1 id="直接在线执行工具箱优化">直接在线执行工具箱优化</h1>
<p>curl -sSL https://fcitx5.debuggerx.com/fcitx5_customizer.sh | bash -s – recommend</p>

<h1 id="fedora">Fedora</h1>

<h1 id="直接在线执行工具箱优化-1">直接在线执行工具箱优化</h1>
<p>curl -sSL https://fcitx5.debuggerx.com/fcitx5_customizer.sh | bash -s – recommend</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>
9.  再重启

```bash
sudo shutdown -r now
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="pip3源替换">pip3源替换</h2>

<p>非Debian系发行版需要做。</p>

<p>像Ubuntu、Debian这类使用apt工具的发行版不需要此操作。</p>

<p>使用dnf的系统（如Fedora，RHEL，RockyLinux）也可能可以不用做。</p>

<p>https://mirrors.tuna.tsinghua.edu.cn/help/pypi/</p>

<p>按图中顺序敲，但是不出意外的话，会报错，因为大部分发行版不自带pip，所以请接着往下看。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image237.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c">#安装pip3</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>python3-pip

<span class="c">#更新pip3</span>
python3 <span class="nt">-m</span> pip <span class="nb">install</span> <span class="nt">-i</span> https://mirrors.bfsu.edu.cn/pypi/web/simple <span class="nt">--upgrade</span> pip

<span class="c">#设置pip源为北京外国语大学镜像源</span>
pip3 config <span class="nb">set </span>global.index-url https://mirrors.bfsu.edu.cn/pypi/web/simple

<span class="c">#测试</span>
python3 <span class="nt">-m</span> pip <span class="nb">install</span> <span class="nt">--upgrade</span> pip
</pre></td></tr></tbody></table></code></pre></div></div>

<p>成功的话，会看到Looking后面是bfsu字样。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image238.webp" alt="" /></p>

<h2 id="rpmfusion安装并换源">RPMFusion安装并换源</h2>

<p><strong>（仅红帽系，即Ubuntu等Debian系的不用弄）</strong></p>

<p>https://mirrors.bfsu.edu.cn/help/rpmfusion/</p>

<ol>
  <li>先用下方命令查询你是否开启了rpmfusion.</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>rpm <span class="nt">-qa</span> | <span class="nb">grep </span>rpmfusion
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image239.webp" alt="" /></p>

<ol>
  <li>如果开启了的话，就先卸载rpmfusion</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>dnf remove rpmfusion-free-release rpmfusion-nonfree-release
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image240.webp" alt="" /></p>

<ol>
  <li>
    <p>安装北京外国语大学的rpmfusion</p>

    <ol>
      <li>Fedora</li>
    </ol>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="c"># 安装免费仓库非免费仓库</span>
<span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">--nogpgcheck</span> https://mirrors.bfsu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-<span class="si">$(</span>rpm <span class="nt">-E</span> %fedora<span class="si">)</span>.noarch.rpm https://mirrors.bfsu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-<span class="si">$(</span>rpm <span class="nt">-E</span> %fedora<span class="si">)</span>.noarch.rpm
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <ol>
      <li>RHEL、RockyLinux</li>
    </ol>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="c"># 安装免费仓库非免费仓库</span>
<span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">--nogpgcheck</span> https://mirrors.bfsu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-<span class="si">$(</span>rpm <span class="nt">-E</span> %rhel<span class="si">)</span>.noarch.rpm https://mirrors.bfsu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-<span class="si">$(</span>rpm <span class="nt">-E</span> %rhel<span class="si">)</span>.noarch.rpm
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>把其他rpmfusion仓库也改为bfsu源</p>
  </li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nb">sudo sed</span> <span class="nt">-e</span> <span class="s1">'s!^metalink=!#metalink=!g'</span> <span class="se">\</span>
         <span class="nt">-e</span> <span class="s1">'s!^mirrorlist=!#mirrorlist=!g'</span> <span class="se">\</span>
         <span class="nt">-e</span> <span class="s1">'s!^#baseurl=!baseurl=!g'</span> <span class="se">\</span>
         <span class="nt">-e</span> <span class="s1">'s!https\?://download1\.rpmfusion\.org/!https://mirrors.bfsu.edu.cn/rpmfusion/!g'</span> <span class="se">\</span>
         <span class="nt">-i</span> /etc/yum.repos.d/rpmfusion<span class="k">*</span>.repo
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>检查修改好的仓库</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">grep</span> <span class="s2">"mirrors.bfsu"</span> /etc/yum.repos.d/rpmfusion<span class="k">*</span>.repo
</pre></td></tr></tbody></table></code></pre></div></div>

<p>可以看到不止free和nonfree的源换了，英伟达和steam也换了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image241.webp" alt="" /></p>

<ol>
  <li>刷新仓库缓存</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>dnf clean all
<span class="nb">sudo </span>dnf makecache
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="时间不同步">时间不同步</h2>

<p>双系统会导致Ubuntu比Windows的时间快8小时，而Windows的时间比Ubuntu慢8小时，所以需要解决系统时间同步的问题。还是第一次分享的那个视频，后面有一节讲到了时间同步的问题。</p>

<p>（ <strong>建议：打开字幕观看，因为有些莫名出现的问题，会在弹幕里有解答</strong> ）</p>

<p>https://www.bilibili.com/video/BV1554y1n7zv/?vd_source=ceb9c29ca8792358f229b53eef0c1448</p>

<h2 id="显卡驱动安装">显卡驱动安装</h2>

<h3 id="卸载显卡驱动卸载干净">卸载显卡驱动(卸载干净)</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
<span class="c"># 如果使用了.run文件进行安装的，再使用下面命令卸载干净</span>
<span class="nb">sudo</span> /usr/bin/nvidia-uninstall

<span class="c"># 如果是使用apt安装的驱动</span>
<span class="nb">sudo </span>apt-get remove <span class="nt">--purge</span> nvidia<span class="k">*</span>

<span class="c"># 如果是使用dnf安装的驱动</span>
<span class="nb">sudo </span>dnf remove nvidia<span class="k">*</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="常见问题遇到问题再翻上来看这里">常见问题（遇到问题再翻上来看这里）</h3>

<ol>
  <li>禁用开源驱动nouveau，nouveau经常会引起卡顿黑屏花屏，所以要禁用</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/modprobe.d/blacklist-nouveau.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>blacklist-nouveau.conf文件内容如下：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>blacklist nouveau
blacklist lbm-nouveau
options nouveau <span class="nv">modeset</span><span class="o">=</span>0
lias nouveau off
<span class="nb">alias </span>lbm-nouveau off
</pre></td></tr></tbody></table></code></pre></div></div>

<p>接着运行下方命令</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># debian系选这个（Ubuntu等）</span>
<span class="nb">sudo </span>update-initramfs <span class="nt">-u</span>

<span class="c"># 红帽系选这个（Fedora，Rocky等）</span>
<span class="nb">sudo </span>dracut <span class="nt">--force</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>```Plain Text</p>

<h1 id="重启">重启</h1>
<p>sudo reboot</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>
重启后，查询nouveau是否还开着，如果什么都不出现，说明禁用成功。

```bash
lsmod | grep nouveau
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>无法调节屏幕亮度，无法使用HDMI插口(这是因为xorg文件和grub没配置)( <strong>仅X11</strong> ，例如Ubuntu24.04及以下，像Fedora等使用wayland的不能用下方的配置。)</li>
</ol>

<p>先配置xorg</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /usr/share/X11/xorg.conf.d/10-nvidia.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>并把10-nvidia.conf里的内容修改为下方内容并保存，然后重启即可。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>Section <span class="s2">"OutputClass"</span>
   Identifier <span class="s2">"nvidia"</span>
   MatchDriver <span class="s2">"nvidia-drm"</span>
   Driver <span class="s2">"nvidia"</span>
   Option <span class="s2">"AllowEmptyInitialConfiguration"</span>
   Option <span class="s2">"PrimaryGPU"</span> <span class="s2">"yes"</span>
   ModulePath <span class="s2">"/usr/lib/x86_64-linux-gnu/nvidia/xorg"</span>
EndSection

<span class="c"># 或者</span>

Section <span class="s2">"OutputClass"</span> 
    Identifier     <span class="s2">"nvidia"</span> 
    MatchDriver    <span class="s2">"nvidia-drm"</span> 
    Driver         <span class="s2">"nvidia"</span> 
    Option         <span class="s2">"RegistryDwords"</span> <span class="s2">"EnableBrightnessControl=1;PrimaryGPU=1"</span> 
    Option         <span class="s2">"Backlight"</span> <span class="s2">"nvidia_0"</span> 
    ModulePath     <span class="s2">"/usr/lib/x86_64-linux-gnu/nvidia/xorg"</span> 
EndSection
</pre></td></tr></tbody></table></code></pre></div></div>

<p>再配置grub</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/default/grub
</pre></td></tr></tbody></table></code></pre></div></div>

<p>grub参数添加上下面这些参数，注意是添加啊，可不是改为这样，原来的参数要保留。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="o">=</span><span class="s2">"nvidia.NVreg_EnableBacklightControl=1 acpi_backlight=native video.use_native_backlight=0"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image242.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>
<span class="c"># debian系选这个（Ubuntu等）</span>
<span class="nb">sudo </span>update-initramfs <span class="nt">-u</span>
<span class="c">#或</span>
<span class="nb">sudo </span>update-grub

<span class="c"># 红帽系选这个（Fedora，Rocky等）</span>
<span class="nb">sudo </span>dracut <span class="nt">--force</span>

<span class="nb">sudo </span>reboot
</pre></td></tr></tbody></table></code></pre></div></div>

<p>重启即可</p>

<ol>
  <li>安装N卡驱动提示错误</li>
</ol>

<p>```Plain Text
Unable to find the kernel source tree for the currently running kernel.  Please make sure you have installed the kernel source files for your kernel and that they are properly configured; on Red Hat Linux systems, for example, be sure you have the ‘kernel-source’ or ‘kernel-devel’ RPM installed.If you know the correct kernel source files are installed, you may specify the kernel source path with the ‘–kernel-source-path’ command line option.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
1.  检查当前运行的内核版本：

运行以下命令以查看你当前正在使用的内核版本：

```bash
uname -r
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>安装内核开发文件：</li>
</ol>

<p>确保你已经安装了与当前内核版本相匹配的 <code class="language-plaintext highlighter-rouge">kernel-devel</code> 包。运行以下命令来安装：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>dnf <span class="nb">install </span>kernel-devel-<span class="si">$(</span><span class="nb">uname</span> <span class="nt">-r</span><span class="si">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这将自动安装与你当前内核版本匹配的内核开发包。</p>

<ol>
  <li>安装内核源代码（可选）：</li>
</ol>

<p>如果需要访问完整的内核源代码，你可以运行以下命令来安装它：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>dnf <span class="nb">install </span>kernel-headers kernel-source
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>检查安装：</li>
</ol>

<p>安装完成后，确认路径是否正确。内核源文件通常位于 <code class="language-plaintext highlighter-rouge">/usr/src/kernels/</code> 目录下，你可以使用以下命令来检查该目录是否存在：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">ls</span> /usr/src/kernels/
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果仍然遇到问题，可以通过 <code class="language-plaintext highlighter-rouge">--kernel-source-path</code> 选项手动指定内核源文件路径。</p>

<h3 id="安装方式推荐">安装方式推荐</h3>

<p>下面有三个方式安装驱动，教程基本都写了，分别是通用方式，APT方式，DNF方式。</p>

<p>新手建议使用APT方式（Ubuntu或者Debian）或者DNF方式（Fedora或者RockyLinux）安装 <strong>NVIDIA驱动</strong> ，然后CUDA用通用方式安装，CUDNN依然用APT或者DNF方式安装。</p>

<p><strong>（你是新手的话，老老实实按照下方的表格推荐的方式进行安装，别瞎整活）</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">各发行版推荐使用的方式</th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"> </td>
      <td>Ubuntu</td>
      <td>Debian</td>
      <td>Fedora</td>
      <td>RockyLinux</td>
    </tr>
    <tr>
      <td style="text-align: left">NVIDIA驱动</td>
      <td>APT</td>
      <td>APT</td>
      <td>DNF</td>
      <td>DNF</td>
    </tr>
    <tr>
      <td style="text-align: left">CUDA</td>
      <td>通用或APT</td>
      <td>通用或APT</td>
      <td>通用或DNF</td>
      <td>通用或DNF</td>
    </tr>
    <tr>
      <td style="text-align: left">cuDNN</td>
      <td>APT</td>
      <td>APT</td>
      <td>DNF</td>
      <td>DNF</td>
    </tr>
  </tbody>
</table>

<h3 id="apt安装方式一适合debianubuntu等">APT安装（方式一：适合Debian,Ubuntu等）</h3>

<h4 id="安装显卡驱动">安装显卡驱动</h4>

<p>这种方式安装的显卡驱动，以后更新内核后都不用再重新安装显卡驱动了。</p>

<h5 id="ubuntu-1">Ubuntu</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
<span class="c"># 安装英伟达驱动</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>nvidia-driver-版本号

<span class="c"># 重启 (必须重启)</span>
<span class="nb">sudo </span>shutdown <span class="nt">-r</span> now

<span class="c"># 检查驱动是否安装成功</span>
nvidia-smi
</pre></td></tr></tbody></table></code></pre></div></div>

<h5 id="debian">Debian</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>
<span class="c"># 安装内核头文件和编译工具</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> linux-headers-amd64 build-essential

<span class="c"># 安装英伟达驱动</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>nvidia-driver

<span class="c"># 重启</span>
<span class="nb">sudo </span>shutdown <span class="nt">-r</span> now

<span class="c"># 检查驱动是否安装成功</span>
nvidia-smi
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="安装cuda">安装CUDA</h4>

<p>（请使用方式一通用法）</p>

<h4 id="安装cudnn">安装cuDNN</h4>

<p>选择CuDNN v9版本（该版本安装和CUDA差不多，可以看着官网教程来安装）</p>

<p>https://developer.nvidia.com/cudnn-archive</p>

<h3 id="dnf安装方式二适合fedorarocky等">DNF安装（方式二：适合Fedora,Rocky等）</h3>

<h4 id="安装显卡驱动-1">安装显卡驱动</h4>

<p>如果我们使用通用方式安装显卡驱动，会发现每次Feodra更新内核后，显卡驱动都会掉，如何解决这个办法呢？请采用DNF安装显卡驱动。</p>

<p>这种方式安装的显卡驱动，以后更新内核后都不用再重新安装显卡驱动了。（安装新内核后，重启时会自动触发 <code class="language-plaintext highlighter-rouge">akmod</code> 的构建流程。此时，系统会生成与新内核匹配的 NVIDIA 驱动模块。）</p>

<p>注意，安装驱动之前，要确定自己没用.run等方式安装了驱动。可以用nvidia-smi命令查看，如果提示没安装驱动就可以。如果提示当前已经安装了驱动，请先卸载驱动(卸载教程上面应该有）或者等下一次内核更新(内核更新会掉.run安装的驱动）</p>

<h5 id="fedora-1">Fedora</h5>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>
<span class="c"># 启用 RPM Fusion 仓库（北京外国语源）</span>
<span class="nb">sudo </span>dnf <span class="nb">install</span> <span class="nt">--nogpgcheck</span> https://mirrors.bfsu.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-<span class="si">$(</span>rpm <span class="nt">-E</span> %fedora<span class="si">)</span>.noarch.rpm https://mirrors.bfsu.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-<span class="si">$(</span>rpm <span class="nt">-E</span> %fedora<span class="si">)</span>.noarch.rpm

<span class="c"># 安装驱动和内核工具</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>akmod-nvidia  <span class="c"># 自动适配内核的驱动（重点）</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>xorg-x11-drv-nvidia-cuda  <span class="c"># 包含 CUDA 支持</span>

<span class="c"># 重启并验证(这种方式必须重启)</span>
<span class="nb">sudo </span>reboot
nvidia-smi  <span class="c"># 检查驱动版本（如 570.86.16）</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="安装cuda-1">安装CUDA</h4>

<p>通过dnf安装完显卡驱动后，也可以使用通用法安装CUDA，这种方法也很方便（CUDA在更新内核后不会掉的）。</p>

<p>也可以使用下面这种dnf的方式进行CUDA安装。</p>

<p>（此教程以Fedora41和RTX3060Laptop为例）(Rocky,RHEL也类似)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image243.webp" alt="" /></p>

<ol>
  <li>先查看显卡驱动所支持的最高CUDA版本</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>nvidia-smi
</pre></td></tr></tbody></table></code></pre></div></div>

<p>左边是英伟达驱动版本，右边是所支持CUDA的最高版本，注意是最高版本，比这个版本低的CUDA都是可以安装的。(不用追求最高，稳定即可，虽然都很稳定)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image244.webp" alt="" /></p>

<ol>
  <li>下载CUDA并安装CUDA</li>
</ol>

<p>https://developer.nvidia.com/cuda-toolkit-archive</p>

<p>选择一个版本，这里以CUDA12.4为例（绿色框住的都是我这台电脑对应可安装的版本，而红色框则不能）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image245.webp" alt="" /></p>

<p>我这里是Intel CPU(X86_64架构或者叫amd64架构)，所以选择X86_64。（AMD和Intel全是X86的，如果分不清，请看<a href="https://sdutvincirobot.feishu.cn/wiki/PqsGwcPCuidbN6k13jfcGWtWn0b">Vinci机器人队单片机教程</a>）</p>

<p>我是Fedora41，所以选择了Fedora41 ,(你是RockyLinux要选择RockyLinux)如下图所示:</p>

<p>https://developer.nvidia.com/cuda-toolkit-archive</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image246.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image247.webp" alt="" /></p>

<p>按照网站对应的部分敲，如我上图里是这样的：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>wget https://developer.download.nvidia.com/compute/cuda/12.8.0/local_installers/cuda-repo-fedora41-12-8-local-12.8.0_570.86.10-1.x86_64.rpm
<span class="nb">sudo </span>dnf <span class="nb">install</span> ./cuda-repo-fedora41-12-8-local-12.8.0_570.86.10-1.x86_64.rpm
<span class="nb">sudo </span>dnf clean all
<span class="nb">sudo </span>dnf <span class="nt">-y</span> <span class="nb">install </span>cuda-toolkit-12-8
</pre></td></tr></tbody></table></code></pre></div></div>

<p>进行环境配置：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim ~/.bashrc
</pre></td></tr></tbody></table></code></pre></div></div>

<p>复制下面这一串到~/.bashrc文件中，并保存，不会用vim编辑器的请自行百度。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda-12.4/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda-12.4/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>或者（更建议下方这个）</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image248.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># 刷新当前终端的环境变量</span>
<span class="nb">source</span> ~/.bashrc

<span class="c"># 验证CUDA是否安装成功</span>
nvcc <span class="nt">-V</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>出现下图这种则安装成功。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image249.webp" alt="" /></p>

<h4 id="安装cudnn-1">安装cuDNN</h4>

<p>选择CuDNN v9版本（该版本安装和CUDA差不多，可以看着官网教程来安装）</p>

<p>https://developer.nvidia.com/cudnn-archive</p>

<h3 id="通用方式方式三脚本或压缩包方式">通用方式（方式三：脚本或压缩包方式）</h3>

<p>遇到问题请看 <strong>常见问题</strong> 那节，看看有没有对应解决方案。（对于Ubuntu，Debian，Fedora，Rocky的常见问题应该是全的）</p>

<h4 id="安装显卡驱动-2">安装显卡驱动</h4>

<p>使用这种方式安装，需要先禁用掉nouveau，请先往下翻，找到<strong>常见问题（在上面一两小节）</strong>那节内容里的禁用nouveau，将nouveau禁用。</p>

<p>先下载N卡驱动，下载.run扩展名的</p>

<p>https://www.nvidia.cn/drivers/lookup/</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image250.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image251.webp" alt="" /></p>

<p>用以下命令停止可视化桌面环境（用ctrl alt f*也可以）<strong><em>（也可以不禁用桌面环境，直接进行下一步。）</em></strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
<span class="c"># 通用的命令（sudo telinit 5是打开图形界面）</span>
<span class="nb">sudo </span>telinit 3

<span class="c"># ubuntu 使用下方命令</span>
<span class="nb">sudo </span>service lightdm stop

<span class="c"># Fedora 使用下方命令</span>
<span class="nb">sudo </span>systemctl isolate multi-user.target
</pre></td></tr></tbody></table></code></pre></div></div>

<p>之后会进入一个新的命令行会话，使用当前的用户名密码登录。(不用使用root用户)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>
<span class="c"># 编译环境+准备工作</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>build-essential

<span class="c"># 进入到.run目录中</span>
<span class="nb">cd</span> /home/tungchiahui/Downloads/

<span class="c"># 给驱动文件增加可执行权限：</span>
<span class="nb">sudo chmod </span>a+x NVIDIA-Linux-x86_64-550.107.02.run

<span class="c"># 然后执行安装：</span>
<span class="nb">sudo</span> ./NVIDIA-Linux-x86_64-550.107.02.run

<span class="c"># 如果有异常则：(一般不用下方这条，会导致OPENGL没法被安装，这样ROS有些功能无法使用)</span>
<span class="nb">sudo</span> ./NVIDIA-Linux-x86_64-550.107.02.run  <span class="nt">--no-opengl-files</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>安装完毕重启即可</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># 重启 </span>
<span class="nb">sudo </span>reboot

<span class="c"># 检查驱动是否安装成功</span>
nvidia-smi
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="安装cuda-2">安装CUDA</h4>

<p>（此教程以Debian 12 Bookworm和RTX3060Laptop为例）(Ubuntu，Fedora也类似)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image252.webp" alt="" /></p>

<ol>
  <li>先查看显卡驱动所支持的最高CUDA版本</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>nvidia-smi
</pre></td></tr></tbody></table></code></pre></div></div>

<p>左边是英伟达驱动版本，右边是所支持CUDA的最高版本，注意是最高版本，比这个版本低的CUDA都是可以安装的。(不用追求最高，稳定即可，虽然都很稳定)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image253.webp" alt="" /></p>

<ol>
  <li>下载CUDA并安装CUDA</li>
</ol>

<p>https://developer.nvidia.com/cuda-toolkit-archive</p>

<p>选择一个版本，这里以CUDA12.4为例（绿色框住的都是我这台电脑对应可安装的版本，而红色框则不能）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image254.webp" alt="" /></p>

<p>我这里是Intel CPU(X86_64架构或者叫amd64架构)，所以选择X86_64。（AMD和Intel全是X86的，如果分不清，请看<a href="https://sdutvincirobot.feishu.cn/wiki/PqsGwcPCuidbN6k13jfcGWtWn0b">Vinci机器人队单片机教程</a>）</p>

<p>我是Debian12，所以选择了Debian12 ,(你是Ubuntu要选择Ubuntu)如下图所示，建议选择runfile文件进行安装。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image255.webp" alt="" /></p>

<p>将最下方框框里的命令敲入终端</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>
<span class="c"># 在当前文件夹下创建一个ttt的子文件夹</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> ./ttt

<span class="c"># 进入ttt文件夹</span>
<span class="nb">cd </span>ttt

<span class="c"># 输入复制的第一条命令（用来下载cuda的runfile文件）</span>
wget https://developer.download.nvidia.com/compute/cuda/12.4.0/local_installers/cuda_12.4.0_550.54.14_linux.run

<span class="c"># 给予权限</span>
<span class="nb">sudo chmod </span>a+x ./cuda_12.4.0_550.54.14_linux.run

<span class="c"># 运行脚本</span>
<span class="nb">sudo</span> ./cuda_12.4.0_550.54.14_linux.run
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image256.webp" alt="" /></p>

<p>正在加载中：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image257.webp" alt="" /></p>

<p>输入accept接受即可</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image258.webp" alt="" /></p>

<p>因为我们已经安装了驱动，所以删掉该项，Install即可。（ <strong>一定不要勾选安装驱动</strong> ，新手避免非必要的麻烦）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image259.webp" alt="" /></p>

<p>等待片刻后，一般不出红色字体就是安装成功了，可以读读英语确认一下。(顺便确定一下位置)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image260.webp" alt="" /></p>

<ol>
  <li>配置环境</li>
</ol>

<p>根据上方确认一下路径，比如我上面红色框起来的为</p>

<p><code class="language-plaintext highlighter-rouge">Please make sure that</code> <code class="language-plaintext highlighter-rouge">- PATH includes /usr/local/cuda-12.4/bin</code> <code class="language-plaintext highlighter-rouge">- LD_LIBRARY_PATH includes /usr/local/cuda-12.4/lib64, or, add /usr/local/cuda-12.4/lib64 to /etc/ld.so.conf and run ldconfig as root</code></p>

<p>如果刚才忘记查看了，也可以使用下方命令查看路径：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>which nvcc
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image261.webp" alt="" /></p>

<p>所以我进行以下操作：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim ~/.bashrc
</pre></td></tr></tbody></table></code></pre></div></div>

<p>复制下面这一串到~/.bashrc文件中，并保存，不会用vim编辑器的请自行百度。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda-12.4/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda-12.4/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>或者</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$LD_LIBRARY_PATH</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image262.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># 刷新当前终端的环境变量</span>
<span class="nb">source</span> ~/.bashrc

<span class="c"># 验证CUDA是否安装成功</span>
nvcc <span class="nt">-V</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>出现下图这种则安装成功。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image263.webp" alt="" /></p>

<h4 id="安装cudnn基本废弃请往下看apt和dnf安装cudnn的方式">安装cuDNN<strong>（基本废弃，请往下看apt和dnf安装CuDNN的方式）</strong></h4>

<ol>
  <li>据安装好的CUDA版本选择合适的cuDNN版本进行下载，注意这里是需要注册登录的：</li>
</ol>

<p>https://developer.nvidia.cn/rdp/cudnn-archive#a-collapse805-111</p>

<p>因为我是CUDA12.4，所以下方红圈版本都是可以安装的，越新越好。（上方网站最高版本也就v8.9.7,还有更新的版本，可以直接往下看apt和dnf方式安装）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image264.webp" alt="" /></p>

<p>红色是X86架构的所有Linux通用的，所以我选择红色的。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image265.webp" alt="" /></p>

<p>绿色的是X86架构的Ubuntu，是Ubuntu且CPU为X86架构的可以选择下载。</p>

<p>蓝色的是arm64(aarch64)架构的Ubuntu，是Ubuntu且CPU为arm64(aarch64)架构的可以选择下载。</p>

<p><strong>我这里选择所有Linux X86_64最通用的办法：</strong></p>

<p>下载好的：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image266.webp" alt="" /></p>

<ol>
  <li>安装cuDNN</li>
</ol>

<p>找到该文件所在目录，并打开终端，cd到该目录。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image267.webp" alt="" /></p>

<p>解压文件，并复制到对应位置完成安装</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>
<span class="c"># 解压cuDNN文件</span>
<span class="nb">tar</span> <span class="nt">-xvf</span> ./cudnn-linux-x86_64-8.9.7.29_cuda12-archive.tar.xz

<span class="c"># cd进文件夹</span>
<span class="nb">cd</span> ./cudnn-linux-x86_64-8.9.7.29_cuda12-archive

<span class="c"># 复制cuDNN文件到CUDA目录</span>
<span class="nb">sudo cp </span>include/cudnn<span class="k">*</span>    /usr/local/cuda/include
<span class="nb">sudo cp </span>lib/libcudnn<span class="k">*</span>    /usr/local/cuda/lib64

<span class="c"># 对比一下有没有缺文件</span>
<span class="nb">ls</span> /usr/local/cuda/include/cudnn<span class="k">*</span>
<span class="nb">ls</span> /usr/local/cuda/lib64/libcudnn<span class="k">*</span>

<span class="c"># 给予权限</span>
<span class="nb">sudo chmod </span>a+r /usr/local/cuda/include/cudnn<span class="k">*</span>
<span class="nb">sudo chmod </span>a+r /usr/local/cuda/lib64/libcudnn<span class="k">*</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>检查是否安装成功</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="c"># 检查cuDNN版本命令</span>
<span class="nb">cat</span> /usr/local/cuda/include/cudnn_version.h | <span class="nb">grep </span>CUDNN_MAJOR <span class="nt">-A</span> 2
</pre></td></tr></tbody></table></code></pre></div></div>

<p>出现下图这样的就是安装成功了</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image268.webp" alt="" /></p>

<ol>
  <li>软链接</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="c"># 运行 ldconfig 以更新库缓存：（如果运行 ldconfig 后没有出现任何错误，说明配置已经完成。）</span>
<span class="nb">sudo </span>ldconfig
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果出现下列提示，则需要软链接<strong>(如果没有下列提示，则什么都不需要做)</strong></p>

<p>```Plain Text
ldconfig: /usr/local/cuda-12.4/targets/x86_64-linux/lib/libcudnn_cnn_train.so.8 is not a symbolic link<br />
ldconfig: /usr/local/cuda-12.4/targets/x86_64-linux/lib/libcudnn_ops_train.so.8 is not a symbolic link<br />
ldconfig: /usr/local/cuda-12.4/targets/x86_64-linux/lib/libcudnn_ops_infer.so.8 is not a symbolic link<br />
ldconfig: /usr/local/cuda-12.4/targets/x86_64-linux/lib/libcudnn_adv_infer.so.8 is not a symbolic link<br />
ldconfig: /usr/local/cuda-12.4/targets/x86_64-linux/lib/libcudnn_cnn_infer.so.8 is not a symbolic link<br />
ldconfig: /usr/local/cuda-12.4/targets/x86_64-linux/lib/libcudnn.so.8 is not a symbolic link<br />
ldconfig: /usr/local/cuda-12.4/targets/x86_64-linux/lib/libcudnn_adv_train.so.8 is not a symbolic link</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>
运行下方的命令

```bash

# cd进入CUDA路径
cd /usr/local/cuda/targets/x86_64-linux/lib

 # 查看本路径下的需要软链接的文件名
 ls
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image269.webp" alt="" /></p>

<p>如上图，我需要将<code class="language-plaintext highlighter-rouge">libcudnn_xxx_xxxxx.so.8.9.7</code>和<code class="language-plaintext highlighter-rouge">libcudnn_xxx_xxxxx.so.8</code>和<code class="language-plaintext highlighter-rouge">libcudnn_xxx_xxxxx.so</code>软链接</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>
<span class="c"># 创建符号链接。对于每个 .so.8 文件，需要创建一个指向该文件的符号链接，通常链接的名称是不包含 .8 的文件名。</span>
<span class="nb">sudo ln</span> <span class="nt">-sf</span> libcudnn_cnn_train.so.8.9.7 libcudnn_cnn_train.so.8
<span class="nb">sudo ln</span> <span class="nt">-sf</span> libcudnn_adv_infer.so.8.9.7 libcudnn_adv_infer.so.8
<span class="nb">sudo ln</span> <span class="nt">-sf</span> libcudnn_adv_train.so.8.9.7 libcudnn_adv_train.so.8
<span class="nb">sudo ln</span> <span class="nt">-sf</span> libcudnn_cnn_infer.so.8.9.7 libcudnn_cnn_infer.so.8
<span class="nb">sudo ln</span> <span class="nt">-sf</span> libcudnn.so.8.9.7 libcudnn.so.8
<span class="nb">sudo ln</span> <span class="nt">-sf</span> libcudnn_ops_infer.so.8.9.7 libcudnn_ops_infer.so.8
<span class="nb">sudo ln</span> <span class="nt">-sf</span> libcudnn_ops_train.so.8.9.7 libcudnn_ops_train.so.8

<span class="c"># 运行 ldconfig 以更新库缓存：（如果运行 ldconfig 后没有出现任何提示，说明配置已经完成。）</span>
<span class="nb">sudo </span>ldconfig

<span class="c"># 使用 ls -l 来确认符号链接是否创建成功：(再次确认链接）</span>
<span class="nb">ls</span> <span class="nt">-l</span> /usr/local/cuda/targets/x86_64-linux/lib/libcudnn_<span class="k">*</span>.so<span class="k">*</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="命令教程长期积累">命令教程(长期积累)</h1>

<h2 id="大多数命令">大多数命令</h2>

<p>https://www.runoob.com/linux/linux-tutorial.html</p>

<h2 id="包管理工具命令">包管理工具命令</h2>

<p>常见的有apt,dnf,yum,pacman,pkcon等等。</p>

<h2 id="kde-dolphin-以root打开">KDE Dolphin 以root打开</h2>

<p>kde5</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>pkexec <span class="nb">env </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span> <span class="nv">XAUTHORITY</span><span class="o">=</span><span class="nv">$XAUTHORITY</span> <span class="nv">KDE_SESSION_VERSION</span><span class="o">=</span>5 <span class="nv">KDE_FULL_SESSION</span><span class="o">=</span><span class="nb">true </span>dolphin
</pre></td></tr></tbody></table></code></pre></div></div>

<p>kde6</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>pkexec <span class="nb">env </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span> <span class="nv">XAUTHORITY</span><span class="o">=</span><span class="nv">$XAUTHORITY</span> <span class="nv">KDE_SESSION_VERSION</span><span class="o">=</span>6 <span class="nv">KDE_FULL_SESSION</span><span class="o">=</span><span class="nb">true </span>dolphin
</pre></td></tr></tbody></table></code></pre></div></div>

<p>kde6.3.3及以上</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image270.webp" alt="" /></p>

<p>直接图形化就可以了。</p>

<h1 id="各种环境配置">各种环境配置</h1>

<p><a href="https://sdutvincirobot.feishu.cn/wiki/FQszwXIR5iQgCfk7pRwc9rYpnqg">电控组环境搭建大全</a></p>

<h1 id="其他可选配置">其他可选配置</h1>

<p>根据自己是否有需求再选择对应的功能进行配置</p>

<h2 id="kde的wayland和x11互相切换">KDE的Wayland和X11互相切换</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># Ubuntu</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>plasma-workspace-x11 plasma-workspace-wayland

<span class="c"># Fedora，Rocky</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>plasma-workspace-x11 plasma-workspace-wayland
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后重启，在kde的登陆界面的左下角可以选择X11还是Wayland！</p>

<h2 id="修改dns">修改DNS</h2>

<p>使用 NetworkManager（最推荐，适用于大多数现代发行版）这是最灵活的方法，NetworkManager 是 Ubuntu、Fedora、CentOS 等大多数主流发行版的默认网络管理工具。</p>

<ol>
  <li>修改全局配置文件（对所有连接生效）：创建或编辑 <code class="language-plaintext highlighter-rouge">/etc/NetworkManager/conf.d/dns.conf</code>文件：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/NetworkManager/conf.d/dns.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>添加以下内容：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="o">[</span>main]dns<span class="o">=</span>none
systemd-resolved<span class="o">=</span>falserc-manager<span class="o">=</span>unmanaged
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这告诉 NetworkManager 不要管理 DNS 设置。</p>

<ol>
  <li>创建静态 resolv.conf 文件：编辑 <code class="language-plaintext highlighter-rouge">/etc/resolv.conf</code>文件（如果文件不存在则创建）：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/resolv.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>添加您想要的 DNS 服务器，例如：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>nameserver 223.5.5.5
nameserver 119.29.29.29
options <span class="nb">timeout</span>:1 attempts:2
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>防止文件被覆盖：为防止系统其他服务覆盖此文件，将其设置为不可更改：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>chattr +i /etc/resolv.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>（如需修改此文件，先使用 <code class="language-plaintext highlighter-rouge">sudo chattr -i /etc/resolv.conf</code>解除锁定）</p>

<p>重启 NetworkManager：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl restart NetworkManager
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>使用 <code class="language-plaintext highlighter-rouge">resolvectl</code>或 <code class="language-plaintext highlighter-rouge">systemd-resolve</code>查看是否成功（最推荐）</li>
</ol>

<p>这是最直接的方法，可以查看系统默认的 DNS 配置。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>resolvectl status
</pre></td></tr></tbody></table></code></pre></div></div>

<p>或者（对于旧版系统）</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>systemd-resolve <span class="nt">--status</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image271.webp" alt="" /></p>

<h2 id="截图快捷键">截图快捷键</h2>

<p>KDE自带的截图工具贼好用，同时这个截图工具同样可以录屏，但是OBS比截图工具更加专业，所以我们一般只用这个截图工具进行截图。</p>

<p>QQ和微信的截图在Wayland下截至2025年还都有些小问题，所以我们选择KDE自带的截图工具。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image272.webp" alt="" /></p>

<p>这里在捕获矩形区域的自定义快捷键在这里输入自己想用的快捷键即可。</p>

<h2 id="搜索工具">搜索工具</h2>

<p>KDE自带的搜索工具也很好用，可以快速打开自己想打开的应用。就像这样，所以我们也设置一个快捷键进行呼出。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image273.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image274.webp" alt="" /></p>

<p>Meta这个按键就是Win键，上面是一个微软LOGO。</p>

<h2 id="关闭selinux">关闭SELinux</h2>

<p>这玩意在个人电脑没必要开，纯给自己找麻烦，Android倒是可以开。</p>

<p>这个目前Feodra是默认开的（<code class="language-plaintext highlighter-rouge">enforcing</code>模式），所以需要关一下。</p>

<p>禁用有俩方式，<code class="language-plaintext highlighter-rouge">disabled</code>和<code class="language-plaintext highlighter-rouge">permissive</code>模式，下面是这俩模式的区别：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">特性</th>
      <th style="text-align: left">Disabled 模式</th>
      <th style="text-align: left">Permissive 模式</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">SELinux 内核模块状态</td>
      <td style="text-align: left">完全禁用 SELinux，内核模块不运行137。</td>
      <td style="text-align: left">SELinux 内核模块正常运行，但仅记录违规行为，不阻止访问126。</td>
    </tr>
    <tr>
      <td style="text-align: left">访问控制策略</td>
      <td style="text-align: left">不执行任何策略，所有访问均被允许29。</td>
      <td style="text-align: left">检查策略并记录违规行为，但不会阻止操作36。</td>
    </tr>
    <tr>
      <td style="text-align: left">日志记录</td>
      <td style="text-align: left">不生成 SELinux 相关的审计日志37。</td>
      <td style="text-align: left">记录所有违反策略的行为到 /var/log/audit/audit.log26。</td>
    </tr>
    <tr>
      <td style="text-align: left">安全性</td>
      <td style="text-align: left">最低，完全依赖传统 Linux DAC（自主访问控制）28。</td>
      <td style="text-align: left">高于 Disabled 模式，提供调试环境，同时保留日志分析能力36。</td>
    </tr>
    <tr>
      <td style="text-align: left">切换方式</td>
      <td style="text-align: left">必须修改配置文件 /etc/selinux/config 并重启系统34。</td>
      <td style="text-align: left">可通过命令 setenforce 0 临时切换，无需重启34。</td>
    </tr>
    <tr>
      <td style="text-align: left">适用场景</td>
      <td style="text-align: left">仅用于彻底规避 SELinux 兼容性问题（如老旧软件），不推荐长期使用19。</td>
      <td style="text-align: left">用于调试策略、排查权限问题，或在开发阶段测试 SELinux 规则367。</td>
    </tr>
  </tbody>
</table>

<p>由于Disabled模式，SELinux 完全关闭，内核模块未加载。所有进程和文件的访问仅受传统 Linux 用户/组权限控制（如 <code class="language-plaintext highlighter-rouge">rwx</code>），所以我们选择Permissive模式，该模式下SELinux 策略正常加载，但仅记录违规行为（如进程尝试访问未授权文件）。</p>

<p>下面是修改模式的教程：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/selinux/config
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image275.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image276.webp" alt="" /></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre></td><td class="rouge-code"><pre>
<span class="c1"># This file controls the state of SELinux on the system. </span>

<span class="c1"># SELINUX= can take one of these three values: </span>

<span class="c1">#     enforcing - SELinux security policy is enforced. </span>

<span class="c1">#     permissive - SELinux prints warnings instead of enforcing. </span>

<span class="c1">#     disabled - No SELinux policy is loaded. </span>

<span class="c1"># See also: </span>

<span class="c1"># https://docs.fedoraproject.org/en-US/quick-docs/getting-started-with-selinux/#getting-started-with-selinux-selinux-states-and-modes </span>
<span class="c1"># </span>

<span class="c1"># NOTE: In earlier Fedora kernel builds, SELINUX=disabled would also </span>

<span class="c1"># fully disable SELinux during boot. If you need a system with SELinux </span>

<span class="c1"># fully disabled instead of SELinux running with no policy loaded, you </span>

<span class="c1"># need to pass selinux=0 to the kernel command line. You can use grubby </span>

<span class="c1"># to persistently set the bootloader to boot with selinux=0: </span>
<span class="c1"># </span>

<span class="c1">#    grubby --update-kernel ALL --args selinux=0 </span>
<span class="c1"># </span>

<span class="c1"># To revert back to SELinux enabled: </span>
<span class="c1"># </span>

<span class="c1">#    grubby --update-kernel ALL --remove-args selinux </span>
<span class="c1"># </span>
<span class="s">SELINUX=permissive</span> 

<span class="c1"># SELINUXTYPE= can take one of these three values: </span>

<span class="c1">#     targeted - Targeted processes are protected, </span>

<span class="c1">#     minimum - Modification of targeted policy. Only selected processes are protected. </span>

<span class="c1">#     mls - Multi Level Security protection. </span>
<span class="s">SELINUXTYPE=targeted</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">SELINUXTYPE</code>是修改selinux的策略，<code class="language-plaintext highlighter-rouge">targeted</code> 策略是 SELinux 的 默认策略，主要对 高风险的网络服务（如 Apache、MySQL、SSH）进行强制访问控制，其他非关键进程沿用传统的 Linux 用户/组权限（DAC）。这种设计在安全性和易用性之间取得了平衡,所以无需修改。</p>

<p>重启即可</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>reboot
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="uefi启动界面refind">UEFI启动界面rEFInd</h2>

<p>https://www.bilibili.com/video/BV1qh411Q7d4</p>

<h3 id="安装refind">安装rEFInd</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
<span class="c"># Ubuntu</span>
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>refind
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
<span class="c"># Fedora</span>
<span class="nb">sudo </span>dnf makecache
<span class="nb">sudo </span>dnf <span class="nb">install </span>rEFInd
</pre></td></tr></tbody></table></code></pre></div></div>

<p>注：如果安装了三系统，尽量把refind安装到Linux盘的第一个系统上。</p>

<h3 id="确认refind是否安装成功">确认refind是否安装成功</h3>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image277.webp" alt="" /></p>

<p>如图在/boot/efi/EFI文件夹里，有个refind.</p>

<p>如果你没有这个refind文件的话，需要手动进行安装。</p>

<p>手动安装方式一：</p>

<p>找到<code class="language-plaintext highlighter-rouge">/usr/share/rEFInd/</code>文件夹，看看里面是否有refind-install,直接运行下方命令即可。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /usr/share/rEFInd/
<span class="nb">sudo</span> ./refind-install
<span class="nb">sudo </span>reboot
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image278.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image279.webp" alt="" /></p>

<p>手动安装方式二：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /usr/share/rEFInd/
<span class="nb">sudo cp</span> <span class="nt">-r</span> /usr/share/rEFInd/refind /boot/efi/EFI/
<span class="nb">sudo </span>reboot
</pre></td></tr></tbody></table></code></pre></div></div>

<p>安装完毕后，可以看看/boot/efi/EFI文件夹里，是否有refind了.</p>

<h3 id="配置-refindconf">配置 refind.conf</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /boot/efi/EFI/refind
<span class="nb">sudo </span>vim ./refind.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>最后一行加上（vim编辑器不会用自己百度）</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>dont_scan_dirs ESP:/EFI/boot,EFI/ubuntu,EFI/boot,EFI/deepin_os,EFI/UOS,EFI/fedora
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image280.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>sduo reboot
<span class="c">#如果使用refind-install安装的refind,默认自动将rEFInd启动项作为第一项，如果没有进BIOS手动配置</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image281.webp" alt="" /></p>

<p>完成！！！</p>

<h3 id="美化">美化</h3>

<p>rEFInd-glassy主题：https://pan.baidu.com/s/1HgfXG3m4j57VIk4k6inI-g</p>

<p>提取码：zimo</p>

<p>记得解压出来。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /boot/efi/EFI/refind
<span class="nb">mkdir</span> <span class="nt">-p</span> ./themes

<span class="c"># 你把美化包解压到哪里了，就cd到哪里</span>
<span class="nb">cd</span> ~/Downloads
<span class="nb">sudo cp</span> <span class="nt">-r</span> ./rEFInd-glassy /boot/efi/EFI/refind/themes
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /boot/efi/EFI/refind
<span class="nb">sudo </span>vim ./refind.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<p>最后一行加上（vim编辑器不会用自己百度）</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>include themes/rEFInd-glassy/theme.conf
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="c"># 重新启动电脑</span>
<span class="nb">sudo </span>reboot
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image282.webp" alt="" /></p>

<h2 id="kde主题">KDE主题</h2>

<p>先从kde store下载一个心仪的主题，然后解压出来。</p>

<p>https://store.kde.org/</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image283.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># cd进主题的文件夹</span>
<span class="nb">cd</span> ~/Downloads

<span class="c"># 把主题文件复制到KDE的主题</span>
<span class="nb">sudo cp</span> <span class="nt">-r</span> ./Apple.BigSur.Dark.P6 /usr/share/plasma/look-and-feel
</pre></td></tr></tbody></table></code></pre></div></div>

<p>进入设置就可以看到啦，如果看不到，就重启下电脑。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image284.webp" alt="" /></p>

<h2 id="自启应用与脚本">自启应用与脚本</h2>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image285.webp" alt="" /></p>

<p>在右上角可以添加脚本和应用，添加脚本前先要确认脚本是否拥有可执行权限。也可以选择开机时运行脚本和关机时运行脚本。</p>

<p>例子：拿docker_x11的命令<code class="language-plaintext highlighter-rouge">xhost +local:docker</code>为例。</p>

<p>先找到一个存放脚本的文件夹，你自己在home分区创一个就可以了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image286.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">touch </span>docker_x11.bash
<span class="nb">sudo chmod </span>a+x ./docker_x11.bash
<span class="nb">sudo </span>vim ./docker_x11.bash
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="c"># 允许本地 docker 容器访问 X server</span>
xhost +local:docker
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在vim编辑器里用<code class="language-plaintext highlighter-rouge">:wq</code>保存并退出</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image287.webp" alt="" /></p>

<p>在kde6设置里找到autostart，然后添加登陆脚本，而不是登出脚本。</p>

<p>🟢 <strong>Login Script（登录脚本）</strong></p>

<ul>
  <li><strong>什么时候执行？</strong> 当用户登录系统时（例如通过终端、TTY 或 SSH）自动执行。</li>
</ul>

<p>🔴 <strong>Logout Script（登出脚本）</strong></p>

<ul>
  <li><strong>什么时候执行？</strong> 当用户退出 shell 或注销登录会话时自动执行。</li>
</ul>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image288.webp" alt="" /></p>

<p>找到脚本文件添加进去即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image289.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image290.webp" alt="" /></p>

<p>重启即可</p>

<h2 id="从bash切换到zsh">从Bash切换到Zsh</h2>

<h3 id="什么是shell">什么是shell？</h3>

<p>简单说，shell是你与应用程序交互的媒介。 通常情况下，你将你想要使用的应用程序和参数输入到shell，shell在PATH中查找你希望调用的应用程序，对参数进行解析，并传入参数。最终将结果返回给你。</p>

<p>如果你使用的是bash shell，那么你大概率正在使用某个linux发行版。 目前，大部分<code class="language-plaintext highlighter-rouge">linux</code>发行版使用的默认shell仍然是<code class="language-plaintext highlighter-rouge">bash</code>。 <code class="language-plaintext highlighter-rouge">Windows</code>默认使用<code class="language-plaintext highlighter-rouge">Powershell</code>。 从<code class="language-plaintext highlighter-rouge">Catalina</code>开始，<code class="language-plaintext highlighter-rouge">MacOS</code>已经将默认shell从<code class="language-plaintext highlighter-rouge">bash</code>切换到了<code class="language-plaintext highlighter-rouge">zsh</code>。</p>

<h3 id="zsh有什么优势">zsh有什么优势？</h3>

<p>相比<code class="language-plaintext highlighter-rouge">bash</code>，<code class="language-plaintext highlighter-rouge">zsh</code>有庞大的插件社区和成熟的插件管理框架如<code class="language-plaintext highlighter-rouge">oh my zsh</code>，这使得<code class="language-plaintext highlighter-rouge">zsh</code>的功能扩展变得极为容易，你可以向管理vim插件一样管理zsh插件。</p>

<h3 id="zsh安装与配置">zsh安装与配置</h3>

<p>先查看自己现在是啥shell？（一般是bash）</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="nv">$SHELL</span>  <span class="c"># 应该会显示/usr/bin/bash</span>

<span class="c"># 或</span>
<span class="nb">echo</span> <span class="nv">$0</span>      <span class="c"># 应该显示 "-bash"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>现在让我们来安装zsh吧。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># Debian系</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>zsh

<span class="c">#红帽系</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>zsh
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image291.webp" alt="" /></p>

<p>确认一下自己是否安装成功</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
<span class="c"># 查看shell版本</span>
bash <span class="nt">--version</span>
zsh <span class="nt">--version</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image292.webp" alt="" /></p>

<p>如何配置zsh呢？</p>

<p>和<code class="language-plaintext highlighter-rouge">bash</code>差不多。</p>

<p><code class="language-plaintext highlighter-rouge">zsh</code>的全局配置文件位于<code class="language-plaintext highlighter-rouge">/etc/zsh.zshc</code>， 单用户配置文件位于<code class="language-plaintext highlighter-rouge">~/.zshrc</code>。</p>

<p>但不推荐你现在修改任何一个文件，因为我们有更加优雅的配置方式：</p>

<h3 id="oh-my-zsh">oh my zsh!</h3>

<p>项目地址：</p>

<p>https://github.com/ohmyzsh/ohmyzsh</p>

<p><code class="language-plaintext highlighter-rouge">oh my zsh</code>是当下最流行的<code class="language-plaintext highlighter-rouge">zsh</code>插件管理工具，相当于vim中的vim-plug或vundle。</p>

<p>安装oh my zsh</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># 方式一（可能需要科学上网）</span>
sh <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span class="si">)</span><span class="s2">"</span>

<span class="c"># 方式二</span>
sh <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://install.ohmyz.sh/<span class="si">)</span><span class="s2">"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下图可选是否现在就把zsh设置成默认的。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image293.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image294.webp" alt="" /></p>

<p>如上图即安装成功。</p>

<h3 id="配置oh-my-zsh">配置oh my zsh</h3>

<p>现在查看.zshrc文件，你会发现oh my zsh已经几乎帮你配置好了。</p>

<p>如果你想使用插件，可以找到plugins，在其中添加即可。</p>

<p>这里给出我的.zshrc供你参考。</p>

<h3 id="定制独一无二的zsh">定制独一无二的zsh</h3>

<p>还记得上文中我提到不建议修改.zshrc，这是因为我们在使用oh my zsh框架后，oh my zsh会建立一个~/oh-my-zsh目录用于存放相关文件，其中有一个名为custom的文件夹，我们可以将我们的配置脚本放在此处，oh my zsh会自动加载这一目录下的vim脚本。</p>

<p>基本支持bash的配置命令。以博主为例，bashrc脚本迁移到zsh未作任何改动。</p>

<p>我创建了一个名为myshrc.zsh的脚本以存储配置，文件如下供你参考。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> /home/用户名/.oh-my-zsh/custom
<span class="nb">touch</span> ./myshrc.zsh
vim ./myshrc.zsh
</pre></td></tr></tbody></table></code></pre></div></div>

<p>将自己~/.bashrc里自己多添加的设置全部复制到该文件中即可。</p>

<p>例如我的：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre>
<span class="c"># 配置CUDA</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/cuda/bin:<span class="nv">$PATH</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/cuda/lib64:<span class="nv">$LD_LIBRARY_PATH</span>

<span class="c"># 配置ROS-DISTRO</span>
<span class="nb">export </span><span class="nv">ROSDISTRO_INDEX_URL</span><span class="o">=</span>https://mirrors.bfsu.edu.cn/rosdistro/index-v4.yaml

<span class="c"># 配置ROS1 Noetic</span>

<span class="c"># source /opt/ros/noetic/setup.zsh</span>

<span class="c"># export ROS_MASTER_URI=http://localhost:11311</span>

<span class="c"># export ROS_HOSTNAME=localhost</span>

<span class="c"># export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:/home/tungchiahui/UserFloder/MySource/ROS_WS/gazebo_models:/home/tungchiahui/UserFloder/MySource/ROS_WS/ign_models</span>

<span class="c"># 配置ROS2 Humble</span>
<span class="nb">source</span> /opt/ros/humble/setup.zsh
<span class="nb">export </span><span class="nv">ROS_DOMAIN_ID</span><span class="o">=</span>6
<span class="nb">export </span><span class="nv">IGN_GAZEBO_RESOURCE_PATH</span><span class="o">=</span><span class="nv">$IGN_GAZEBO_RESOURCE_PATH</span>:/home/tungchiahui/UserFloder/MySource/ROS_WS/gazebo_models:/home/tungchiahui/UserFloder/MySource/ROS_WS/ign_models
</pre></td></tr></tbody></table></code></pre></div></div>

<p>接着可以刷新当前终端环境</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># 刷新环境</span>
<span class="nb">source</span> ~/.zshrc

<span class="c"># 检查自己的配置是否生效</span>
<span class="nb">echo</span> <span class="nv">$LD_LIBRARY_PATH</span> 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>对应着我上面我的配置，会对应echo打印出下列即为成功。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>/usr/local/cuda/lib64:/usr/local/cuda/lib64: 
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="切换默认shell">切换默认shell</h3>

<p>如果在下图选择了yes,就不用再重新设置了。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image295.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>chsh <span class="nt">-s</span> <span class="si">$(</span>which zsh<span class="si">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="nv">$SHELL</span>  <span class="c"># 应输出 "/usr/bin/zsh"</span>
<span class="nb">echo</span> <span class="nv">$0</span>      <span class="c"># 若显示 "-zsh"，表示已生效</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>完毕！</p>

<p>如果这里发现无法设置成默认，如下图：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image296.webp" alt="" /></p>

<p>那么使用下方命令强制修改：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
<span class="c"># 强制修改</span>
<span class="nb">sudo </span>usermod <span class="nt">-s</span> /usr/bin/zsh tungchiahui<span class="o">(</span>用户名<span class="o">)</span>

<span class="c"># 验证</span>
<span class="nb">grep </span>tungchiahui<span class="o">(</span>用户名<span class="o">)</span> /etc/passwd  <span class="c"># 检查是否显示 "/usr/bin/zsh"</span>

<span class="c"># 重启</span>
<span class="nb">sudo </span>reboot
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image297.webp" alt="" /></p>

<p>重启后验证</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">echo</span> <span class="nv">$SHELL</span>  <span class="c"># 应输出 "/usr/bin/zsh"</span>
<span class="nb">echo</span> <span class="nv">$0</span>      <span class="c"># 若显示 "-zsh"，表示已生效</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image298.webp" alt="" /></p>

<p>再次完毕！</p>

<h3 id="添加插件教程">添加插件教程</h3>

<h4 id="powerlevel10k">powerlevel10k</h4>

<p>这个插件是美化zsh的，优点是不会怎么影响终端性能，速度比较快。</p>

<p>https://github.com/romkatv/powerlevel10k</p>

<p>安装powerlevel10k</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="c"># 国外用户</span>
git clone <span class="nt">--depth</span><span class="o">=</span>1 https://github.com/romkatv/powerlevel10k.git ~/powerlevel10k
<span class="nb">echo</span> <span class="s1">'source ~/powerlevel10k/powerlevel10k.zsh-theme'</span> <span class="o">&gt;&gt;</span>~/.zshrc

<span class="c"># 国内用户</span>
git clone <span class="nt">--depth</span><span class="o">=</span>1 https://gitee.com/romkatv/powerlevel10k.git ~/powerlevel10k
<span class="nb">echo</span> <span class="s1">'source ~/powerlevel10k/powerlevel10k.zsh-theme'</span> <span class="o">&gt;&gt;</span>~/.zshrc
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下载字体</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image299.webp" alt="" /></p>

<p>下面的任选其一</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image300.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image301.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>
<span class="c"># 刷新当前环境变量</span>
<span class="nb">source</span> ~/.zshrc
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这里需要检查图标是否都显示正常，显示不正常就证明字体有问题，关闭终端再重新打开看看字体还有问题吗?</p>

<p>没问题就一直y.</p>

<p>建议参考这个教程的配置。</p>

<p>https://www.bilibili.com/video/BV1dX4y127JL</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image302.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image303.webp" alt="" /></p>

<p>下面是配置好的样子：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image304.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image305.webp" alt="" /></p>

<p>如果想重新配置就输入：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>p10k configure
</pre></td></tr></tbody></table></code></pre></div></div>

<p>VScode如果图标显示不全的话，如下操作即可。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image306.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image307.webp" alt="" /></p>

<ol>
  <li>搜索 <code class="language-plaintext highlighter-rouge">Terminal › Integrated: Font Family</code></li>
</ol>

<p>输入支持 Nerd Font 的字体名称，例如：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>MesloLGS NF
</pre></td></tr></tbody></table></code></pre></div></div>

<p>（注意 <code class="language-plaintext highlighter-rouge">MesloLGS NF</code> 必须放在首位）</p>

<ol>
  <li><strong>用基础连字支持</strong></li>
</ol>

<p>搜索 <code class="language-plaintext highlighter-rouge">Terminal › Integrated: Font Ligatures</code></p>

<p>勾选 <code class="language-plaintext highlighter-rouge">Enabled</code>（允许字体渲染特殊连字符号）</p>

<ol>
  <li><strong>确保 GPU 加速开启</strong></li>
</ol>

<ul>
  <li>
    <p>搜索 <code class="language-plaintext highlighter-rouge">Terminal › Integrated: Gpu Acceleration</code></p>
  </li>
  <li>
    <p>设置为 <code class="language-plaintext highlighter-rouge">on</code>（提升渲染性能）</p>
  </li>
</ul>

<p><strong>若 GPU 加速导致问题</strong></p>

<ul>
  <li>
    <p>尝试设置为 <code class="language-plaintext highlighter-rouge">off</code> 后重启终端</p>
  </li>
  <li>
    <p>检查 Fallback Ligatures 是否生效</p>
  </li>
</ul>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image308.webp" alt="" /></p>

<p>再重开终端即可（GPU设置必须重启终端）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image309.webp" alt="" /></p>

<h2 id="flatpak软件管理工具">Flatpak软件管理工具</h2>

<p>flatpak类似于apt和dnf等包管理工具，可以安装软件，但安装的不是最基础的软件，是QQ，QQ音乐这种软件。</p>

<p>当你的apt或者dnf没有某个软件时，可以去flathub上去看看是否有这个软件。</p>

<h3 id="flatpak安装">flatpak安装</h3>

<p>https://flatpak.org/</p>

<ol>
  <li>Ubuntu</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>
<span class="c"># 安装flatpak</span>
<span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>flatpak

<span class="c"># 先添加官方国外源</span>
flatpak remote-add <span class="nt">--if-not-exists</span> flathub https://dl.flathub.org/repo/flathub.flatpakrepo

<span class="c"># 再修改为中科大镜像源</span>
<span class="nb">sudo </span>flatpak remote-modify flathub <span class="nt">--url</span><span class="o">=</span>https://mirrors.ustc.edu.cn/flathub

<span class="c"># 查看仓库详情</span>
flatpak remotes <span class="nt">--show-details</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image310.webp" alt="" /></p>

<ol>
  <li>Fedora</li>
</ol>

<p>Fedora已经自带。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
<span class="c"># 先添加官方国外源</span>
flatpak remote-add <span class="nt">--if-not-exists</span> flathub https://dl.flathub.org/repo/flathub.flatpakrepo

<span class="c"># 再修改为中科大镜像源</span>
<span class="nb">sudo </span>flatpak remote-modify flathub <span class="nt">--url</span><span class="o">=</span>https://mirrors.ustc.edu.cn/flathub

<span class="c"># 查看仓库详情</span>
flatpak remotes <span class="nt">--show-details</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image311.webp" alt="" /></p>

<h3 id="字体问题解决">字体问题解决</h3>

<p>因为flatpak是沙盒,所以容易缺字体,先安装字体</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c">#Ubuntu</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>google-noto-sans-cjk-fonts google-noto-serif-cjk-fonts

<span class="c"># Fedora</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>google-noto-sans-cjk-fonts google-noto-serif-cjk-fonts
</pre></td></tr></tbody></table></code></pre></div></div>
<p>实际上这套字体叫：
Noto Sans CJK / Noto Serif CJK
它同时包含：
中文（Simplified + Traditional）
日文（JP）
韩文（KR）</p>

<p>然后设置 Flatpak 的字体访问权限（override）,让所有 Flatpak 应用能“看到”这些字体：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>flatpak override <span class="nt">--filesystem</span><span class="o">=</span>/usr/share/fonts
<span class="nb">sudo </span>flatpak override <span class="nt">--filesystem</span><span class="o">=</span>~/.local/share/fonts
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果你之前安装过flatpak软件,那么上面的操作对已安装的软件不生效,
拿QQ音乐举例,我们需要让他生效.</p>

<p>进入 Flatpak 沙盒环境,这条命令让你进入 QQ 音乐的沙盒终端，就像“进入容器”一样。
里面的路径和主系统是隔离的。</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>flatpak run <span class="nt">--command</span><span class="o">=</span>bash com.qq.QQmusic
</pre></td></tr></tbody></table></code></pre></div></div>

<p>删除旧的 fontconfig 缓存,Flatpak 会在自己的沙盒里缓存字体索引。
删掉旧缓存后，新的字体才能重新被识别。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">rm</span> <span class="nt">-rvf</span> ~/.var/app/com.qq.QQmusic/cache/fontconfig/
</pre></td></tr></tbody></table></code></pre></div></div>

<p>重建字体缓存,这一步会强制重新扫描字体路径（包含 /usr/share/fonts 和用户字体路径），
生成新的缓存文件，修复显示问题。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>fc-cache <span class="nt">-f</span> <span class="nt">-v</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="安装软件">安装软件</h3>

<p>https://flathub.org/</p>

<p>去上面的官网搜索软件+下载软件。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image312.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image313.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>flatpak <span class="nb">install </span>flathub com.obsproject.Studio
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image314.webp" alt="" /></p>

<h3 id="运行软件">运行软件</h3>

<p>方法一（官方）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image315.webp" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>flatpak <span class="nb">install </span>flathub com.obsproject.Studio
</pre></td></tr></tbody></table></code></pre></div></div>

<p>方法二（直接当普通软件运行即可）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image316.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image317.webp" alt="" /></p>

<h2 id="appimage">Appimage</h2>

<p>比如说，QQ音乐只提供deb，appimage.并不提供rpm格式的安装包（1.1.7版本是这样的，以后估计rpm会给。纯纯开发者欠C了，连rpm都不给。）所以说我想在Fedora上安装QQ音乐要么用appimage,要么选择用flatpak.(这里使用appimage)</p>

<p>先下载appimage</p>

<p>https://y.qq.com/download/download.html</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image318.webp" alt="" /></p>

<p>再去google下载个QQ音乐图标（因为google可以下载透明图标）</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image319.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image320.webp" alt="" /></p>

<p>给他们放在<code class="language-plaintext highlighter-rouge">/home/用户名</code>的某个文件夹中（这个自己定，比如我是<code class="language-plaintext highlighter-rouge">/home/tungchiahui/UserFloder/Applications/qqmusic/</code>文件夹）</p>

<p>先给QQ音乐执行权限</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> ~/UserFloder/Applications/qqmusic
<span class="nb">sudo chmod</span> +x ./qqmusic-1.1.7.AppImage
</pre></td></tr></tbody></table></code></pre></div></div>

<p>给QQ音乐配置 <strong>快捷方式</strong> ：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> ~/.local/share/applications/
<span class="nb">touch</span> ./qqmusic.desktop
vim ./qqmusic.desktop
<span class="nb">sudo chmod</span> +x ./qqmusic.desktop
</pre></td></tr></tbody></table></code></pre></div></div>

<p>内容如下</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="o">[</span>Desktop Entry]
<span class="nv">Name</span><span class="o">=</span>QQ音乐
<span class="nv">Exec</span><span class="o">=</span>/home/tungchiahui/UserFloder/Applications/qqmusic/qqmusic-1.1.7.AppImage
<span class="nv">Icon</span><span class="o">=</span>/home/tungchiahui/UserFloder/Applications/qqmusic/QQ_Music2023.svg
<span class="nv">Type</span><span class="o">=</span>Application
<span class="nv">Categories</span><span class="o">=</span>Audio<span class="p">;</span>Music<span class="p">;</span>Player<span class="p">;</span>
<span class="nv">Comment</span><span class="o">=</span>QQ Music Client <span class="k">for </span>Linux
</pre></td></tr></tbody></table></code></pre></div></div>

<p>此时找到软件就可以打开了，如果找不到，请重启，部分不先进的发行版刷新图标列表不会很快。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image321.webp" alt="" /></p>

<p>如果QQ音乐闪退，这个只是QQ音乐自己软件的问题，按下图这样做。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image322.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image323.webp" alt="" /></p>

<p>如果你用的不是KDE，那么也可以直接修改<code class="language-plaintext highlighter-rouge">qqmuic.desktop</code>：在exec的末尾加上<code class="language-plaintext highlighter-rouge">--no-sandbox</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="o">[</span>Desktop Entry]
<span class="nv">Name</span><span class="o">=</span>QQ音乐
<span class="nv">Exec</span><span class="o">=</span>/home/tungchiahui/UserFloder/Applications/qqmusic/qqmusic-1.1.7.AppImage <span class="nt">--no-sandbox</span>
<span class="nv">Icon</span><span class="o">=</span>/home/tungchiahui/UserFloder/Applications/qqmusic/QQ_Music2023.svg
<span class="nv">Type</span><span class="o">=</span>Application
<span class="nv">Categories</span><span class="o">=</span>Audio<span class="p">;</span>Music<span class="p">;</span>Player<span class="p">;</span>
<span class="nv">Comment</span><span class="o">=</span>QQ Music Client <span class="k">for </span>Linux
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image324.webp" alt="" /></p>

<p>如果qq音乐缺字体,那么请安装字体(这个字体是多种语言合一的字体)</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>dnf <span class="nb">install </span>google-noto-sans-cjk-fonts google-noto-serif-cjk-fonts
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="修改hostname">修改HOSTNAME</h2>

<p>例如我要修改为Dell-G15-5511</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>hostnamectl set-hostname <span class="s2">"Dell-G15-5511"</span>

hostnamectl | <span class="nb">grep</span> <span class="s2">"Static hostname"</span>      <span class="c"># 验证静态主机名</span>

<span class="nb">sudo </span>systemctl restart systemd-hostnamed  <span class="c"># 重启主机名服务</span>
<span class="nb">sudo </span>systemctl restart NetworkManager      <span class="c"># 重启网络服务</span>
<span class="nb">sudo </span>reboot

<span class="nb">echo</span> <span class="nv">$HOSTNAME</span>           <span class="c"># 验证主机名</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image325.webp" alt="" /></p>

<h2 id="删掉应用配置">删掉应用配置</h2>

<p>有的应用配置有问题，可以删掉他的缓存。</p>

<p>缓存在<code class="language-plaintext highlighter-rouge">~/.config</code>文件夹下。</p>

<p>比如VScode出问题了：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image326.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image327.webp" alt="" /></p>

<p>这样删掉他就结束了。</p>

<p>而下面的这个<code class="language-plaintext highlighter-rouge">~/.vscode</code>是扩展。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image328.webp" alt="" /></p>

<h1 id="qemu-kvm虚拟机">QEMU-KVM虚拟机</h1>

<p>QEMU-KVM是一个高性能的虚拟机,以下是以安装RockyLinux9为例.</p>

<h2 id="安装必备软件">安装必备软件</h2>

<p>确保主机已经安装了 QEMU、KVM 和相关工具。以基于 Debian/Ubuntu 的系统为例，执行以下命令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>qemu-kvm qemu-img virt-manager virt-install virt-viewer libvirt libvirt-daemon libvirt-daemon-qemu bridge-utils virglrenderer
</pre></td></tr></tbody></table></code></pre></div></div>

<p>对于基于 Fedora/CentOS/Rocky Linux 的系统，命令可能是：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>dnf <span class="nb">install </span>qemu-kvm qemu-img virt-manager virt-install virt-viewer libvirt libvirt-daemon libvirt-daemon-qemu bridge-utils virglrenderer
</pre></td></tr></tbody></table></code></pre></div></div>

<p>安装完成后，确保当前用户在 <code class="language-plaintext highlighter-rouge">kvm</code> 组中（否则可能没有权限使用 KVM 加速）：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>usermod <span class="nt">-aG</span> kvm <span class="nv">$USER</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>注意：</strong> 修改组后可能需要注销重新登录才能生效。</p>

<h2 id="打开kvm硬件加速">打开KVM硬件加速</h2>

<p>运行以下命令检查 KVM 是否启用：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>egrep <span class="nt">-c</span> <span class="s1">'(vmx|svm)'</span> /proc/cpuinfo
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果输出 <code class="language-plaintext highlighter-rouge">0</code>，说明 CPU 不支持 KVM 或未开启 VT-x（Intel）/ SVM（AMD），需要在 BIOS 里开启 <strong>Intel VT-x</strong> 或 <strong>AMD SVM</strong> 。</p>

<p>然后检查 KVM 模块是否加载：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># 验证 KVM 加速可用</span>
lsmod | <span class="nb">grep </span>kvm

<span class="c"># 验证当前用户有权限访问 /dev/kvm</span>
<span class="nb">ls</span> <span class="nt">-l</span> /dev/kvm
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果没有输出，加载 KVM 模块：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>modprobe kvm_intel  <span class="c"># Intel 处理器</span>
<span class="nb">sudo </span>modprobe kvm_amd    <span class="c"># AMD 处理器</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="创建虚拟硬盘文件">创建虚拟硬盘文件</h2>

<p>你需要为虚拟机创建一个硬盘镜像文件。这里以 qcow2 格式、100GB 为例（你可以根据需要调整大小）。在终端中运行：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>qemu-img create <span class="nt">-f</span> qcow2 disk.qcow2 100G
</pre></td></tr></tbody></table></code></pre></div></div>

<p>这将在当前目录下生成一个名为 <code class="language-plaintext highlighter-rouge">disk.qcow2</code> 的虚拟硬盘文件。</p>

<h2 id="准备-ovmfuefi-固件文件">准备 OVMF（UEFI 固件）文件</h2>

<p>安装 <code class="language-plaintext highlighter-rouge">OVMF</code> 包。例如，在 Ubuntu 上可通过以下命令安装：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
<span class="c"># 一般电脑都默认安装过了</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>ovmf <span class="c"># Debian/Ubuntu</span>
<span class="nb">sudo </span>dnf <span class="nb">install </span>edk2-ovmf <span class="c"># RHEL/CentOS/Fedora</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>安装后，查找文件路径，通常位于 <code class="language-plaintext highlighter-rouge">/usr/share/OVMF/OVMF_CODE.fd</code> 或 <code class="language-plaintext highlighter-rouge">/usr/share/ovmf/OVMF.fd</code>。直接在命令中使用正确路径。(下方脚本中有例子,你只需要确保你的<code class="language-plaintext highlighter-rouge">/usr/share/OVMF/</code>下有这俩文件即可)</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image329.webp" alt="" /></p>

<p>也可以下载下面这个文件:</p>

<p>暂时无法在飞书文档外展示此内容</p>

<ol>
  <li>编写或调整 run.sh 脚本</li>
</ol>

<p>将下面的内容写入你的 <code class="language-plaintext highlighter-rouge">run.sh</code> 文件（你可以使用文本编辑器）。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim ./run.sh
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下面的脚本示例使用 QEMU 启动虚拟机并加载 ISO 镜像：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

qemu-system-x86_64 <span class="se">\</span>
    <span class="nt">-machine</span> q35,vmport<span class="o">=</span>off,kernel_irqchip<span class="o">=</span>on <span class="se">\</span>
    <span class="nt">-accel</span> kvm <span class="se">\</span>
    <span class="nt">-cpu</span> host,kvm<span class="o">=</span>on,vmx<span class="o">=</span>on,migratable<span class="o">=</span>on,+invtsc <span class="se">\</span>
    <span class="nt">-smp</span> 8,sockets<span class="o">=</span>1,cores<span class="o">=</span>4,threads<span class="o">=</span>2 <span class="se">\</span>
    <span class="nt">-m</span> 8G,slots<span class="o">=</span>4,maxmem<span class="o">=</span>32G <span class="se">\</span>
    <span class="nt">-device</span> virtio-gpu-gl-pci,max_outputs<span class="o">=</span>1 <span class="se">\</span>
    <span class="nt">-vga</span> none <span class="se">\</span>
    <span class="nt">-display</span> sdl,gl<span class="o">=</span>on <span class="se">\</span>
    <span class="nt">-audiodev</span> pa,id<span class="o">=</span>pa1,server<span class="o">=</span>unix:/run/user/1000/pulse/native <span class="se">\</span>
    <span class="nt">-device</span> ich9-intel-hda <span class="se">\</span>
    <span class="nt">-device</span> hda-micro,audiodev<span class="o">=</span>pa1 <span class="se">\</span>
    <span class="nt">-device</span> qemu-xhci,id<span class="o">=</span>xhci <span class="se">\</span>
    <span class="nt">-device</span> virtio-tablet-pci <span class="se">\</span>
    <span class="nt">-device</span> usb-kbd,bus<span class="o">=</span>xhci.0 <span class="se">\</span>
    <span class="nt">-bios</span> OVMF-pure-efi64.fd <span class="se">\</span>
    <span class="nt">-boot</span> d <span class="se">\</span>
    <span class="nt">-blockdev</span> <span class="nv">driver</span><span class="o">=</span>qcow2,node-name<span class="o">=</span>disk1,file.driver<span class="o">=</span>file,file.cache.direct<span class="o">=</span>on,file.aio<span class="o">=</span>io_uring,file.filename<span class="o">=</span>disk.qcow2 <span class="se">\</span>
    <span class="nt">-device</span> virtio-blk-pci,drive<span class="o">=</span>disk1 <span class="se">\</span>
    <span class="nt">-drive</span> <span class="nv">file</span><span class="o">=</span>kubuntu-20.04.6-desktop-amd64.iso,media<span class="o">=</span>cdrom,if<span class="o">=</span>none,id<span class="o">=</span>cdrom <span class="se">\</span>
    <span class="nt">-device</span> usb-storage,drive<span class="o">=</span>cdrom,removable<span class="o">=</span>on <span class="se">\</span>
    <span class="nt">-nic</span> user,model<span class="o">=</span>virtio-net-pci,hostfwd<span class="o">=</span>tcp::8022-:22 <span class="se">\</span>
    <span class="nt">-monitor</span> stdio <span class="se">\</span>
    <span class="nt">-parallel</span> none <span class="se">\</span>
    <span class="nt">-serial</span> none <span class="se">\</span>
    <span class="nt">-msg</span> <span class="nv">timestamp</span><span class="o">=</span>on

</pre></td></tr></tbody></table></code></pre></div></div>

<p>保存后给脚本执行权限：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo chmod</span> +x run.sh
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="启动虚拟机">启动虚拟机</h2>

<p>确保当前目录下有以下文件：</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">run.sh</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">disk.qcow2</code>（刚刚创建的虚拟硬盘）</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Rocky-9.4-x86_64-dvd.iso</code>（Rocky Linux 9 安装 ISO）</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">OVMF-pure-efi64.fd</code>文件</p>
  </li>
</ul>

<p>然后在终端中运行脚本：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>./run.sh
</pre></td></tr></tbody></table></code></pre></div></div>

<p>此时，QEMU 应该会启动一个窗口，并加载 ISO 镜像进入安装界面。</p>

<h2 id="安装系统">安装系统</h2>

<p>在虚拟机窗口中，你会看到 Linux 的安装界面。按照安装向导的步骤进行安装。安装完成后，你可能需要调整启动项，将硬盘作为启动介质（如果默认还是从 CD 启动）。</p>

<p><strong>建议：</strong> 安装好系统后，关闭虚拟机，再修改 <code class="language-plaintext highlighter-rouge">run.sh</code> 将 ISO 镜像移除或改为可选启动设备，这样下次启动时就会直接从硬盘启动。</p>

<p>例如，将 <code class="language-plaintext highlighter-rouge">-drive file=Rocky-9.5-x86_64-dvd.iso,media=cdrom</code> 移除，或者更换为启动顺序参数。</p>

<h2 id="其他操作">其他操作</h2>

<h3 id="显卡直通谨慎不懂不要乱搞">显卡直通(谨慎,不懂不要乱搞)</h3>

<p>此操作的意思是把显卡完全给虚拟机用,实体宿主机就没法用显卡了.</p>

<ol>
  <li>主机和 IOMMU 配置</li>
</ol>

<p><strong>(1) 启用 IOMMU（以 Intel 为例）</strong></p>

<p>编辑 <code class="language-plaintext highlighter-rouge">/etc/default/grub</code>，在 <code class="language-plaintext highlighter-rouge">GRUB_CMDLINE_LINUX_DEFAULT</code> 中加入：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">intel_iommu</span><span class="o">=</span>on <span class="nv">iommu</span><span class="o">=</span>pt
</pre></td></tr></tbody></table></code></pre></div></div>

<p>对于 AMD 主机则设置 <code class="language-plaintext highlighter-rouge">amd_iommu=on</code>。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image330.webp" alt="" /></p>

<p>更新 grub 后重启：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>grub2-mkconfig <span class="nt">-o</span> /boot/grub2/grub.cfg   <span class="c"># CentOS/Fedora/Rocky 系列</span>

<span class="c"># 或者</span>
<span class="nb">sudo </span>update-grub   <span class="c"># Ubuntu/Debian 系统</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>可以在重启后用下面命令确认 IOMMU 是否启用：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>dmesg | <span class="nb">grep</span> <span class="nt">-e</span> DMAR <span class="nt">-e</span> IOMMU
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果看到类似“DMAR: IOMMU enabled”之类的信息，就说明生效了。</p>

<p><strong>(2) 查找你的 NVIDIA 显卡设备 ID</strong> 使用 <code class="language-plaintext highlighter-rouge">lspci -nn | grep NVIDIA</code> 查找显卡，例如：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>tungchiahui@Dell-G15-5511:~/Downloads<span class="nv">$ </span>lspci <span class="nt">-nn</span> | <span class="nb">grep </span>NVIDIA 
01:00.0 VGA compatible controller <span class="o">[</span>0300]: NVIDIA Corporation GA106M <span class="o">[</span>GeForce RTX 3060 Mobile / M
ax-Q] <span class="o">[</span>10de:2560] <span class="o">(</span>rev a1<span class="o">)</span> 
01:00.1 Audio device <span class="o">[</span>0403]: NVIDIA Corporation GA106 High Definition Audio Controller <span class="o">[</span>10de:228
e] <span class="o">(</span>rev a1<span class="o">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>记下上面的 PCI 地址和设备 ID。</p>

<p><strong>显卡</strong> PCI 地址：<code class="language-plaintext highlighter-rouge">01:00.0</code> 设备 ID：<code class="language-plaintext highlighter-rouge">10de:2560</code></p>

<p><strong>显卡音频</strong> PCI 地址：<code class="language-plaintext highlighter-rouge">01:00.1</code> 设备 ID：<code class="language-plaintext highlighter-rouge">10de:228e</code></p>

<p><strong>(3) 绑定设备到 vfio 驱动</strong></p>

<p>另一种方式是创建一个 modprobe 配置文件，让 vfio-pci 在加载时绑定这些设备。</p>

<ol>
  <li>创建文件（例如 <code class="language-plaintext highlighter-rouge">/etc/modprobe.d/vfio.conf</code>）：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/modprobe.d/vfio.conf
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>在文件中写入：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>options vfio-pci <span class="nv">ids</span><span class="o">=</span>10de:2560,10de:228e
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>保存文件后，更新 initramfs：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>
<span class="c"># debian系选这个</span>
<span class="nb">sudo </span>update-initramfs <span class="nt">-u</span>

<span class="c"># 红帽系选这个</span>
<span class="nb">sudo </span>dracut <span class="nt">--force</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>
    <p>重启系统。</p>
  </li>
  <li>
    <p>检查设备绑定情况</p>
  </li>
</ol>

<p>重启后，你可以用下面命令检查设备是否已经被 vfio-pci 驱动接管：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>lspci <span class="nt">-nnk</span> | <span class="nb">grep</span> <span class="nt">-A3</span> <span class="s2">"10de:2560"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>你应该能看到类似：</p>

<pre><code class="language-YAML">01:00.0 VGA compatible controller [0300]: NVIDIA Corporation GA106M [GeForce RTX 3060 Mobile / Max-Q] [10de:2560]
        Subsystem: ...
        Kernel driver in use: vfio-pci
</code></pre>

<p>同样用相似的命令检查音频设备（10de:228e）。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>lspci <span class="nt">-nnk</span> | <span class="nb">grep</span> <span class="nt">-A3</span> <span class="s2">"10de:228e"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果看到 <code class="language-plaintext highlighter-rouge">Kernel driver in use: vfio-pci</code>，说明绑定成功。</p>

<p><strong>(4) 启动选项</strong></p>

<p>在run.sh里添加上下面两行</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
    <span class="c"># 直通 NVIDIA 显卡</span>
    <span class="nt">-device</span> vfio-pci,host<span class="o">=</span>01:00.0,multifunction<span class="o">=</span>on,x-vga<span class="o">=</span>on <span class="se">\</span>
    <span class="nt">-device</span> vfio-pci,host<span class="o">=</span>01:00.1 <span class="se">\</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="拓展功能">拓展功能</h1>

<h2 id="wine">Wine</h2>

<h2 id="android">Android</h2>

<h3 id="i卡a卡">I卡、A卡</h3>

<ol>
  <li>Wayland-Waydroid(体验超级好)</li>
</ol>

<p>https://waydro.id/</p>

<h3 id="n卡so-nvidia-fxxk-u">N卡(So Nvidia Fxxk U!)</h3>

<ol>
  <li>
    <p>QEMU-KVM虚拟机 + BlissOS-X86</p>

    <p>https://www.bilibili.com/video/BV1aS411P7Wh</p>

    <p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image331.webp" alt="" /></p>

    <ol>
      <li>比较推荐的配置</li>
    </ol>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>qemu-system-x86_64 <span class="se">\</span>
        <span class="nt">-M</span> q35,vmport<span class="o">=</span>off <span class="se">\</span>
        <span class="nt">-accel</span> kvm <span class="se">\</span>
        <span class="nt">-cpu</span> qemu64,+sse3,+sse4.2 <span class="se">\</span>
        <span class="nt">-smp</span> 8,cores<span class="o">=</span>4 <span class="se">\</span>
        <span class="nt">-m</span> 6G <span class="se">\</span>
        <span class="nt">-usb</span> <span class="se">\</span>
        <span class="nt">-device</span> virtio-tablet <span class="se">\</span>
        <span class="nt">-device</span> virtio-keyboard <span class="se">\</span>
        <span class="nt">-device</span> usb-tablet <span class="se">\</span>
        <span class="nt">-bios</span> OVMF-pure-efi64.fd <span class="se">\</span>
        <span class="nt">-net</span> user,hostfwd<span class="o">=</span>tcp::5555-:5555,hostfwd<span class="o">=</span>tcp::8022-:8022 <span class="se">\</span>
        <span class="nt">-net</span> nic,model<span class="o">=</span>virtio <span class="se">\</span>
        <span class="nt">-audio</span> sdl,model<span class="o">=</span>hda <span class="se">\</span>
        <span class="nt">-display</span> sdl,gl<span class="o">=</span>on,show-cursor<span class="o">=</span>on <span class="se">\</span>
        <span class="nt">-device</span> virtio-vga-gl,xres<span class="o">=</span>1920,yres<span class="o">=</span>1080 <span class="se">\</span>
        <span class="nt">-drive</span> <span class="nv">file</span><span class="o">=</span>disk.qcow2,media<span class="o">=</span>disk,if<span class="o">=</span>virtio,cache<span class="o">=</span>writeback <span class="se">\</span>
        <span class="nt">-drive</span> <span class="nv">file</span><span class="o">=</span>Bliss-v16.9.7-x86_64-OFFICIAL-gapps-20240911.iso,media<span class="o">=</span>cdrom <span class="se">\</span>
        <span class="nt">-monitor</span> stdio <span class="se">\</span>
        <span class="nt">-serial</span> none
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <ol>
      <li>
        <p>常用操作：</p>

        <ol>
          <li>
            <p>全屏：Ctrl+Alt+F</p>
          </li>
          <li>
            <p>adb调试</p>

            <ol>
              <li>使Linux与Android用ADB连接。</li>
            </ol>

            <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
<span class="c"># 连接安卓</span>
adb connect 127.0.0.1

<span class="c"># 打开shell</span>
adb <span class="nt">-s</span> 127.0.0.1:5555 shell

<span class="c"># 使用root权限</span>
su
</pre></td></tr></tbody></table></code></pre></div>            </div>
          </li>
          <li>
            <p>中文输入法</p>

            <ol>
              <li>可以下载google输入法：按Shift+space进行中英文切换（这样有效防止与linux本机的中英文切换冲突）</li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<h1 id="其他操作-1">其他操作</h1>

<h2 id="工控机如何连wifi">工控机如何连wifi</h2>

<p>当我们工控机从一个环境移动到另一个环境，且新的环境的wifi我们没有连接过，我们没有屏幕如何让工控机连上网呢？</p>

<p>进入工控机的硬盘目录，进入<code class="language-plaintext highlighter-rouge">/etc/netplan/</code>，底下有很多yaml,找到一个最符合下方格式的yaml:</p>

<pre><code class="language-YAML">network: 
  version: 2 
  wifis: 
    NM-6f414fe0-2658-48ff-89ee-c7981b87bc96: 
      renderer: NetworkManager 
      match: 
        name: "wlan0" 
      dhcp4: true 
      dhcp6: true 
      access-points: 
        "EMIS_Vinci_Robocon_5G": 
          auth: 
            key-management: "psk" 
            password: "vinci666" 
          networkmanager: 
            uuid: "6f414fe0-2658-48ff-89ee-c7981b87bc96" 
            name: "EMIS_Vinci_Robocon_5G" 
            passthrough: 
              wifi-security.auth-alg: "open" 
              ipv6.addr-gen-mode: "default" 
              ipv6.ip6-privacy: "-1" 
              proxy._: "" 
      networkmanager: 
        uuid: "6f414fe0-2658-48ff-89ee-c7981b87bc96" 
        name: "EMIS_Vinci_Robocon_5G"

</code></pre>

<p>将其改为新wifi的名和密码：</p>

<pre><code class="language-YAML">network:
  version: 2
  wifis:
    wlan0:
      dhcp4: true
      dhcp6: true
      access-points:
        "EMIS_Vinci_Robocon_5G":
          password: "vinci666"

</code></pre>

<p>工控机开机即可连上网。</p>

<h2 id="ssh远程开发">SSH远程开发</h2>

<h3 id="环境准备-1">环境准备</h3>

<p><strong>1.硬件准备</strong></p>

<p>首先要有一台工控机（X86小型电脑，专业工控机，树莓派等等）。</p>

<p>控制系统的硬件载体是具有多样性的，常用的多是基于ARM、x86等架构的处理器，比如：PC、工控机、树莓派、NVIDIA Jetson…。不同的处理器都存在一定的优缺点，PC和工控机，处理器性能强大，但是功耗高、体积大、灵活性差，嵌入式系统则反之。对于我们而言，可以根据机器人平台的电气、载重、空间以及用途等诸多要素自主选择合适的控制系统。</p>

<p>无论选用何种处理器，只要是要进行机器人的开发，安装了ROS或者ROS2，那么对于开发人员而言，在使用上，没有任何本质的区别，或者换言之，作为软件工程师，部分场景下无需关注于硬件的选型。</p>

<p><strong>2.设置固定IP</strong></p>

<p>远程连接时，不管使用何种工具，需要根据IP地址定位到被连接的主机，再通过账号和密码登录该主机，因此，我们需要先获取该IP地址。并且每次连接时，都需要使用到IP，为了保证连接的便利性和稳定性，最好将被连接主机的IP地址设置为固定IP，具体操作如下。</p>

<p>1.进入设置界面</p>

<p>启动被连接的主机（启动时需要连接显示器或使用HDMI采集卡，并且配置完SSH远程访问之后，可以不再使用显示器或HDMI采集卡），并进入设置界面。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image332.webp" alt="" /></p>

<p>2.配置所连接的网络</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image333.webp" alt="" /></p>

<p>3.设置固定IP</p>

<p>查看当前IP地址。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image334.webp" alt="" /></p>

<p>设置固定IP。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image335.webp" alt="" /></p>

<p>至此，IP配置完毕。</p>

<h3 id="环境搭建">环境搭建</h3>

<p><strong>概念</strong></p>

<p>SSH（Secure Shell）是一种通用的、功能强大的、基于软件的网络安全解决方案。计算机每次向网络发送数据时，SSH都会自动对其进行加密。数据到达目的地时，SSH自动对加密数据进行解密。整个过程都是透明的，使用OpenSSH工具将会增进你的系统安全性。SSH安装容易、使用简单。</p>

<p><strong>实现</strong></p>

<p>SSH实现架构上分为客户端和服务器端两大部分，客户端是数据的发送方，服务端是数据的接收方，当前场景下，我们需要从本地主机发送数据到远程主机，那么本地主机需要安装并启动SSH客户端，而远程主机则需要安装并启动SSH服务端，整个实现具体流程如下：</p>

<ol>
  <li>
    <p>本地主机安装SSH客户端，远程主机安装SSH服务端；</p>
  </li>
  <li>
    <p>远程主机启动SSH服务；</p>
  </li>
  <li>
    <p>本地主机登陆远程主机；</p>
  </li>
  <li>
    <p>实现数据传输。</p>
  </li>
</ol>

<p>1.安装SSH客户端与服务端</p>

<p>默认情况下，Ubuntu系统已经安装了SSH客户端，因此只需要在远程主机安装SSH服务端即可，安装命令如下：</p>

<p>```Plain Text
 sudo apt install openssh-server</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>
如果SSH客户端需要自行安装，那么调用如下命令:

```Plain Text
sudo apt install openssh-client
</pre></td></tr></tbody></table></code></pre></div></div>

<p>2.远程主机启动SSH服务</p>

<p>远程主机启动 ssh 服务命令如下：</p>

<p>```Plain Text
sudo /etc/init.d/ssh start</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>
启动后可使用如下命令查看服务是否正常运行：

```Plain Text
ps -e | grep ssh
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果启动成功，会包含 sshd 程序。</p>

<p>以后需要频繁的使用ssh远程登录，为了简化实现，可以将远程主机的ssh服务设置为开机自启动，命令如下：</p>

<p>```Plain Text
sudo systemctl enable ssh</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
3.本地远程登录

登录远程主机可以调用如下命令:

```bash
ssh -X 用户名@ip地址
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后根据提示，录入登陆密码，即可成功登录。</p>

<p>如果退出，可以调用exit命令：</p>

<p>```Plain Text
exit</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>
**4.实现数据传输**

通过SSH在本地主机只需调用相关指令，便可方便的实现与远程主机的数据上传或下载，指令格式如下所示：

上传文件指令格式如下：

```Plain Text
scp 本地文件路径 账号@ip:路径
</pre></td></tr></tbody></table></code></pre></div></div>

<p>上传文件夹指令格式如下：</p>

<p>```Plain Text
scp -r 本地文件夹路径 账号@ip:路径</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>
下载文件指令格式如下：

```Plain Text
scp 账号@ip:路径 本地文件夹路径
</pre></td></tr></tbody></table></code></pre></div></div>

<p>下载文件夹指令格式如下：</p>

<p>```Plain Text
scp -r 账号@ip:路径 本地文件夹路径</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>
**优化**

每次远程登录时，都需要输入密码，使用不方便，可以借助密钥简化登录过程，实现免密登录，提高操作效率。实现思想是：生成一对公钥私钥，私钥存储在本地，公钥上传至服务器，每次登录时，本地直接上传私钥到服务器，服务器有匹配的公钥就认为是合法用户，直接创建SSH连接即可。具体实现步骤只有两步：

1.  本地生成密钥对；

2.  将公钥上传至远程主机。

**1.生成密钥对**

本地客户端生成公私钥：（一路回车默认即可）

```Plain Text
ssh-keygen
</pre></td></tr></tbody></table></code></pre></div></div>

<p>上面这个命令会在用户目录.ssh文件夹下创建公私钥：</p>

<ol>
  <li>
    <p>id_rsa （私钥）；</p>
  </li>
  <li>
    <p>id_rsa.pub (公钥)。</p>
  </li>
</ol>

<p><strong>2.公钥上传</strong></p>

<p>上传指令如下：</p>

<p>```Plain Text
ssh-copy-id -i ~/.ssh/id_rsa.pub 账号@ip</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td><td class="rouge-code"><pre>
上面这条指令是将本地公钥上传到远程主机的ssh目录下，该目录下有文件authorized\_keys保存了公钥内容。

以后再远程登录就无需录入密码了。

### 使用VScode优化

上一节，我们介绍了ssh远程连接的使用，但是如果只是纯粹使用ssh也存在一些不足，比如：编辑文件内容时，需要使用vi编辑器，且在一个终端内，无法同时编辑多个文件。本节将介绍一更为实用的功能——VSCode结合插件实现远程开发，这使我们可以以图形化的方式实现远程开发，比ssh的使用更方便快捷，可以大大的提高程序开发效率。

**1.准备工作**

VScode远程开发依赖于ssh，请首先按照上一节内容配置ssh远程连接。

**2.为VScode安装远程开发插件**

启动VScode，首先点击侧边栏的扩展按钮，然后在`扩展：商店`的搜索栏输入`Remote Development`并点击同名插件，最后在右侧显示区中点击`安装`。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image336.webp)

**3.配置远程连接**

步骤1：使用快捷键`ctrl + shift + p`打开命令输入窗口，并输入`Remote-SSH:Connect to Host...`，弹出列表中选择与之同名的选项。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image337.webp)

步骤2：步骤1完成将弹出一个新的命令窗口如下，选择下拉列表中的 `Add New SSH Host`。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image338.webp)

步骤3：步骤2完成又将弹出一个新的命令窗口，在其中输入：`ssh -X ubuntu@192.168.43.164`，其中，`ubuntu`需要替换为你的登录用户名，`192.18.43.164` 则替换为被远程连接主机的ip地址。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image339.webp)

步骤4：选择步骤3完成后的弹窗列表中的第一个选项(或直接回车)，即可完成配置，配置成功后会有提示信息。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image340.webp)

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image341.webp)

**4.使用**

步骤1：继续使用快捷键`ctrl + shift + p`打开命令输入窗口，并输入`Remote-SSH:Connect to Host...`，此时列表中将显示步骤3中配置的ip地址，直接选择，选择后，VScode将打开一个新的窗口。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image342.webp)

或者，也可以点击侧边栏的`远程资源管理器`，在弹出的服务器列表中选择要连接的服务器，并右击，选择在本窗口或新窗口中实现远程连接。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image343.webp)

步骤2：选择菜单栏的`文件`下的`打开文件夹`，在弹窗列表中选择需要打开的文件夹并点击确定即可。

![](https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image344.webp)

最终，我们就可以像操作本地文件一样实现远程开发了。

## 远程桌面

因为用X11转发效率太低太低，所以还是要选用远程访问桌面的形式来看Rviz2和Gazebo等等（如果有需求的话）

我们选择使用VNC来看。

1.  安装VNC服务器：

这里以TigerVNC为例进行安装：

```bash
sudo apt install tigervnc-standalone-server tigervnc-common
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>设置VNC密码：</li>
</ol>

<p>为VNC用户设置密码，运行以下命令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vncpasswd
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>配置VNC启动脚本:</li>
</ol>

<p>创建VNC配置文件，在用户家目录内的.vnc文件夹中创建启动文件：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.vnc
nano ~/.vnc/xstartup
</pre></td></tr></tbody></table></code></pre></div></div>

<p>在打开的编辑器里面输入以下内容（以GNOME为例）：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>
<span class="nb">unset </span>SESSION_MANAGER
<span class="nb">unset </span>DBUS_SESSION_BUS_ADDRESS
gnome-session
</pre></td></tr></tbody></table></code></pre></div></div>

<p>保存并退出（在nano中按Ctrl + O保存，然后按Ctrl + X退出）。</p>

<ol>
  <li>给予执行权限：</li>
</ol>

<p>为xstartup文件设置执行权限：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">chmod</span> +x ~/.vnc/xstartup
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>启动VNC服务器：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vncserver <span class="nt">-geometry</span> 1920x1080 <span class="nt">-localhost</span><span class="o">=</span>0
</pre></td></tr></tbody></table></code></pre></div></div>

<p>geometry 选项指定窗口大小，localhost 选项设为 0 以开放连接。(设为1是只允许本地连接)</p>

<p>你将看到类似于:1的输出，这表示VNC会话的显示编号。例如，如果输出为:1，则VNC监听的端口为5901（5900 + 显示编号）。</p>

<ol>
  <li>查看已开启的VNC服务器：</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vncserver <span class="nt">-list</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image345.webp" alt="" /></p>

<ol>
  <li>连接到VNC服务器：</li>
</ol>

<p>使用VNC客户端（如vncviewer）连接到VNC服务器，输入你的服务器IP和端口。例如，如果服务器IP为192.168.31.10，且显示编号为1，你应该连接到192.168.31.10:1，或者直接输入192.168.31.10:5901。</p>

<ol>
  <li>停止VNC服务器：</li>
</ol>

<p>如果需要停止VNC服务器，可以使用以下命令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>vncserver <span class="nt">-kill</span> :1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>将:1替换为你实际使用的显示编号。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image346.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image347.webp" alt="" /></p>

<h2 id="usb端口设置">USB端口设置</h2>

<p><strong>首先先配置好权限</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>
<span class="c"># 将用户权限提高</span>
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> dialout <span class="nv">$USER</span>
newgrp dialout

<span class="c"># 查看下面命令是否输出dialout（若输出才正常）</span>
<span class="nb">groups</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>因为我们插拔USB设备，他的端口号可能会一直变，所以我们要给他的tty起一个固定的别名。</p>

<h3 id="根据usb设备绑定端口多个不同设备">根据USB设备绑定端口(多个不同设备)</h3>

<p><strong>需求：</strong> Ubuntu系统中现接入雷达和智能小车，请为二者绑定端口。</p>

<p><strong>实现原理：</strong> 可以通过USB设备本身的“标识”实现端口绑定。</p>

<p><strong>流程如下：</strong></p>

<p>（1）.查找设备idVendor和idProduct</p>

<p>接入两个USB设备，在终端调用指令<code class="language-plaintext highlighter-rouge">lsusb</code>查看显示系统中以及连接到系统的USB设备信息。</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image348.webp" alt="" /></p>

<p>如上图所示，红色方框内数据为USB设备，ID后面的<code class="language-plaintext highlighter-rouge">1a86:7523</code>分别为USB的idVendor和idProduct（两个参数之间使用”：“分隔）。</p>

<p>另外：可以通过重新插拔比较的方式确定哪些数据对应接入的USB设备。</p>

<p>（2）.编写映射规则</p>

<p>在<code class="language-plaintext highlighter-rouge">/etc/udev/rules.d</code>目录下新建文件xxx.rules（文件名自定义）</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/udev/rules.d/xxx.rules
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输入如下内容：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"ttyUSB*"</span>, ATTRS<span class="o">{</span>idVendor<span class="o">}==</span><span class="s2">"10c4"</span>, ATTRS<span class="o">{</span>idProduct<span class="o">}==</span><span class="s2">"ea60"</span>, MODE:<span class="o">=</span><span class="s2">"0777"</span>, SYMLINK+<span class="o">=</span><span class="s2">"mylidar"</span>
<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"ttyUSB*"</span>, ATTRS<span class="o">{</span>idVendor<span class="o">}==</span><span class="s2">"1a86"</span>, ATTRS<span class="o">{</span>idProduct<span class="o">}==</span><span class="s2">"7523"</span>, MODE:<span class="o">=</span><span class="s2">"0777"</span>, SYMLINK+<span class="o">=</span><span class="s2">"mycar"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>代码解释：</p>

<ul>
  <li>
    <p>KERNEL是内核固定名称，这里统一是“ttyUSB*”；</p>
  </li>
  <li>
    <p>MODE是节点权限，通常改为“0777”，表示可读写可运行；</p>
  </li>
  <li>
    <p>SYMLINK是符号连接，即绑定的别名；</p>
  </li>
  <li>
    <p>ATTRS是设备厂商的唯一标识，idVendor和idProduct正好组成上面通过lsusb查找到的设备ID。</p>
  </li>
</ul>

<p><strong><em>小提示：</em></strong><em>一般的USB设备供应商都会提供类似的脚本文件，对于调用者而言，直接复制该文件到</em><code class="language-plaintext highlighter-rouge">/etc/udev/rule.d</code><em>目录即可。</em></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">设备类型</th>
      <th style="text-align: left">内核名称示例</th>
      <th style="text-align: left">说明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">USB 串口设备</td>
      <td style="text-align: left">ttyUSB*</td>
      <td style="text-align: left">USB 转串口设备，如 /dev/ttyUSB0</td>
    </tr>
    <tr>
      <td style="text-align: left">串口设备</td>
      <td style="text-align: left">ttyS*</td>
      <td style="text-align: left">物理串口设备，如 /dev/ttyS0</td>
    </tr>
    <tr>
      <td style="text-align: left">存储设备</td>
      <td style="text-align: left">sd*</td>
      <td style="text-align: left">SCSI 磁盘设备，如 /dev/sda</td>
    </tr>
    <tr>
      <td style="text-align: left">网络设备</td>
      <td style="text-align: left">eth*</td>
      <td style="text-align: left">以太网设备，如 /dev/eth0</td>
    </tr>
    <tr>
      <td style="text-align: left">输入设备</td>
      <td style="text-align: left">event*</td>
      <td style="text-align: left">输入事件设备，如 /dev/input/event0</td>
    </tr>
    <tr>
      <td style="text-align: left">蓝牙设备</td>
      <td style="text-align: left">rfcomm*</td>
      <td style="text-align: left">蓝牙串口设备，如 /dev/rfcomm0</td>
    </tr>
  </tbody>
</table>

<p>（3）.使规则生效</p>

<p>在终端下输入如下指令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="c"># Ubuntu用下方命令</span>
<span class="nb">sudo </span>service udev reload
<span class="nb">sudo </span>service udev restart

<span class="c">#Fedora用下方命令</span>
<span class="nb">sudo </span>udevadm control <span class="nt">--reload</span>
<span class="nb">sudo </span>udevadm trigger
</pre></td></tr></tbody></table></code></pre></div></div>

<p>再重新插拔设备即可。</p>

<p>（4）.测试</p>

<p>终端下输入如下指令</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ll /dev | <span class="nb">grep </span>ttyUSB
</pre></td></tr></tbody></table></code></pre></div></div>

<p>运行结果如下：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image349.webp" alt="" /></p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image350.webp" alt="" /></p>

<p>也可以多次插拔USB设备，会发现设备端口<code class="language-plaintext highlighter-rouge">ttyUSBn</code>中的n编号会变动，但是别名是始终可以指向对应的USB设备的。至此，就可以使用别名来关联所需使用的USB设备了。</p>

<p><strong>缺点：</strong></p>

<p>上述实现也存在一定的局限性，当Ubuntu接入两台或多台相同型号的USB设备时，由于设备ID是一样的，该种实现方式只会对其中的一台设备生效，这种情况下，就需要通过第二种策略来实现端口的绑定了。</p>

<h3 id="根据主机硬件绑定端口多个相同设备">根据主机硬件绑定端口（多个相同设备)</h3>

<p><strong>需求：</strong> 无人车中现接入一前一后两台相同型号的雷达，请为二者绑定端口。</p>

<p><strong>实现原理：</strong> USB设备所连接主机的USB接口也是有其“标识”的，可以通过这个标识实现端口绑定。</p>

<p><strong>流程如下：</strong></p>

<p>（1）.查看所连接的主机USB接口的KERNELS</p>

<p>调用如下指令查看第一台雷达的USB信息：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>udevadm info <span class="nt">--attribute-walk</span> <span class="nt">--name</span><span class="o">=</span>/dev/ttyUSB0 | <span class="nb">grep </span>KERNELS
udevadm info <span class="nt">--attribute-walk</span> <span class="nt">--name</span><span class="o">=</span>/dev/ttyACM0 | <span class="nb">grep </span>KERNELS
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image351.webp" alt="" /></p>

<p>调用如下指令查看第二台雷达的USB信息：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>udevadm info <span class="nt">--attribute-walk</span> <span class="nt">--name</span><span class="o">=</span>/dev/ttyUSB1 | <span class="nb">grep </span>KERNELS
</pre></td></tr></tbody></table></code></pre></div></div>

<p>运行结果相比较不同的KERNELS，第一台雷达端口地址为<code class="language-plaintext highlighter-rouge">KERNELS==1-1.3:1.0</code>，第二个雷达端口地址为<code class="language-plaintext highlighter-rouge">KERNELS==1-1.4:1.0</code>。可以使用此数据作为不同端口的“<strong>唯一性标识</strong>”。</p>

<p>（2）.编写映射规则</p>

<p>在<code class="language-plaintext highlighter-rouge">/etc/udev/rules.d</code>目录下新建文件xxx.rules（文件名自定义），输入如下内容：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/udev/rules.d/xxx.rules
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"ttyUSB*"</span>, <span class="nv">KERNELS</span><span class="o">==</span><span class="s2">"1-1.3:1.0"</span>, MODE:<span class="o">=</span><span class="s2">"0777"</span>, SYMLINK+<span class="o">=</span><span class="s2">"rplidar_front"</span>
<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"ttyUSB*"</span>, <span class="nv">KERNELS</span><span class="o">==</span><span class="s2">"1-1.4:1.0"</span>, MODE:<span class="o">=</span><span class="s2">"0777"</span>, SYMLINK+<span class="o">=</span><span class="s2">"rplidar_back"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>（3）.使规则生效</p>

<p>在终端下输入如下指令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="c"># Ubuntu用下方命令</span>
<span class="nb">sudo </span>service udev reload
<span class="nb">sudo </span>service udev restart

<span class="c">#Fedora用下方命令</span>
<span class="nb">sudo </span>udevadm control <span class="nt">--reload</span>
<span class="nb">sudo </span>udevadm trigger
</pre></td></tr></tbody></table></code></pre></div></div>

<p>再重新插拔设备即可。</p>

<p>（4）.测试</p>

<p>终端下输入如下指令，运行结果如下：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>ll /dev | <span class="nb">grep </span>ttyUSB
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image352.webp" alt="" /></p>

<p>至此，就可以使用别名来关联所需使用的USB设备了。</p>

<p><strong>缺点：</strong> USB设备必须连接在主机的指定端口上，否则，会导致端口绑定失败，或产生逻辑错误。(而且增加新设备可能会导致端口改变)</p>

<h3 id="根据其他属性绑定端口">根据其他属性绑定端口</h3>

<p>（1）.查看所连接的主机USB接口的信息</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>udevadm info <span class="nt">-a</span> <span class="nt">-p</span> <span class="si">$(</span>udevadm info <span class="nt">-q</span> path <span class="nt">-n</span> /dev/ttyACM0<span class="si">)</span>
udevadm info <span class="nt">-a</span> <span class="nt">-p</span> <span class="si">$(</span>udevadm info <span class="nt">-q</span> path <span class="nt">-n</span> /dev/ttyUSB0<span class="si">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image353.webp" alt="" /></p>

<p>这些数据都是不会变的，所以可以拿这些数据来做标识</p>

<p>（2）.编写映射规则</p>

<p>在<code class="language-plaintext highlighter-rouge">/etc/udev/rules.d</code>目录下新建文件xxx.rules（文件名自定义），输入如下内容：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/udev/rules.d/xxx.rules
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"ttyACM*"</span>, ATTRS<span class="o">{</span>idVendor<span class="o">}==</span><span class="s2">"1a86"</span>, ATTRS<span class="o">{</span>idProduct<span class="o">}==</span><span class="s2">"55d4"</span>, ATTRS<span class="o">{</span>serial<span class="o">}==</span><span class="s2">"0001"</span>, MODE:<span class="o">=</span><span class="s2">"0777"</span>, SYMLINK+<span class="o">=</span><span class="s2">"ttyACM_Lidar"</span>
<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"ttyACM*"</span>, ATTRS<span class="o">{</span>idVendor<span class="o">}==</span><span class="s2">"1a86"</span>, ATTRS<span class="o">{</span>idProduct<span class="o">}==</span><span class="s2">"55d4"</span>, ATTRS<span class="o">{</span>serial<span class="o">}==</span><span class="s2">"0002"</span>, MODE:<span class="o">=</span><span class="s2">"0777"</span>, SYMLINK+<span class="o">=</span><span class="s2">"ttyACM_MCU"</span>
<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"ttyUSB*"</span>, ATTRS<span class="o">{</span>idVendor<span class="o">}==</span><span class="s2">"1a86"</span>, ATTRS<span class="o">{</span>idProduct<span class="o">}==</span><span class="s2">"7523"</span>, MODE:<span class="o">=</span><span class="s2">"0777"</span>, SYMLINK+<span class="o">=</span><span class="s2">"ttyUSB_IMU"</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>（3）.使规则生效</p>

<p>在终端下输入如下指令：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="c"># Ubuntu用下方命令</span>
<span class="nb">sudo </span>service udev reload
<span class="nb">sudo </span>service udev restart

<span class="c">#Fedora用下方命令</span>
<span class="nb">sudo </span>udevadm control <span class="nt">--reload</span>
<span class="nb">sudo </span>udevadm trigger
</pre></td></tr></tbody></table></code></pre></div></div>

<p>再重新插拔设备即可，或者 <strong>直接重启系统。</strong></p>

<p>（4）.测试</p>

<p>终端下输入如下指令<code class="language-plaintext highlighter-rouge">ll /dev | grep ttyUSB</code>，运行结果如下：</p>

<p><img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/2024-03-30/image354.webp" alt="" /></p>

<p>至此，就可以使用别名来关联所需使用的USB设备了。</p>

<p><strong>缺点：</strong> 一些设备可能没有串口号等。</p>

<h3 id="其他注意事项">其他注意事项</h3>

<p>并非所有的USB设备端口号都是<code class="language-plaintext highlighter-rouge">ttyUSBn</code>的格式，比如Arduino的端口号可能是<code class="language-plaintext highlighter-rouge">ttyACMn</code>，而对于USB摄像头而言，一台设备则对应两个端口号，分别是<code class="language-plaintext highlighter-rouge">videon</code>和<code class="language-plaintext highlighter-rouge">video(n+1)</code>，并且启用摄像头设备一般使用的是<code class="language-plaintext highlighter-rouge">videon</code>端口，绑定时需要关联的也是该接口。</p>

<p>但是无论是外接何种USB设备，也不管采用上述两种方案的哪一种进行端口绑定，其原理都是类似的，只是实现细节不同而已。如果是外接的Arduino设备，那么需要在rules文件中的将<code class="language-plaintext highlighter-rouge">KERNEL=="ttyUSB*"</code>修改为<code class="language-plaintext highlighter-rouge">KERNEL=="ttyACM*"</code>，如果外接的是USB摄像头，那么则需要在rules文件中的将<code class="language-plaintext highlighter-rouge">KERNEL=="ttyUSB*"</code>修改为类似于<code class="language-plaintext highlighter-rouge">KERNEL=="video[0,2,4,6]"</code>的格式，其中<code class="language-plaintext highlighter-rouge">video[0,2,4,6]</code>表示可以绑定的端口为<code class="language-plaintext highlighter-rouge">video0</code>或<code class="language-plaintext highlighter-rouge">video2</code>或<code class="language-plaintext highlighter-rouge">video4</code>或<code class="language-plaintext highlighter-rouge">video6</code>。</p>

<h2 id="linux分区gui工具">Linux分区Gui工具</h2>

<p>```Plain Text
sudo apt install gparted
sudo dnf install gparted</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>
## 挂载内网网页

可以把本地的网页挂载到路由器端，或者同内网段其他设备上，甚至可以挂载在本地。

下面以安卓设备为例子，由于安卓设备暂时不能直接打开html,所以我们可以把html挂载到本地服务器，再通过浏览器查看。

由于安卓系统基于Linux内核，所以我们可以下载一个叫termux的app来敲一些Linux命令：

https://github.com/termux/termux-app

首先打开app后，先更新软件缓存：

```bash
pkg update
</pre></td></tr></tbody></table></code></pre></div></div>

<p>然后换源</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>nano <span class="nv">$PREFIX</span>/etc/apt/sources.list
</pre></td></tr></tbody></table></code></pre></div></div>

<p>将该文件内容替换为下面：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>deb https://mirrors.bfsu.edu.cn/termux/termux-packages-24 stable main
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>
    <p>如果你使用的是<code class="language-plaintext highlighter-rouge">nano</code>编辑器：</p>

    <ul>
      <li>
        <p>按 <code class="language-plaintext highlighter-rouge">Ctrl+O</code> 保存文件。</p>
      </li>
      <li>
        <p>按 <code class="language-plaintext highlighter-rouge">Enter</code> 确认文件名。</p>
      </li>
      <li>
        <p>按 <code class="language-plaintext highlighter-rouge">Ctrl+X</code> 退出编辑器。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>如果你使用的是<code class="language-plaintext highlighter-rouge">vim</code>编辑器：</p>

    <ul>
      <li>
        <p>按 <code class="language-plaintext highlighter-rouge">Esc</code> 退出编辑模式。</p>
      </li>
      <li>
        <p>输入 <code class="language-plaintext highlighter-rouge">:wq</code> 保存并退出。</p>
      </li>
    </ul>
  </li>
</ul>

<p>接下来重新更新软件源：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>pkg update <span class="o">&amp;&amp;</span> pkg upgrade
</pre></td></tr></tbody></table></code></pre></div></div>

<p>安装python：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>pkg <span class="nb">install </span>python3
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>通过Termux访问设备存储</strong> ：</p>

<p>如果文件在安卓设备上，可以使用Termux的文件管理器访问设备的存储：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>termux-setup-storage
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>
    <p><strong>进入HTML文件所在的目录</strong> ：</p>

    <ol>
      <li>使用<code class="language-plaintext highlighter-rouge">cd</code>命令进入HTML文件所在的目录：</li>
    </ol>
  </li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">cd</span> ~/your_html_folder
</pre></td></tr></tbody></table></code></pre></div></div>

<ol>
  <li>
    <p><strong>启动Python HTTP服务器</strong> ：</p>

    <ol>
      <li>运行以下命令启动一个简单的HTTP服务器：</li>
    </ol>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>python3 <span class="nt">-m</span> http.server 8000
</pre></td></tr></tbody></table></code></pre></div>    </div>
    <ol>
      <li>这会在端口<code class="language-plaintext highlighter-rouge">8000</code>上启动一个Web服务器。</li>
    </ol>
  </li>
</ol>

<ul>
  <li>启动服务器后，Termux会显示日志信息，例如：</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">Plain Text
Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
</code></p>

<ul>
  <li>这表示服务器已成功启动。</li>
</ul>

<p><strong>在浏览器中访问HTML文件</strong></p>

<ol>
  <li>
    <p><strong>在同一设备上访问</strong> ：</p>

    <ol>
      <li>打开安卓设备上的浏览器（如Chrome），输入以下地址：</li>
    </ol>

    <pre><code class="language-JSON">http://localhost:8000
</code></pre>
    <ol>
      <li>如果HTML文件中有<code class="language-plaintext highlighter-rouge">index.html</code>，它会自动加载；否则，你需要手动点击文件链接。</li>
    </ol>
  </li>
</ol>

  </div>
</article>

<script>
// 页面内容加载完成后执行
document.addEventListener("DOMContentLoaded", function() {

  const imgs = document.querySelectorAll('.post-content img');

  imgs.forEach(img => {
    // 如果图片还没有 data-src，就把 src 移过去
    if (!img.dataset.src) {
      img.dataset.src = img.src; 
      img.removeAttribute('src'); 
    }
  });

  const observer = new IntersectionObserver((entries, obs) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;

        if (img.dataset.src) {
          img.src = img.dataset.src;
          img.removeAttribute('data-src');

          // ✅ 新增：当图片真正加载完成后，触发自定义事件
          img.addEventListener('load', () => {
            const event = new CustomEvent('lazyloaded', { detail: { img } });
            document.dispatchEvent(event);
          }, { once: true });
        }

        obs.unobserve(img);
      }
    });
  }, {
    root: null,           
    rootMargin: '666px 0px',
    threshold: 0          
  });

  imgs.forEach(img => observer.observe(img));
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll('div[class*="language-"].highlighter-rouge').forEach((highlightDiv) => {
    const codePre = highlightDiv.querySelector('td.rouge-code pre');
    if (!codePre) return;

    // 创建复制按钮
    const button = document.createElement('button');
    button.className = 'copy-button';
    button.type = 'button';
    button.innerText = '复制';

    button.addEventListener('click', () => {
      const text = codePre.innerText.trim();
      navigator.clipboard.writeText(text).then(() => {
        button.innerText = '已复制';
        setTimeout(() => button.innerText = '复制', 2000);
      });
    });

    // 挂到 highlightDiv 上，保证按钮固定在代码框右上角
    highlightDiv.style.position = 'relative';   // 父容器相对定位
    button.style.position = 'absolute';
    button.style.top = '8px';
    button.style.right = '8px';
    button.style.padding = '4px 8px';
    button.style.fontSize = '0.8em';
    button.style.cursor = 'pointer';

    highlightDiv.appendChild(button);
  });
});
</script>

<!-- === 图片点击放大效果 === -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  // 选择文章正文内所有图片
  const images = document.querySelectorAll('.post-content img');

  // 过滤掉代码块或表格中不需要放大的图片
  const validImages = Array.from(images).filter(img => {
    return !img.closest('pre, code, table');
  });

  // 初始化 Medium Zoom
  const zoom = mediumZoom(validImages, {
    margin: 24, // 放大时边距
    background: 'rgba(0,0,0,0.8)', // 背景遮罩色
    scrollOffset: 40 // 滚动多少距离后关闭放大
  });

  // 如果页面启用了懒加载，当懒加载触发时重新绑定放大事件
  document.addEventListener('lazyloaded', () => {
    zoom.detach(); // 先解除旧绑定
    zoom.attach('.post-content img'); // 重新绑定新加载的图片
  });
});
</script>




    </main>

    <footer>
  <p>© 2025 小辉的折腾天地. All rights reserved.</p>

  <!-- 社交图标 -->
  <div class="footer-social">
    
      <a href="https://me.tungchiahui.cn" target="_blank" rel="noopener" title="Website">
        <i class="fas fa-link"></i>
      </a>
    
    
      <a href="mailto:tungchiahui@gmail.com" target="_blank" rel="noopener" title="E-Mail">
        <i class="fas fa-envelope"></i>
      </a>
    
    
      <a href="https://github.com/tungchiahui" target="_blank" rel="noopener" title="GitHub">
        <i class="fab fa-github"></i>
      </a>
    
    
      <a href="https://qm.qq.com/q/JRhksaNK82?from=qq" target="_blank" rel="noopener" title="QQ">
        <i class="fab fa-qq"></i>
      </a>
    
    
      <a href="https://t.me/tungchiahui" target="_blank" rel="noopener" title="Telegram">
        <i class="fab fa-telegram"></i>
      </a>
    
    
      <a href="http://www.coolapk.com/u/3224578" target="_blank" rel="noopener" title="CoolAPK">
        <i class="fab fa-android"></i>
      </a>
    
    
      <a href="https://space.bilibili.com/141482453" target="_blank" rel="noopener" title="Bilibili">
        <i class="fa-brands fa-bilibili"></i>
      </a>
    
    
      <a href="https://www.youtube.com/@Chia-huiTung" target="_blank" rel="noopener" title="YouTube">
        <i class="fab fa-youtube"></i>
      </a>
    
    
      <a href="https://twitter.com/tungchiahui" target="_blank" rel="noopener" title="Twitter">
        <i class="fab fa-twitter"></i>
      </a>
    
    
      <a href="https://www.facebook.com/tungchiahui" target="_blank" rel="noopener" title="Facebook">
        <i class="fab fa-facebook"></i>
      </a>
    
    
      <a href="https://www.instagram.com/tungchiahui" target="_blank" rel="noopener" title="Instagram">
        <i class="fab fa-instagram"></i>
      </a>
    
  </div>

  <div class="footer-records">
    <!-- ICP 备案号 -->
    
    <a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener" class="footer-record icp">
      <img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/footer/favicon-miit.ico" alt="工信部图标">
      鲁ICP备2025185601号-2
    </a>
    

     <!-- 公安备案号 -->
    
    <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=xxxxxxxxxxx" target="_blank" rel="noopener" class="footer-record beian">
      <img src="https://cdn.tungchiahui.cn/tungwebsite/assets/images/footer/favicon-mps.ico" alt="公安备案图标">
      鲁公网安备 xxxxxxxxxxx 号
    </a>
    
  </div>


</footer>


    <!-- 这才是liquild的注释，不能用html的注释 -->
    <!-- 因为liquid会把html的注释也渲染出来 -->
    

  </body>
</html>
